name: pubhub
region: sfo
features:
  - buildpack-stack=ubuntu-22
domains:
  - domain: pubhub.dev
    type: PRIMARY
    zone: pubhub.dev
static_sites:
  - name: pubhub-frontend
    github:
      repo: Zer0phucks/Pubhubdev
      branch: main
      deploy_on_push: true
    source_dir: /
    build_command: npm install && npm run build
    output_dir: build
    catchall_document: index.html
    envs:
      - key: VITE_CLERK_PUBLISHABLE_KEY
        value: pk_live_Y2xlcmsucHViaHViLmRldiQ
        scope: RUN_AND_BUILD_TIME
      - key: VITE_API_BASE_URL
        value: https://pubhubdev.ondigitalocean.app
        scope: RUN_AND_BUILD_TIME
      - key: VITE_SENTRY_DSN
        value: https://f400c21bed0184aa960502392fd26c57@o4510074583842816.ingest.us.sentry.io/4510251337580544
        scope: RUN_AND_BUILD_TIME
      - key: VITE_SENTRY_DEBUG
        value: "false"
        scope: RUN_AND_BUILD_TIME
      - key: VITE_USE_MOCK_SERVER
        value: "false"
        scope: RUN_AND_BUILD_TIME
      - key: VITE_DEMO_MODE
        value: "true"
        scope: RUN_AND_BUILD_TIME
      - key: VITE_PUBLIC_POSTHOG_KEY
        value: phc_bhdrw34WNmOsCMleLW4ept8NpGhcl07xgbMy9JyMtjd
        scope: RUN_AND_BUILD_TIME
      - key: VITE_PUBLIC_POSTHOG_HOST
        value: https://us.i.posthog.com
        scope: RUN_AND_BUILD_TIME
services:
  - name: pubhubdev
    github:
      repo: Zer0phucks/Pubhubdev
      branch: main
      deploy_on_push: true
    source_dir: /
    environment_slug: node-js
    instance_size_slug: apps-s-1vcpu-1gb-fixed
    instance_count: 1
    http_port: 8080
    envs:
      - key: DATABASE_URL
        value: ${pubhub-db.DATABASE_URL}
        scope: RUN_AND_BUILD_TIME
      - key: CLERK_SECRET_KEY
        value: sk_live_G3VOBuzo9n53i0mjL6Lgkh0sFxKIteadowN8SNFIFQ
        scope: RUN_AND_BUILD_TIME
      - key: NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY
        value: pk_live_Y2xlcmsucHViaHViLmRldiQ
        scope: RUN_AND_BUILD_TIME
databases:
  - name: pubhub-db
    engine: PG
    version: "17"
ingress:
  rules:
    - match:
        path:
          prefix: /
      component:
        name: pubhub-frontend
    - match:
        path:
          prefix: /pubhubdev
      component:
        name: pubhubdev

