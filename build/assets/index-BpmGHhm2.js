import{r as v,j as s,S as Ca,d as Eh,O as md,R as hd,C as pd,e as fd,T as gd,D as xd,b as bd,f as Th,g as Ch,h as Ih,i as Ah,k as Rh,A as Ph,l as Dh,m as Mh,n as Oh,o as W,p as Lh,q as Fh,s as $h,v as Bh,w as zh,x as Uh,I as Hh,V as Wh,y as qh,z as Gh,B as Yh,E as Vh,F as Kh,G as Jh,H as Xh,J as Qh,K as Zh,L as ep,M as tp,N as sp,Q as np,U as rp,W as ap,X as ip,Y as op,Z as cp,$ as yd,a0 as lp,a1 as dp,a2 as up,a3 as mp,a4 as hp,a5 as pp,a6 as fp,a7 as gp,a8 as xp,a9 as bp,aa as yp,ab as vp,ac as jp,ad as wp,ae as Np,af as Sp,ag as _p,ah as kp,ai as Ep,aj as Tp,ak as Cp,al as Ip,am as Ap,an as Rp,ao as Pp}from"./ui-RilmetJA.js";import{a as Dp}from"./vendor-CXHfjCCn.js";import{t as Mp,c as Op,a as Ia,_ as tn}from"./utils-DybnIWcg.js";import{X as Is,T as Ni,I as Lp,L as vd,F as Fp,Y as $p,M as Bp,P as zp,a as ot,C as Si,b as Up,A as yn,c as vn,d as Us,H as Ss,e as Ks,f as Pe,R as ns,W as po,Z as Jt,g as tt,h as na,i as Xe,j as Hp,S as ve,k as ra,l as ar,m as jd,n as $t,o as _n,p as He,q as Js,r as wd,s as jn,t as _i,u as Wp,v as qp,w as Xt,x as Qt,y as Gp,z as Yp,B as Vp,D as Kn,E as Gr,G as Kp,J as bc,K as Jp,U as aa,N as fo,O as ia,Q as ki,V as Xn,_ as Ei,$ as kn,a0 as Ti,a1 as Nd,a2 as ws,a3 as yc,a4 as _s,a5 as Sd,a6 as Xp,a7 as _d,a8 as oa,a9 as vc,aa as kd,ab as Qn,ac as Vt,ad as Qp,ae as Zp,af as ef,ag as wn,ah as Ed,ai as Jn,aj as Zn,ak as Ka,al as jc,am as Td,an as Ci,ao as ca,ap as go,aq as xo,ar as tf,as as sf,at as nf,au as rf,av as af,aw as Ii,ax as of,ay as cf,az as lf,aA as df}from"./icons-C9J4YD9f.js";import{c as uf}from"./supabase-CJ1L3dlJ.js";(function(){try{var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};e.SENTRY_RELEASE={id:"f1256c807619a72272996f57703d998a766d92c6"}}catch{}})();try{(function(){var e=typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{},t=new e.Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="4a84d4f6-8913-469a-87f1-3d6cd6e00e4f",e._sentryDebugIdIdentifier="sentry-dbid-4a84d4f6-8913-469a-87f1-3d6cd6e00e4f")})()}catch{}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Ar={},wc;function mf(){if(wc)return Ar;wc=1;var e=Dp();return Ar.createRoot=e.createRoot,Ar.hydrateRoot=e.hydrateRoot,Ar}var hf=mf(),Nc={},pf="@vercel/analytics",ff="1.5.0",gf=()=>{window.va||(window.va=function(...t){(window.vaq=window.vaq||[]).push(t)})};function Cd(){return typeof window<"u"}function Id(){try{const e="production"}catch{}return"production"}function xf(e="auto"){if(e==="auto"){window.vam=Id();return}window.vam=e}function bf(){return(Cd()?window.vam:Id())||"production"}function Ai(){return bf()==="development"}function yf(e){return e.scriptSrc?e.scriptSrc:Ai()?"https://va.vercel-scripts.com/v1/script.debug.js":e.basePath?`${e.basePath}/insights/script.js`:"/_vercel/insights/script.js"}function vf(e={debug:!0}){var t;if(!Cd())return;xf(e.mode),gf(),e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend));const n=yf(e);if(document.head.querySelector(`script[src*="${n}"]`))return;const r=document.createElement("script");r.src=n,r.defer=!0,r.dataset.sdkn=pf+(e.framework?`/${e.framework}`:""),r.dataset.sdkv=ff,e.disableAutoTrack&&(r.dataset.disableAutoTrack="1"),e.endpoint?r.dataset.endpoint=e.endpoint:e.basePath&&(r.dataset.endpoint=`${e.basePath}/insights`),e.dsn&&(r.dataset.dsn=e.dsn),r.onerror=()=>{const a=Ai()?"Please check if any ad blockers are enabled and try again.":"Be sure to enable Web Analytics for your project and deploy again. See https://vercel.com/docs/analytics/quickstart for more information.";console.log(`[Vercel Web Analytics] Failed to load script from ${n}. ${a}`)},Ai()&&e.debug===!1&&(r.dataset.debug="false"),document.head.appendChild(r)}function jf({route:e,path:t}){var n;(n=window.va)==null||n.call(window,"pageview",{route:e,path:t})}function wf(){if(!(typeof process>"u"||typeof Nc>"u"))return Nc.REACT_APP_VERCEL_OBSERVABILITY_BASEPATH}function Nf(e){return v.useEffect(()=>{var t;e.beforeSend&&((t=window.va)==null||t.call(window,"beforeSend",e.beforeSend))},[e.beforeSend]),v.useEffect(()=>{vf({framework:e.framework||"react",basePath:e.basePath??wf(),...e.route!==void 0&&{disableAutoTrack:!0},...e})},[]),v.useEffect(()=>{e.route&&e.path&&jf({route:e.route,path:e.path})},[e.route,e.path]),null}const Ja=768;function Sf(){const[e,t]=v.useState(void 0);return v.useEffect(()=>{const n=window.matchMedia(`(max-width: ${Ja-1}px)`),r=()=>{t(window.innerWidth<Ja)};return n.addEventListener("change",r),t(window.innerWidth<Ja),()=>n.removeEventListener("change",r)},[]),!!e}function G(...e){return Mp(Op(e))}const bo=Ia("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),C=v.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...a},i)=>{const o=r?Ca:"button";return s.jsx(o,{"data-slot":"button",className:G(bo({variant:t,size:n,className:e})),ref:i,...a})});C.displayName="Button";function ke({className:e,type:t,...n}){return s.jsx("input",{type:t,"data-slot":"input",className:G("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}function ss({className:e,orientation:t="horizontal",decorative:n=!0,...r}){return s.jsx(Eh,{"data-slot":"separator-root",decorative:n,orientation:t,className:G("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",e),...r})}function Ad({...e}){return s.jsx(hd,{"data-slot":"sheet",...e})}function _f({...e}){return s.jsx(bd,{"data-slot":"sheet-portal",...e})}const Rd=v.forwardRef(({className:e,...t},n)=>s.jsx(md,{ref:n,"data-slot":"sheet-overlay",className:G("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));Rd.displayName="SheetOverlay";function Pd({className:e,children:t,side:n="right",...r}){return s.jsxs(_f,{children:[s.jsx(Rd,{}),s.jsxs(pd,{"data-slot":"sheet-content",className:G("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,s.jsxs(fd,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[s.jsx(Is,{className:"size-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Dd({className:e,...t}){return s.jsx("div",{"data-slot":"sheet-header",className:G("flex flex-col gap-1.5 p-4",e),...t})}function Md({className:e,...t}){return s.jsx(gd,{"data-slot":"sheet-title",className:G("text-foreground font-semibold",e),...t})}function Od({className:e,...t}){return s.jsx(xd,{"data-slot":"sheet-description",className:G("text-muted-foreground text-sm",e),...t})}function Ld({delayDuration:e=0,...t}){return s.jsx(Th,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function kf({...e}){return s.jsx(Ld,{children:s.jsx(Ch,{"data-slot":"tooltip",...e})})}function Ef({...e}){return s.jsx(Ih,{"data-slot":"tooltip-trigger",...e})}function Tf({className:e,sideOffset:t=0,children:n,...r}){return s.jsx(Ah,{children:s.jsxs(Rh,{"data-slot":"tooltip-content",sideOffset:t,className:G("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,s.jsx(Ph,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}const Cf="sidebar_state",If=3600*24*7,Af="11rem",Rf="18rem",Pf="3rem",Df="b",Fd=v.createContext(null);function $d(){const e=v.useContext(Fd);if(!e)throw new Error("useSidebar must be used within a SidebarProvider.");return e}function Mf({defaultOpen:e=!0,open:t,onOpenChange:n,className:r,style:a,children:i,...o}){const l=Sf(),[c,d]=v.useState(!1),[m,u]=v.useState(e),h=t??m,p=v.useCallback(g=>{const N=typeof g=="function"?g(h):g;n?n(N):u(N),document.cookie=`${Cf}=${N}; path=/; max-age=${If}`},[n,h]),f=v.useCallback(()=>l?d(g=>!g):p(g=>!g),[l,p,d]);v.useEffect(()=>{const g=N=>{N.key===Df&&(N.metaKey||N.ctrlKey)&&(N.preventDefault(),f())};return window.addEventListener("keydown",g),()=>window.removeEventListener("keydown",g)},[f]);const b=h?"expanded":"collapsed",w=v.useMemo(()=>({state:b,open:h,setOpen:p,isMobile:l,openMobile:c,setOpenMobile:d,toggleSidebar:f}),[b,h,p,l,c,d,f]);return s.jsx(Fd.Provider,{value:w,children:s.jsx(Ld,{delayDuration:0,children:s.jsx("div",{"data-slot":"sidebar-wrapper",style:{"--sidebar-width":Af,"--sidebar-width-icon":Pf,...a},className:G("group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full",r),...o,children:i})})})}function Of({side:e="left",variant:t="sidebar",collapsible:n="offcanvas",className:r,children:a,...i}){const{isMobile:o,state:l,openMobile:c,setOpenMobile:d}=$d();return n==="none"?s.jsx("div",{"data-slot":"sidebar",className:G("bg-sidebar text-sidebar-foreground flex h-full w-(--sidebar-width) flex-col",r),...i,children:a}):o?s.jsx(Ad,{open:c,onOpenChange:d,...i,children:s.jsxs(Pd,{"data-sidebar":"sidebar","data-slot":"sidebar","data-mobile":"true",className:"bg-sidebar text-sidebar-foreground w-(--sidebar-width) p-0 [&>button]:hidden",style:{"--sidebar-width":Rf},side:e,children:[s.jsxs(Dd,{className:"sr-only",children:[s.jsx(Md,{children:"Sidebar"}),s.jsx(Od,{children:"Displays the mobile sidebar."})]}),s.jsx("div",{className:"flex h-full w-full flex-col",children:a})]})}):s.jsxs("div",{className:"group/sidebar peer text-sidebar-foreground hidden md:block","data-state":l,"data-collapsible":l==="collapsed"?n:"","data-variant":t,"data-side":e,"data-slot":"sidebar",children:[s.jsx("div",{"data-slot":"sidebar-gap",className:G("relative w-(--sidebar-width) bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",t==="floating"||t==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4)))] group-hover/sidebar:w-(--sidebar-width)":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-hover/sidebar:w-(--sidebar-width)")}),s.jsx("div",{"data-slot":"sidebar-container",className:G("fixed inset-y-0 z-10 hidden h-svh w-(--sidebar-width) transition-[left,right,width] duration-200 ease-linear md:flex",e==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",t==="floating"||t==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+(--spacing(4))+2px)] group-hover/sidebar:w-(--sidebar-width)":"group-data-[collapsible=icon]:w-(--sidebar-width-icon) group-hover/sidebar:w-(--sidebar-width) group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:s.jsx("div",{"data-sidebar":"sidebar","data-slot":"sidebar-inner",className:"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm",children:a})})]})}function Lf({className:e,...t}){return s.jsx("div",{"data-slot":"sidebar-header","data-sidebar":"header",className:G("flex flex-col gap-2 p-2",e),...t})}function Ff({className:e,...t}){return s.jsx("div",{"data-slot":"sidebar-content","data-sidebar":"content",className:G("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden group-hover/sidebar:overflow-auto",e),...t})}function $f({className:e,...t}){return s.jsx("ul",{"data-slot":"sidebar-menu","data-sidebar":"menu",className:G("flex w-full min-w-0 flex-col gap-1",e),...t})}function Xa({className:e,...t}){return s.jsx("li",{"data-slot":"sidebar-menu-item","data-sidebar":"menu-item",className:G("group/menu-item relative",e),...t})}const Bf=Ia("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:size-8! group-data-[collapsible=icon]:p-2! group-data-[collapsible=icon]:justify-center group-hover/sidebar:justify-start group-hover/sidebar:w-full [&>span:last-child]:truncate [&>span]:group-data-[collapsible=icon]:hidden [&>span]:group-hover/sidebar:inline [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:p-0!"}},defaultVariants:{variant:"default",size:"default"}});function Qa({asChild:e=!1,isActive:t=!1,variant:n="default",size:r="default",tooltip:a,className:i,...o}){const l=e?Ca:"button",{isMobile:c,state:d}=$d(),m=s.jsx(l,{"data-slot":"sidebar-menu-button","data-sidebar":"menu-button","data-size":r,"data-active":t,className:G(Bf({variant:n,size:r}),i),...o});return a?(typeof a=="string"&&(a={children:a}),s.jsxs(kf,{children:[s.jsx(Ef,{asChild:!0,children:m}),s.jsx(Tf,{side:"right",align:"center",hidden:d!=="collapsed"||c,className:"group-hover/sidebar:hidden",...a})]})):m}function Sc({className:e,...t}){return s.jsx("ul",{"data-slot":"sidebar-menu-sub","data-sidebar":"menu-sub",className:G("border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5","group-data-[collapsible=icon]:hidden group-hover/sidebar:flex",e),...t})}function ps({className:e,...t}){return s.jsx("li",{"data-slot":"sidebar-menu-sub-item","data-sidebar":"menu-sub-item",className:G("group/menu-sub-item relative",e),...t})}function fs({asChild:e=!1,size:t="md",isActive:n=!1,className:r,...a}){const i=e?Ca:"a";return s.jsx(i,{"data-slot":"sidebar-menu-sub-button","data-sidebar":"menu-sub-button","data-size":t,"data-active":n,className:G("text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline-hidden focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",t==="sm"&&"text-xs",t==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...a})}function _c({...e}){return s.jsx(Dh,{"data-slot":"collapsible",...e})}function kc({...e}){return s.jsx(Mh,{"data-slot":"collapsible-trigger",...e})}function Ec({...e}){return s.jsx(Oh,{"data-slot":"collapsible-content",...e})}function O({className:e,...t}){return s.jsx("div",{"data-slot":"card",className:G("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function Je({className:e,...t}){return s.jsx("div",{"data-slot":"card-header",className:G("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 pt-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",e),...t})}function Gt({className:e,...t}){return s.jsx("h4",{"data-slot":"card-title",className:G("leading-none",e),...t})}function vs({className:e,...t}){return s.jsx("p",{"data-slot":"card-description",className:G("text-muted-foreground",e),...t})}function ge({className:e,...t}){return s.jsx("div",{"data-slot":"card-content",className:G("px-6 [&:last-child]:pb-6",e),...t})}function zf({className:e,...t}){return s.jsx("div",{"data-slot":"card-footer",className:G("flex items-center px-6 pb-6 [.border-t]:pt-6",e),...t})}function pe({platform:e,className:t="w-4 h-4",size:n}){const r=e.toLowerCase();return r==="twitter"?s.jsx(Ni,{className:t,style:{color:"#1DA1F2"},role:"img","aria-label":"Twitter"}):r==="instagram"?s.jsx(Lp,{className:t,style:{background:"linear-gradient(45deg, #F58529, #DD2A7B, #8134AF, #515BD4)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"},role:"img","aria-label":"Instagram"}):r==="linkedin"?s.jsx(vd,{className:t,style:{color:"#0A66C2"},role:"img","aria-label":"LinkedIn"}):r==="facebook"?s.jsx(Fp,{className:t,style:{color:"#1877F2"},role:"img","aria-label":"Facebook"}):r==="youtube"?s.jsx($p,{className:t,style:{color:"#FF0000"},role:"img","aria-label":"YouTube"}):r==="tiktok"?s.jsx(Bp,{className:t,style:{color:"#00F2EA"},role:"img","aria-label":"TikTok"}):r==="pinterest"?s.jsx(zp,{className:t,style:{color:"#E60023"},role:"img","aria-label":"Pinterest"}):r==="reddit"?s.jsx("svg",{className:t,viewBox:"0 0 24 24",fill:"#FF4500",style:{width:n||16,height:n||16},role:"img","aria-label":"Reddit",children:s.jsx("path",{d:"M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.248-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"})}):r==="blog"?s.jsx(ot,{className:t,style:{color:"#8B5CF6"},role:"img","aria-label":"Blog"}):s.jsx(Ni,{className:t,role:"img","aria-label":"Twitter"})}const Bd="pubhub_automation_rules",sn=()=>{try{const e=localStorage.getItem(Bd);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading automation rules:",e),[]}},Aa=e=>{try{localStorage.setItem(Bd,JSON.stringify(e))}catch(t){console.error("Error saving automation rules:",t)}},Uf=e=>{const t=sn(),n={...e,id:`rule-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,createdAt:new Date().toISOString(),executionCount:0};return t.push(n),Aa(t),n},Hf=(e,t)=>{const n=sn(),r=n.findIndex(a=>a.id===e);r!==-1&&(n[r]={...n[r],...t},Aa(n))},Wf=e=>{const n=sn().filter(r=>r.id!==e);Aa(n)},qf=e=>{const t=sn(),n=t.find(r=>r.id===e);n&&(n.enabled=!n.enabled,Aa(t))},Gf=e=>sn().filter(n=>n.enabled).filter(n=>{if(n.trigger.platform!==e.platform)return!1;if(n.trigger.minDuration){const[r,a]=e.duration.split(":").map(Number);if(r*60+a<n.trigger.minDuration)return!1}if(n.trigger.keywords&&n.trigger.keywords.length>0){const r=`${e.title} ${e.description}`.toLowerCase();if(!n.trigger.keywords.some(i=>r.includes(i.toLowerCase())))return!1}return!0}),Ra=e=>({blog:"Blog Post","social-thread":"Social Media Thread","linkedin-post":"LinkedIn Article","social-announcement":"Video Announcement",newsletter:"Email Newsletter",captions:"Repurposed Captions"})[e]||e,Yf=e=>({draft:"Save as Draft",review:"Save for Review","auto-publish":"Auto-Publish"})[e]||e,We="ykzckfwdvmzuzxhezthv",xs="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlremNrZndkdm16dXp4aGV6dGh2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjE0MTM2OTIsImV4cCI6MjA3Njk4OTY5Mn0.UoI8-lcWPepwOJz0nML-70f3MnxseCwB_AMedHLoVZE",Ri=`https://${We}.supabase.co/functions/v1/make-server-19ccd85e`;let Yr=null;function Yt(e){Yr=e,e?localStorage.setItem("pubhub_auth_token",e):localStorage.removeItem("pubhub_auth_token")}function it(){return Yr||(Yr=localStorage.getItem("pubhub_auth_token")),Yr}async function Lt(e,t={}){const n=it();if(!n)throw new Error("Not authenticated. Please sign in first.");const r={"Content-Type":"application/json",...t.headers};r.Authorization=`Bearer ${n}`;const a=await fetch(`${Ri}${e}`,{...t,headers:r});if(!a.ok){let i=`HTTP ${a.status}`;try{const o=await a.json();i=o.error||o.message||i}catch{try{const o=await a.text();o&&(i=o)}catch{}}throw new Error(i)}return a.json()}const js={async getAll(e){const t=new URLSearchParams;e?.status&&t.set("status",e.status),e?.platform&&t.set("platform",e.platform),e?.projectId&&t.set("projectId",e.projectId);const n=t.toString()?`?${t.toString()}`:"";return Lt(`/posts${n}`)},async getById(e){return Lt(`/posts/${e}`)},async create(e){return Lt("/posts",{method:"POST",body:JSON.stringify(e)})},async update(e,t){return Lt(`/posts/${e}`,{method:"PUT",body:JSON.stringify(t)})},async delete(e){return Lt(`/posts/${e}`,{method:"DELETE"})}},ir={async getAll(e){const t=e?`?projectId=${e}`:"";return Lt(`/connections${t}`)},async update(e,t){return Lt("/connections",{method:"PUT",body:JSON.stringify({connections:e,projectId:t})})}},Pi={async authorize(e,t){return Lt(`/oauth/authorize/${e}?projectId=${t}`)},async callback(e,t,n){return Lt("/oauth/callback",{method:"POST",body:JSON.stringify({code:e,state:t,platform:n})})},async disconnect(e,t){return Lt("/oauth/disconnect",{method:"POST",body:JSON.stringify({platform:e,projectId:t})})},async getToken(e,t){return Lt(`/oauth/token/${e}/${t}`)}},Di={async uploadProfilePicture(e){const t=it(),n=new FormData;n.append("file",e);const r=await fetch(`${Ri}/upload/profile-picture`,{method:"POST",headers:{Authorization:`Bearer ${t}`},body:n});if(!r.ok){const a=await r.json().catch(()=>({error:"Upload failed"}));throw new Error(a.error||`HTTP ${r.status}`)}return r.json()},async uploadProjectLogo(e,t){const n=it(),r=new FormData;r.append("file",t);const a=await fetch(`${Ri}/upload/project-logo/${e}`,{method:"POST",headers:{Authorization:`Bearer ${n}`},body:r});if(!a.ok){const i=await a.json().catch(()=>({error:"Upload failed"}));throw new Error(i.error||`HTTP ${a.status}`)}return a.json()}},Vf=Ia("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function J({className:e,variant:t,asChild:n=!1,...r}){const a=n?Ca:"span";return s.jsx(a,{"data-slot":"badge",className:G(Vf({variant:t}),e),...r})}function Kf(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const Jf=e=>{switch(e){case"success":return Zf;case"info":return tg;case"warning":return eg;case"error":return sg;default:return null}},Xf=Array(12).fill(0),Qf=({visible:e,className:t})=>W.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},W.createElement("div",{className:"sonner-spinner"},Xf.map((n,r)=>W.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),Zf=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),eg=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),tg=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sg=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},W.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ng=W.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},W.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),W.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),rg=()=>{const[e,t]=W.useState(document.hidden);return W.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let Mi=1;class ag{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...a}=t,i=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:Mi++,o=this.toasts.find(c=>c.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(c=>c.id===i?(this.publish({...c,...t,id:i,title:r}),{...c,...t,id:i,dismissible:l,title:r}):c):this.addToast({title:r,...a,dismissible:l,id:i}),i},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const a=Promise.resolve(t instanceof Function?t():t);let i=r!==void 0,o;const l=a.then(async d=>{if(o=["resolve",d],W.isValidElement(d))i=!1,this.create({id:r,type:"default",message:d});else if(og(d)&&!d.ok){i=!1;const u=typeof n.error=="function"?await n.error(`HTTP error! status: ${d.status}`):n.error,h=typeof n.description=="function"?await n.description(`HTTP error! status: ${d.status}`):n.description,f=typeof u=="object"&&!W.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...f})}else if(d instanceof Error){i=!1;const u=typeof n.error=="function"?await n.error(d):n.error,h=typeof n.description=="function"?await n.description(d):n.description,f=typeof u=="object"&&!W.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...f})}else if(n.success!==void 0){i=!1;const u=typeof n.success=="function"?await n.success(d):n.success,h=typeof n.description=="function"?await n.description(d):n.description,f=typeof u=="object"&&!W.isValidElement(u)?u:{message:u};this.create({id:r,type:"success",description:h,...f})}}).catch(async d=>{if(o=["reject",d],n.error!==void 0){i=!1;const m=typeof n.error=="function"?await n.error(d):n.error,u=typeof n.description=="function"?await n.description(d):n.description,p=typeof m=="object"&&!W.isValidElement(m)?m:{message:m};this.create({id:r,type:"error",description:u,...p})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),c=()=>new Promise((d,m)=>l.then(()=>o[0]==="reject"?m(o[1]):d(o[1])).catch(m));return typeof r!="string"&&typeof r!="number"?{unwrap:c}:Object.assign(r,{unwrap:c})},this.custom=(t,n)=>{const r=n?.id||Mi++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const at=new ag,ig=(e,t)=>{const n=t?.id||Mi++;return at.addToast({title:e,...t,id:n}),n},og=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",cg=ig,lg=()=>at.toasts,dg=()=>at.getActiveToasts(),$=Object.assign(cg,{success:at.success,info:at.info,warning:at.warning,error:at.error,custom:at.custom,message:at.message,promise:at.promise,dismiss:at.dismiss,loading:at.loading},{getHistory:lg,getToasts:dg});Kf("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Rr(e){return e.label!==void 0}const ug=3,mg="24px",hg="16px",Tc=4e3,pg=356,fg=14,gg=45,xg=200;function qt(...e){return e.filter(Boolean).join(" ")}function bg(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const yg=e=>{var t,n,r,a,i,o,l,c,d;const{invert:m,toast:u,unstyled:h,interacting:p,setHeights:f,visibleToasts:b,heights:w,index:g,toasts:N,expanded:E,removeToast:A,defaultRichColors:y,closeButton:j,style:_,cancelButtonStyle:T,actionButtonStyle:k,className:S="",descriptionClassName:D="",duration:F,position:q,gap:te,expandByDefault:I,classNames:P,icons:R,closeButtonAriaLabel:z="Close toast"}=e,[U,V]=W.useState(null),[ne,re]=W.useState(null),[K,x]=W.useState(!1),[M,X]=W.useState(!1),[le,Q]=W.useState(!1),[Se,Y]=W.useState(!1),[B,ft]=W.useState(!1),[Ms,dt]=W.useState(0),[L,oe]=W.useState(0),fe=W.useRef(u.duration||F||Tc),Ce=W.useRef(null),Ie=W.useRef(null),de=g===0,Ee=g+1<=b,se=u.type,_e=u.dismissible!==!1,ue=u.className||"",Wt=u.descriptionClassName||"",Os=W.useMemo(()=>w.findIndex(he=>he.toastId===u.id)||0,[w,u.id]),Ga=W.useMemo(()=>{var he;return(he=u.closeButton)!=null?he:j},[u.closeButton,j]),Tr=W.useMemo(()=>u.duration||F||Tc,[u.duration,F]),Ya=W.useRef(0),ln=W.useRef(0),mc=W.useRef(0),dn=W.useRef(null),[wh,Nh]=q.split("-"),hc=W.useMemo(()=>w.reduce((he,Ue,Qe)=>Qe>=Os?he:he+Ue.height,0),[w,Os]),pc=rg(),Sh=u.invert||m,Va=se==="loading";ln.current=W.useMemo(()=>Os*te+hc,[Os,hc]),W.useEffect(()=>{fe.current=Tr},[Tr]),W.useEffect(()=>{x(!0)},[]),W.useEffect(()=>{const he=Ie.current;if(he){const Ue=he.getBoundingClientRect().height;return oe(Ue),f(Qe=>[{toastId:u.id,height:Ue,position:u.position},...Qe]),()=>f(Qe=>Qe.filter(ut=>ut.toastId!==u.id))}},[f,u.id]),W.useLayoutEffect(()=>{if(!K)return;const he=Ie.current,Ue=he.style.height;he.style.height="auto";const Qe=he.getBoundingClientRect().height;he.style.height=Ue,oe(Qe),f(ut=>ut.find(Ve=>Ve.toastId===u.id)?ut.map(Ve=>Ve.toastId===u.id?{...Ve,height:Qe}:Ve):[{toastId:u.id,height:Qe,position:u.position},...ut])},[K,u.title,u.description,f,u.id,u.jsx,u.action,u.cancel]);const hs=W.useCallback(()=>{X(!0),dt(ln.current),f(he=>he.filter(Ue=>Ue.toastId!==u.id)),setTimeout(()=>{A(u)},xg)},[u,A,f,ln]);W.useEffect(()=>{if(u.promise&&se==="loading"||u.duration===1/0||u.type==="loading")return;let he;return E||p||pc?(()=>{if(mc.current<Ya.current){const ut=new Date().getTime()-Ya.current;fe.current=fe.current-ut}mc.current=new Date().getTime()})():(()=>{fe.current!==1/0&&(Ya.current=new Date().getTime(),he=setTimeout(()=>{u.onAutoClose==null||u.onAutoClose.call(u,u),hs()},fe.current))})(),()=>clearTimeout(he)},[E,p,u,se,pc,hs]),W.useEffect(()=>{u.delete&&(hs(),u.onDismiss==null||u.onDismiss.call(u,u))},[hs,u.delete]);function _h(){var he;if(R?.loading){var Ue;return W.createElement("div",{className:qt(P?.loader,u==null||(Ue=u.classNames)==null?void 0:Ue.loader,"sonner-loader"),"data-visible":se==="loading"},R.loading)}return W.createElement(Qf,{className:qt(P?.loader,u==null||(he=u.classNames)==null?void 0:he.loader),visible:se==="loading"})}const kh=u.icon||R?.[se]||Jf(se);var fc,gc;return W.createElement("li",{tabIndex:0,ref:Ie,className:qt(S,ue,P?.toast,u==null||(t=u.classNames)==null?void 0:t.toast,P?.default,P?.[se],u==null||(n=u.classNames)==null?void 0:n[se]),"data-sonner-toast":"","data-rich-colors":(fc=u.richColors)!=null?fc:y,"data-styled":!(u.jsx||u.unstyled||h),"data-mounted":K,"data-promise":!!u.promise,"data-swiped":B,"data-removed":M,"data-visible":Ee,"data-y-position":wh,"data-x-position":Nh,"data-index":g,"data-front":de,"data-swiping":le,"data-dismissible":_e,"data-type":se,"data-invert":Sh,"data-swipe-out":Se,"data-swipe-direction":ne,"data-expanded":!!(E||I&&K),"data-testid":u.testId,style:{"--index":g,"--toasts-before":g,"--z-index":N.length-g,"--offset":`${M?Ms:ln.current}px`,"--initial-height":I?"auto":`${L}px`,..._,...u.style},onDragEnd:()=>{Q(!1),V(null),dn.current=null},onPointerDown:he=>{he.button!==2&&(Va||!_e||(Ce.current=new Date,dt(ln.current),he.target.setPointerCapture(he.pointerId),he.target.tagName!=="BUTTON"&&(Q(!0),dn.current={x:he.clientX,y:he.clientY})))},onPointerUp:()=>{var he,Ue,Qe;if(Se||!_e)return;dn.current=null;const ut=Number(((he=Ie.current)==null?void 0:he.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Cr=Number(((Ue=Ie.current)==null?void 0:Ue.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Ve=new Date().getTime()-((Qe=Ce.current)==null?void 0:Qe.getTime()),gt=U==="x"?ut:Cr,Ir=Math.abs(gt)/Ve;if(Math.abs(gt)>=gg||Ir>.11){dt(ln.current),u.onDismiss==null||u.onDismiss.call(u,u),re(U==="x"?ut>0?"right":"left":Cr>0?"down":"up"),hs(),Y(!0);return}else{var Rt,Pt;(Rt=Ie.current)==null||Rt.style.setProperty("--swipe-amount-x","0px"),(Pt=Ie.current)==null||Pt.style.setProperty("--swipe-amount-y","0px")}ft(!1),Q(!1),V(null)},onPointerMove:he=>{var Ue,Qe,ut;if(!dn.current||!_e||((Ue=window.getSelection())==null?void 0:Ue.toString().length)>0)return;const Ve=he.clientY-dn.current.y,gt=he.clientX-dn.current.x;var Ir;const Rt=(Ir=e.swipeDirections)!=null?Ir:bg(q);!U&&(Math.abs(gt)>1||Math.abs(Ve)>1)&&V(Math.abs(gt)>Math.abs(Ve)?"x":"y");let Pt={x:0,y:0};const xc=Ls=>1/(1.5+Math.abs(Ls)/20);if(U==="y"){if(Rt.includes("top")||Rt.includes("bottom"))if(Rt.includes("top")&&Ve<0||Rt.includes("bottom")&&Ve>0)Pt.y=Ve;else{const Ls=Ve*xc(Ve);Pt.y=Math.abs(Ls)<Math.abs(Ve)?Ls:Ve}}else if(U==="x"&&(Rt.includes("left")||Rt.includes("right")))if(Rt.includes("left")&&gt<0||Rt.includes("right")&&gt>0)Pt.x=gt;else{const Ls=gt*xc(gt);Pt.x=Math.abs(Ls)<Math.abs(gt)?Ls:gt}(Math.abs(Pt.x)>0||Math.abs(Pt.y)>0)&&ft(!0),(Qe=Ie.current)==null||Qe.style.setProperty("--swipe-amount-x",`${Pt.x}px`),(ut=Ie.current)==null||ut.style.setProperty("--swipe-amount-y",`${Pt.y}px`)}},Ga&&!u.jsx&&se!=="loading"?W.createElement("button",{"aria-label":z,"data-disabled":Va,"data-close-button":!0,onClick:Va||!_e?()=>{}:()=>{hs(),u.onDismiss==null||u.onDismiss.call(u,u)},className:qt(P?.closeButton,u==null||(r=u.classNames)==null?void 0:r.closeButton)},(gc=R?.close)!=null?gc:ng):null,(se||u.icon||u.promise)&&u.icon!==null&&(R?.[se]!==null||u.icon)?W.createElement("div",{"data-icon":"",className:qt(P?.icon,u==null||(a=u.classNames)==null?void 0:a.icon)},u.promise||u.type==="loading"&&!u.icon?u.icon||_h():null,u.type!=="loading"?kh:null):null,W.createElement("div",{"data-content":"",className:qt(P?.content,u==null||(i=u.classNames)==null?void 0:i.content)},W.createElement("div",{"data-title":"",className:qt(P?.title,u==null||(o=u.classNames)==null?void 0:o.title)},u.jsx?u.jsx:typeof u.title=="function"?u.title():u.title),u.description?W.createElement("div",{"data-description":"",className:qt(D,Wt,P?.description,u==null||(l=u.classNames)==null?void 0:l.description)},typeof u.description=="function"?u.description():u.description):null),W.isValidElement(u.cancel)?u.cancel:u.cancel&&Rr(u.cancel)?W.createElement("button",{"data-button":!0,"data-cancel":!0,style:u.cancelButtonStyle||T,onClick:he=>{Rr(u.cancel)&&_e&&(u.cancel.onClick==null||u.cancel.onClick.call(u.cancel,he),hs())},className:qt(P?.cancelButton,u==null||(c=u.classNames)==null?void 0:c.cancelButton)},u.cancel.label):null,W.isValidElement(u.action)?u.action:u.action&&Rr(u.action)?W.createElement("button",{"data-button":!0,"data-action":!0,style:u.actionButtonStyle||k,onClick:he=>{Rr(u.action)&&(u.action.onClick==null||u.action.onClick.call(u.action,he),!he.defaultPrevented&&hs())},className:qt(P?.actionButton,u==null||(d=u.classNames)==null?void 0:d.actionButton)},u.action.label):null)};function Cc(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function vg(e,t){const n={};return[e,t].forEach((r,a)=>{const i=a===1,o=i?"--mobile-offset":"--offset",l=i?hg:mg;function c(d){["top","right","bottom","left"].forEach(m=>{n[`${o}-${m}`]=typeof d=="number"?`${d}px`:d})}typeof r=="number"||typeof r=="string"?c(r):typeof r=="object"?["top","right","bottom","left"].forEach(d=>{r[d]===void 0?n[`${o}-${d}`]=l:n[`${o}-${d}`]=typeof r[d]=="number"?`${r[d]}px`:r[d]}):c(l)}),n}const jg=W.forwardRef(function(t,n){const{id:r,invert:a,position:i="bottom-right",hotkey:o=["altKey","KeyT"],expand:l,closeButton:c,className:d,offset:m,mobileOffset:u,theme:h="light",richColors:p,duration:f,style:b,visibleToasts:w=ug,toastOptions:g,dir:N=Cc(),gap:E=fg,icons:A,containerAriaLabel:y="Notifications"}=t,[j,_]=W.useState([]),T=W.useMemo(()=>r?j.filter(K=>K.toasterId===r):j.filter(K=>!K.toasterId),[j,r]),k=W.useMemo(()=>Array.from(new Set([i].concat(T.filter(K=>K.position).map(K=>K.position)))),[T,i]),[S,D]=W.useState([]),[F,q]=W.useState(!1),[te,I]=W.useState(!1),[P,R]=W.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),z=W.useRef(null),U=o.join("+").replace(/Key/g,"").replace(/Digit/g,""),V=W.useRef(null),ne=W.useRef(!1),re=W.useCallback(K=>{_(x=>{var M;return(M=x.find(X=>X.id===K.id))!=null&&M.delete||at.dismiss(K.id),x.filter(({id:X})=>X!==K.id)})},[]);return W.useEffect(()=>at.subscribe(K=>{if(K.dismiss){requestAnimationFrame(()=>{_(x=>x.map(M=>M.id===K.id?{...M,delete:!0}:M))});return}setTimeout(()=>{Lh.flushSync(()=>{_(x=>{const M=x.findIndex(X=>X.id===K.id);return M!==-1?[...x.slice(0,M),{...x[M],...K},...x.slice(M+1)]:[K,...x]})})})}),[j]),W.useEffect(()=>{if(h!=="system"){R(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?R("dark"):R("light")),typeof window>"u")return;const K=window.matchMedia("(prefers-color-scheme: dark)");try{K.addEventListener("change",({matches:x})=>{R(x?"dark":"light")})}catch{K.addListener(({matches:M})=>{try{R(M?"dark":"light")}catch(X){console.error(X)}})}},[h]),W.useEffect(()=>{j.length<=1&&q(!1)},[j]),W.useEffect(()=>{const K=x=>{var M;if(o.every(Q=>x[Q]||x.code===Q)){var le;q(!0),(le=z.current)==null||le.focus()}x.code==="Escape"&&(document.activeElement===z.current||(M=z.current)!=null&&M.contains(document.activeElement))&&q(!1)};return document.addEventListener("keydown",K),()=>document.removeEventListener("keydown",K)},[o]),W.useEffect(()=>{if(z.current)return()=>{V.current&&(V.current.focus({preventScroll:!0}),V.current=null,ne.current=!1)}},[z.current]),W.createElement("section",{ref:n,"aria-label":`${y} ${U}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},k.map((K,x)=>{var M;const[X,le]=K.split("-");return T.length?W.createElement("ol",{key:K,dir:N==="auto"?Cc():N,tabIndex:-1,ref:z,className:d,"data-sonner-toaster":!0,"data-sonner-theme":P,"data-y-position":X,"data-x-position":le,style:{"--front-toast-height":`${((M=S[0])==null?void 0:M.height)||0}px`,"--width":`${pg}px`,"--gap":`${E}px`,...b,...vg(m,u)},onBlur:Q=>{ne.current&&!Q.currentTarget.contains(Q.relatedTarget)&&(ne.current=!1,V.current&&(V.current.focus({preventScroll:!0}),V.current=null))},onFocus:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||ne.current||(ne.current=!0,V.current=Q.relatedTarget)},onMouseEnter:()=>q(!0),onMouseMove:()=>q(!0),onMouseLeave:()=>{te||q(!1)},onDragEnd:()=>q(!1),onPointerDown:Q=>{Q.target instanceof HTMLElement&&Q.target.dataset.dismissible==="false"||I(!0)},onPointerUp:()=>I(!1)},T.filter(Q=>!Q.position&&x===0||Q.position===K).map((Q,Se)=>{var Y,B;return W.createElement(yg,{key:Q.id,icons:A,index:Se,toast:Q,defaultRichColors:p,duration:(Y=g?.duration)!=null?Y:f,className:g?.className,descriptionClassName:g?.descriptionClassName,invert:a,visibleToasts:w,closeButton:(B=g?.closeButton)!=null?B:c,interacting:te,position:K,style:g?.style,unstyled:g?.unstyled,classNames:g?.classNames,cancelButtonStyle:g?.cancelButtonStyle,actionButtonStyle:g?.actionButtonStyle,closeButtonAriaLabel:g?.closeButtonAriaLabel,removeToast:re,toasts:T.filter(ft=>ft.position==Q.position),heights:S.filter(ft=>ft.position==Q.position),setHeights:D,expandByDefault:l,gap:E,expanded:F,swipeDirections:t.swipeDirections})})):null}))});let Za=null;function wg(){return Za||(Za=uf(`https://${We}.supabase.co`,xs,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0}})),Za}const Ke=wg(),zd=v.createContext(void 0);function Ng({children:e}){const[t,n]=v.useState(null),[r,a]=v.useState(!0),[i,o]=v.useState(null),l=`https://${We}.supabase.co/functions/v1/make-server-19ccd85e`,c=async()=>{if(!t){console.warn("Cannot refresh profile: no user authenticated");return}try{const{data:{session:w}}=await Ke.auth.getSession();if(!w?.access_token){console.warn("No session token available for profile refresh");return}const g=await fetch(`${l}/auth/profile`,{headers:{Authorization:`Bearer ${w.access_token}`}});if(g.ok){const N=await g.json();N.user?.profilePicture&&(o(N.user.profilePicture),t&&n({...t,user_metadata:{...t.user_metadata,profilePicture:N.user.profilePicture}}))}else console.error("Failed to refresh profile:",g.status,g.statusText)}catch(w){console.error("Error refreshing profile:",w)}};v.useEffect(()=>{(async()=>{try{const{data:{session:N}}=await Ke.auth.getSession();if(N?.user){const E={id:N.user.id,email:N.user.email,user_metadata:N.user.user_metadata};n(E),Yt(N.access_token)}}catch(N){console.error("Session check error:",N)}finally{a(!1)}})();const{data:{subscription:g}}=Ke.auth.onAuthStateChange((N,E)=>{if(E?.user){const A={id:E.user.id,email:E.user.email,user_metadata:E.user.user_metadata};n(A),Yt(E.access_token)}else n(null),Yt(null)});return()=>{g.unsubscribe()}},[]);const d=async(w,g)=>{const{data:N,error:E}=await Ke.auth.signInWithPassword({email:w,password:g});if(E)throw E;if(N.session?.user){const A={id:N.session.user.id,email:N.session.user.email,user_metadata:N.session.user.user_metadata};n(A),Yt(N.session.access_token);try{const y=await fetch(`${l}/auth/profile`,{headers:{Authorization:`Bearer ${N.session.access_token}`}});if(y.ok){const j=await y.json();j.user?.profilePicture&&o(j.user.profilePicture)}}catch(y){console.error("Profile initialization error:",y)}}},m=async(w,g,N)=>{const{data:E,error:A}=await Ke.auth.signUp({email:w,password:g,options:{data:{name:N}}});if(A){const y=A.message.toLowerCase();throw y.includes("already")||y.includes("registered")||y.includes("exists")?new Error("User already registered"):(y.includes("password"),A)}if(E.user&&!E.session)throw E.user.identities&&E.user.identities.length===0?new Error("User already registered"):new Error("Please check your email to confirm your account before signing in.");if(E.session?.user){const y={id:E.session.user.id,email:E.session.user.email,user_metadata:{name:N}};n(y),Yt(E.session.access_token);try{await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/auth/profile`,{headers:{Authorization:`Bearer ${E.session.access_token}`}})}catch(j){console.error("Profile initialization error:",j)}}},u=async()=>{await Ke.auth.signOut(),n(null),Yt(null)},h=async()=>{const{data:{session:w}}=await Ke.auth.getSession();return w?.access_token||null},p=async()=>{const{error:w}=await Ke.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}/oauth/callback`,queryParams:{access_type:"offline",prompt:"consent"}}});if(w)throw w},f=async()=>{const{error:w}=await Ke.auth.signInWithOAuth({provider:"facebook",options:{redirectTo:`${window.location.origin}/oauth/callback`}});if(w)throw w},b=async()=>{const{error:w}=await Ke.auth.signInWithOAuth({provider:"twitter",options:{redirectTo:`${window.location.origin}/oauth/callback`}});if(w)throw w};return v.useEffect(()=>{t&&c()},[t?.id]),s.jsx(zd.Provider,{value:{user:t,loading:r,isAuthenticated:!!t,profilePicture:i,signin:d,signout:u,signup:m,signinWithGoogle:p,signinWithFacebook:f,signinWithTwitter:b,getToken:h,refreshProfile:c},children:e})}function Ln(){const e=v.useContext(zd);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e}const Ud=v.createContext(void 0);function Sg({children:e}){const[t,n]=v.useState(null),[r,a]=v.useState([]),[i,o]=v.useState(!0),{user:l,isAuthenticated:c,getToken:d}=Ln(),m=`https://${We}.supabase.co/functions/v1/make-server-19ccd85e`,u=async()=>{if(c)try{const E=await d();if(!E)return;const A=await fetch(`${m}/projects`,{headers:{Authorization:`Bearer ${E}`}});if(A.ok){const y=await A.json();a(y.projects||[]),y.projects&&y.projects.length>0&&!t&&await h()}}catch(E){console.error("Error fetching projects:",E)}},h=async()=>{if(c)try{const E=await d();if(!E)return;const A=await fetch(`${m}/projects/current`,{headers:{Authorization:`Bearer ${E}`}});if(A.ok){const y=await A.json();y.project&&(n(y.project),localStorage.setItem("currentProjectId",y.project.id))}}catch(E){console.error("Error fetching current project:",E)}finally{o(!1)}},p=async E=>{if(c)try{const A=await d();if(!A)return;(await fetch(`${m}/projects/current`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${A}`},body:JSON.stringify({projectId:E.id})})).ok&&(n(E),localStorage.setItem("currentProjectId",E.id))}catch(A){console.error("Error setting current project:",A)}},f=async(E,A)=>{if(!c)throw new Error("Not authenticated");try{const y=await d();if(!y)throw new Error("No auth token");const j=await fetch(`${m}/projects`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify({name:E,description:A})});if(j.ok){const _=await j.json();return await u(),_.project}else{const _=await j.json();throw new Error(_.error||"Failed to create project")}}catch(y){throw console.error("Error creating project:",y),y}},b=async(E,A)=>{if(c)try{const y=await d();if(!y)return;const j=await fetch(`${m}/projects/${E}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${y}`},body:JSON.stringify(A)});if(j.ok&&(await u(),t?.id===E)){const _=await j.json();n(_.project)}}catch(y){throw console.error("Error updating project:",y),y}},w=async E=>{if(c)try{const A=await d();if(!A)return;const y=await fetch(`${m}/projects/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${A}`}});if(y.ok)await u(),t?.id===E&&await h();else{const j=await y.json();throw new Error(j.error||"Failed to delete project")}}catch(A){throw console.error("Error deleting project:",A),A}},g=async()=>{await u()};v.useEffect(()=>{c?(u(),h()):o(!1)},[c]);const N={currentProject:t,projects:r,loading:i,setCurrentProject:p,createProject:f,updateProject:b,deleteProject:w,refreshProjects:g};return s.jsx(Ud.Provider,{value:N,children:e})}function At(){const e=v.useContext(Ud);if(e===void 0)throw new Error("useProject must be used within a ProjectProvider");return e}function _g(){const[e,t]=v.useState([]),[n,r]=v.useState(!1),{user:a,isAuthenticated:i}=Ln(),{projects:o}=At();v.useEffect(()=>{if(!i||!a)return;const h=[{id:"profile",title:"Complete Your Profile",description:"Add your name and profile picture to personalize your account",completed:!!(a.user_metadata?.name&&a.user_metadata?.avatar_url),required:!0},{id:"connect-platforms",title:"Connect Social Media Platforms",description:"Link your social media accounts to start managing content",completed:!1,required:!0},{id:"create-project",title:"Create Your First Project",description:"Organize your content with projects and campaigns",completed:o.length>0,required:!0},{id:"first-post",title:"Create Your First Post",description:"Write and schedule your first piece of content",completed:!1,required:!0},{id:"explore-features",title:"Explore PubHub Features",description:"Take a tour of the dashboard and key features",completed:!1,required:!1},{id:"set-preferences",title:"Configure Settings",description:"Set up notifications and preferences",completed:!1,required:!1}];t(h);const p=a.created_at&&new Date(a.created_at).getTime()>Date.now()-10080*60*1e3,f=h.some(b=>b.required&&!b.completed);r(p&&f)},[a,i,o]);const l=h=>{switch(h){case"profile":window.location.href="/settings/profile";break;case"connect-platforms":window.location.href="/settings/connections";break;case"create-project":window.location.href="/projects/new";break;case"first-post":window.location.href="/compose";break;case"explore-features":window.location.href="/tour";break;case"set-preferences":window.location.href="/settings";break}},c=()=>{r(!1),localStorage.setItem("onboarding-dismissed","true")},d=e.filter(h=>h.completed).length,m=e.length,u=d/m*100;return!n||e.length===0?null:s.jsxs(O,{className:"w-full max-w-2xl mx-auto mb-6 border-emerald-200 bg-gradient-to-r from-emerald-50 to-teal-50",children:[s.jsxs(Je,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(Gt,{className:"text-emerald-700 flex items-center gap-2",children:["Welcome to PubHub! ",s.jsxs("span",{className:"text-sm font-normal text-emerald-600",children:["(",d,"/",m," completed)"]})]}),s.jsx(vs,{className:"text-emerald-600",children:"Complete these steps to get the most out of your PubHub experience"})]}),s.jsx(C,{variant:"ghost",size:"sm",onClick:c,className:"text-emerald-600 hover:text-emerald-700",children:s.jsx(Is,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"w-full bg-emerald-100 rounded-full h-2 mt-3",children:s.jsx("div",{className:"bg-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})})]}),s.jsxs(ge,{className:"space-y-3",children:[e.map((h,p)=>s.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${h.completed?"bg-emerald-50 border-emerald-200":"bg-white border-gray-200 hover:border-emerald-300"}`,children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:h.completed?s.jsx(Si,{className:"h-5 w-5 text-emerald-500"}):s.jsx(Up,{className:"h-5 w-5 text-gray-400"})}),s.jsxs("div",{children:[s.jsxs("h4",{className:`font-medium ${h.completed?"text-emerald-700":"text-gray-900"}`,children:[h.title,h.required&&s.jsx("span",{className:"ml-2 text-xs bg-emerald-100 text-emerald-700 px-2 py-1 rounded-full",children:"Required"})]}),s.jsx("p",{className:`text-sm ${h.completed?"text-emerald-600":"text-gray-600"}`,children:h.description})]})]}),!h.completed&&s.jsxs(C,{size:"sm",onClick:()=>l(h.id),className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:[h.id==="explore-features"?"Start Tour":"Get Started",s.jsx(yn,{className:"ml-1 h-3 w-3"})]})]},h.id)),d===m&&s.jsxs("div",{className:"text-center py-4 bg-emerald-100 rounded-lg",children:[s.jsx(Si,{className:"h-8 w-8 text-emerald-500 mx-auto mb-2"}),s.jsx("h3",{className:"font-semibold text-emerald-700 mb-1",children:"Congratulations! "}),s.jsx("p",{className:"text-emerald-600 text-sm",children:"You've completed the onboarding process. You're all set to create amazing content!"})]})]})]})}function kg({title:e,value:t,change:n,icon:r,isPositive:a}){const i=["from-blue-500/10 to-cyan-500/10 border-blue-500/20","from-pink-500/10 to-rose-500/10 border-pink-500/20","from-purple-500/10 to-indigo-500/10 border-purple-500/20","from-emerald-500/10 to-teal-500/10 border-emerald-500/20"],o=["from-blue-500 to-cyan-500","from-pink-500 to-rose-500","from-purple-500 to-indigo-500","from-emerald-500 to-teal-500"],l=e==="Total Reach"?0:e==="Engagement"?1:e==="New Messages"?2:3;return s.jsx(O,{className:`p-6 bg-gradient-to-br ${i[l]} border backdrop-blur-sm`,children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:e}),s.jsx("h3",{className:"mt-2",children:t}),s.jsx("p",{className:`mt-2 ${a?"text-emerald-400":"text-red-400"}`,children:n})]}),s.jsx("div",{className:`p-3 bg-gradient-to-br ${o[l]} rounded-lg shadow-lg`,children:s.jsx("div",{className:"text-white",children:r})})]})})}function Eg({selectedPlatform:e,onNavigate:t,onOpenAIChat:n}){const[r,a]=v.useState(!0),[i,o]=v.useState([]),[l,c]=v.useState([]),[d,m]=v.useState(!1),{currentProject:u}=At();v.useEffect(()=>{u&&h()},[u?.id]);const h=async()=>{if(u)try{a(!0);const[j,_]=await Promise.all([js.getAll({projectId:u.id}),ir.getAll(u.id)]);o(j.posts||[]),c(_.connections||[])}catch(j){console.error("Failed to load dashboard data:",j),$.error("Failed to load dashboard data")}finally{a(!1)}},p=async()=>{try{m(!0),await h(),$.success("Dashboard refreshed")}catch(j){console.error("Failed to refresh:",j)}finally{m(!1)}},b=(()=>{const j=e==="all"?i:i.filter(I=>I.platforms?.includes(e)),_=j.length,T=j.filter(I=>I.status==="published").length,k=j.filter(I=>I.status==="scheduled").length,S=j.filter(I=>I.status==="draft").length,D=new Date,F=new Date(D.getTime()+10080*60*1e3),q=j.filter(I=>{if(!I.scheduledFor)return!1;const P=new Date(I.scheduledFor);return P>=D&&P<=F}).length,te=l.filter(I=>I.connected).length;return{totalPosts:_,publishedPosts:T,scheduledPosts:k,draftPosts:S,upcomingPosts:q,connectedCount:te}})(),w=()=>(e==="all"?i:i.filter(_=>_.platforms?.includes(e))).filter(_=>_.status==="published").sort((_,T)=>{const k=new Date(_.publishedAt||_.createdAt);return new Date(T.publishedAt||T.createdAt).getTime()-k.getTime()}).slice(0,3).map(_=>({platform:_.platforms[0],content:_.content,engagement:"0",time:g(new Date(_.publishedAt||_.createdAt))})),g=j=>{const T=new Date().getTime()-j.getTime(),k=Math.floor(T/6e4),S=Math.floor(T/36e5),D=Math.floor(T/864e5);return k<60?`${k}m ago`:S<24?`${S}h ago`:D===1?"1d ago":D<7?`${D}d ago`:`${Math.floor(D/7)}w ago`},N=w(),E=sn(),A=E.filter(j=>j.enabled),y=[{title:"Total Posts",value:b.totalPosts.toString(),change:`${b.publishedPosts} published`,icon:s.jsx(vn,{className:"w-5 h-5"}),isPositive:!0},{title:"Connected Platforms",value:b.connectedCount.toString(),change:`of ${l.length} platforms`,icon:s.jsx(Us,{className:"w-5 h-5"}),isPositive:!0},{title:"Drafts",value:b.draftPosts.toString(),change:"Ready to publish",icon:s.jsx(Ss,{className:"w-5 h-5"}),isPositive:!0},{title:"Scheduled",value:b.upcomingPosts.toString(),change:"Next 7 days",icon:s.jsx(Ks,{className:"w-5 h-5"}),isPositive:!0}];return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Pe,{className:"w-8 h-8 animate-spin text-emerald-500 mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading your dashboard..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(_g,{}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-emerald-400",children:e==="all"?"All Platforms":e.charAt(0).toUpperCase()+e.slice(1)}),s.jsx("p",{className:"text-muted-foreground",children:"Your content performance at a glance"})]}),s.jsxs(C,{onClick:p,variant:"outline",size:"sm",disabled:d,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",children:[s.jsx(ns,{className:`w-4 h-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6","data-tour":"dashboard",children:y.map((j,_)=>s.jsx(kg,{...j},_))}),A.length>0&&s.jsxs(O,{className:"p-6 bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/20",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-yellow-500 to-orange-500 rounded-lg shadow-lg",children:s.jsx(po,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h3",{children:"Active Automation Rules"}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[A.length," ",A.length===1?"rule":"rules"," monitoring your video content"]})]})]}),s.jsxs(J,{className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/30",children:[E.reduce((j,_)=>j+_.executionCount,0)," total runs"]})]}),s.jsxs("div",{className:"space-y-2",children:[A.slice(0,3).map(j=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-black/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[s.jsx(Jt,{className:"w-4 h-4 text-yellow-400 flex-shrink-0"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm truncate",children:j.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[j.trigger.platform,"  ",Ra(j.transformation)]})]})]}),s.jsxs(J,{variant:"outline",className:"text-xs",children:[j.executionCount," runs"]})]},j.id)),A.length>3&&s.jsxs("p",{className:"text-xs text-center text-muted-foreground pt-2",children:["+",A.length-3," more rules"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{children:"Recent Posts"}),s.jsx(tt,{className:"w-5 h-5 text-muted-foreground"})]}),s.jsx("div",{className:"space-y-4",children:N.length>0?N.map((j,_)=>s.jsxs("div",{className:"pb-4 border-b last:border-0",children:[s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 bg-white/5 border border-white/10 rounded-md",children:[s.jsx(pe,{platform:j.platform,className:"w-3.5 h-3.5"}),s.jsx("span",{className:"text-sm capitalize",children:j.platform})]}),s.jsx("span",{className:"text-muted-foreground text-sm",children:j.time})]}),s.jsx("p",{className:"mt-2 line-clamp-2",children:j.content})]})}),s.jsxs("div",{className:"flex items-center gap-1 mt-2",children:[s.jsx(Ss,{className:"w-4 h-4 text-pink-500"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Published"})]})]},_)):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(vn,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:"No published posts yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Create your first post to see it here"})]})})]}),s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{children:"Connected Platforms"}),s.jsx(Us,{className:"w-5 h-5 text-muted-foreground"})]}),s.jsx("div",{className:"space-y-3",children:l.filter(j=>j.connected).length>0?s.jsxs(s.Fragment,{children:[l.filter(j=>j.connected).map((j,_)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 border border-white/10 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pe,{platform:j.platform,className:"w-5 h-5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm capitalize",children:j.name}),j.username&&s.jsx("p",{className:"text-xs text-muted-foreground",children:j.username})]})]}),s.jsx(J,{variant:"outline",className:"bg-green-500/10 text-green-400 border-green-500/30",children:"Active"})]},_)),l.filter(j=>!j.connected).length>0&&s.jsx("div",{className:"pt-3 border-t border-border",children:s.jsxs("p",{className:"text-sm text-muted-foreground text-center",children:[l.filter(j=>!j.connected).length," platform",l.filter(j=>!j.connected).length!==1?"s":""," available to connect"]})})]}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Us,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-3"}),s.jsx("p",{className:"text-muted-foreground",children:"No platforms connected"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Go to Settings to connect platforms"})]})})]})]}),s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{children:"Quick Actions"}),s.jsx(Jt,{className:"w-5 h-5 text-muted-foreground"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsx("button",{onClick:()=>t?.("compose"),className:"p-4 border border-blue-500/20 rounded-lg hover:bg-blue-500/10 transition-all hover:border-blue-500/40 text-left group","data-tour":"compose",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-cyan-500 rounded-lg shadow-lg shadow-blue-500/20 group-hover:shadow-blue-500/40 transition-shadow",children:s.jsx(vn,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{children:"Create New Post"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Publish to all platforms"})]})]})}),s.jsx("button",{onClick:()=>t?.("calendar"),className:"p-4 border border-purple-500/20 rounded-lg hover:bg-purple-500/10 transition-all hover:border-purple-500/40 text-left group","data-tour":"calendar",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-purple-500 to-indigo-500 rounded-lg shadow-lg shadow-purple-500/20 group-hover:shadow-purple-500/40 transition-shadow",children:s.jsx(Ks,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{children:"Schedule Content"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Plan your content calendar"})]})]})}),s.jsx("button",{onClick:()=>n?.("Can you give me some suggestions for content to create?",!0),className:"p-4 border border-emerald-500/20 rounded-lg hover:bg-emerald-500/10 transition-all hover:border-emerald-500/40 text-left group",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-500 to-teal-500 rounded-lg shadow-lg shadow-emerald-500/20 group-hover:shadow-emerald-500/40 transition-shadow",children:s.jsx(Jt,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{children:"AI Suggestions"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Get content ideas"})]})]})})]})]})]})}function Tg({selectedPlatform:e,onNavigate:t,onOpenAIChat:n}){return s.jsx(Eg,{selectedPlatform:e,onNavigate:t,onOpenAIChat:n})}function kt({className:e,...t}){return s.jsx("textarea",{"data-slot":"textarea",className:G("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function ee({className:e,...t}){return s.jsx(Fh,{"data-slot":"label",className:G("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function la({className:e,...t}){return s.jsx($h,{"data-slot":"switch",className:G("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(Bh,{"data-slot":"switch-thumb",className:G("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}const Cg=Ia("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function $e({className:e,variant:t,...n}){return s.jsx("div",{"data-slot":"alert",role:"alert",className:G(Cg({variant:t}),e),...n})}function Be({className:e,...t}){return s.jsx("div",{"data-slot":"alert-description",className:G("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",e),...t})}function yt({...e}){return s.jsx(zh,{"data-slot":"select",...e})}function vt({...e}){return s.jsx(Wh,{"data-slot":"select-value",...e})}function jt({className:e,size:t="default",children:n,...r}){return s.jsxs(Uh,{"data-slot":"select-trigger","data-size":t,className:G("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,s.jsx(Hh,{asChild:!0,children:s.jsx(na,{className:"size-4 opacity-50"})})]})}function wt({className:e,children:t,position:n="popper",...r}){return s.jsx(qh,{children:s.jsxs(Gh,{"data-slot":"select-content",className:G("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[s.jsx(Ig,{}),s.jsx(Yh,{className:G("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),s.jsx(Ag,{})]})})}function qe({className:e,children:t,...n}){return s.jsxs(Vh,{"data-slot":"select-item",className:G("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[s.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:s.jsx(Kh,{children:s.jsx(Xe,{className:"size-4"})})}),s.jsx(Jh,{children:t})]})}function Ig({className:e,...t}){return s.jsx(Xh,{"data-slot":"select-scroll-up-button",className:G("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Hp,{className:"size-4"})})}function Ag({className:e,...t}){return s.jsx(Qh,{"data-slot":"select-scroll-down-button",className:G("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(na,{className:"size-4"})})}const Rg="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function yo(e){const[t,n]=v.useState(!1),r=()=>{n(!0)},{src:a,alt:i,style:o,className:l,...c}=e;return t?s.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${l??""}`,style:o,children:s.jsx("div",{className:"flex items-center justify-center w-full h-full",children:s.jsx("img",{src:Rg,alt:"Error loading image",...c,"data-original-url":a})})}):s.jsx("img",{src:a,alt:i,className:l,style:o,...c,onError:r})}function Pg({...e}){return s.jsx(Zh,{"data-slot":"popover",...e})}function Dg({...e}){return s.jsx(ep,{"data-slot":"popover-trigger",...e})}function Mg({className:e,align:t="center",sideOffset:n=4,...r}){return s.jsx(tp,{children:s.jsx(sp,{"data-slot":"popover-content",align:t,sideOffset:n,className:G("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-72 origin-(--radix-popover-content-transform-origin) rounded-md border p-4 shadow-md outline-hidden",e),...r})})}function En({onGenerate:e,context:t="",placeholder:n="Describe what you want to generate...",variant:r="icon",buttonText:a="Generate with AI",className:i="",contextType:o="general",autoGenerate:l=!1}){const[c,d]=v.useState(!1),[m,u]=v.useState(""),[h,p]=v.useState(""),[f,b]=v.useState(!1),[w,g]=v.useState(!1),N=()=>{const k={reply:`You are helping write a reply to this message: "${t}". Generate a professional, friendly, and engaging response.`,post:"You are helping create social media content. Generate engaging and creative text.",comment:`You are helping write a comment in response to: "${t}". Generate a thoughtful and engaging comment.`,template:"You are helping create a reusable content template. Generate versatile and professional text.",general:"Generate helpful and relevant text based on the user's request."};return k[o]||k.general},E=()=>{const k={reply:"Write a friendly, professional, and engaging reply",post:"Create an engaging social media post",comment:"Write a thoughtful and engaging comment",template:"Create a versatile content template",general:"Generate helpful text"};return k[o]||k.general},A=async(k=!1)=>{const S=k?E():m;if(!S.trim()){$.error("Please enter a description");return}b(!0),p("");try{await new Promise(I=>setTimeout(I,1500));const D={reply:["Thank you so much for reaching out! I'd be happy to help. Let me share some insights that might be useful for you.","I really appreciate your message! That's a great question. Here's what I recommend...","Thanks for your interest! I'm glad this resonated with you. Let me elaborate on that point."],post:[" Exciting news! We're thrilled to share something amazing with our community. Stay tuned for more updates!"," Here's a quick tip that changed everything for me. Hope it helps you too! What's your experience with this?"," Just learned something incredible and had to share it with you all. Let's discuss in the comments!"],comment:["This is spot on! I've experienced the same thing. Thanks for sharing your perspective!","Great point! I'd love to add that this also works well when combined with...","Absolutely agree! This is such an important topic. Would love to hear more about your approach."],template:[` [Template Name]

 Key Point 1
 Key Point 2
 Key Point 3

What are your thoughts? Let's discuss! `,`Hey everyone! 

Just wanted to share [topic] with you all.

[Main content here]

Let me know what you think!`],general:["Here's a well-crafted response based on your requirements. Feel free to customize it further!"]},F=D[o]||D.general;let te=F[Math.floor(Math.random()*F.length)];S.toLowerCase().includes("professional")&&(te=te.replace(/!/g,".").replace(/||||||/g,"")),p(te),$.success("Text generated!")}catch(D){console.error("AI generation error:",D),$.error("Failed to generate text. Please try again.")}finally{b(!1)}},y=k=>{d(k),k&&l&&A(!0),k||(l||u(""),p(""),g(!1))},j=()=>{h&&(e(h),d(!1),u(""),p(""),$.success("Text inserted!"))},_=()=>{h&&(navigator.clipboard.writeText(h),g(!0),setTimeout(()=>g(!1),2e3),$.success("Copied to clipboard!"))},T=()=>{(l||m.trim())&&A(l)};return s.jsxs(Pg,{open:c,onOpenChange:y,children:[s.jsx(Dg,{asChild:!0,children:r==="icon"?s.jsx(C,{variant:"ghost",size:"icon",className:`h-8 w-8 ${i}`,type:"button",children:s.jsx(ve,{className:"w-4 h-4 text-purple-500"})}):s.jsxs(C,{variant:"outline",className:`border-purple-500/30 hover:bg-purple-500/10 ${i}`,type:"button",children:[s.jsx(ra,{className:"w-4 h-4 mr-2 text-purple-500"}),a]})}),s.jsx(Mg,{className:"w-[500px]",align:"start",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-4 h-4 text-purple-500"}),s.jsx(ee,{className:"text-sm font-semibold",children:"AI Text Generator"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:N()})]}),!l&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"ai-prompt",children:"What do you want to generate?"}),s.jsx(kt,{id:"ai-prompt",placeholder:n,value:m,onChange:k=>u(k.target.value),className:"min-h-[80px]",onKeyDown:k=>{k.key==="Enter"&&(k.metaKey||k.ctrlKey)&&(k.preventDefault(),A(!1))}}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Press ",navigator.platform.includes("Mac")?"":"Ctrl"," + Enter to generate"]})]}),s.jsx(C,{onClick:()=>A(!1),disabled:f||!m.trim(),className:"w-full bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ve,{className:"w-4 h-4 mr-2"}),"Generate"]})})]}),l&&f&&!h&&s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsxs("div",{className:"text-center space-y-3",children:[s.jsx(Pe,{className:"w-8 h-8 animate-spin mx-auto text-purple-500"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Generating your reply..."})]})}),h&&s.jsxs("div",{className:"space-y-3 pt-3 border-t",children:[s.jsx(ee,{children:"Generated Text"}),s.jsxs("div",{className:"relative",children:[s.jsx(kt,{value:h,onChange:k=>p(k.target.value),className:"min-h-[120px] pr-10"}),s.jsx(C,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 h-6 w-6",onClick:_,type:"button",children:w?s.jsx(Xe,{className:"w-3 h-3 text-green-500"}):s.jsx(ar,{className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{onClick:j,className:"flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:"Use This Text"}),s.jsxs(C,{onClick:T,variant:"outline",disabled:f,children:[s.jsx(jd,{className:"w-4 h-4 mr-2"}),"Regenerate"]})]})]})]})})]})}const Hd="pubhub_custom_templates";function Nn(){try{const e=localStorage.getItem(Hd);return e?JSON.parse(e):[]}catch(e){return console.error("Error loading custom templates:",e),[]}}function Og(e){try{const n=Nn().filter(r=>r.id!==e);localStorage.setItem(Hd,JSON.stringify(n))}catch(t){throw console.error("Error deleting custom template:",t),new Error("Failed to delete template")}}const Pr={twitter:{maxLength:280,maxImages:4,maxVideos:1,supportsThreads:!0,supportsHashtags:!0,maxHashtags:5},instagram:{maxLength:2200,maxImages:10,maxVideos:1,supportsThreads:!1,supportsHashtags:!0,maxHashtags:30},linkedin:{maxLength:3e3,maxImages:9,maxVideos:1,supportsThreads:!1,supportsHashtags:!0,maxHashtags:10},facebook:{maxLength:63206,maxImages:10,maxVideos:1,supportsThreads:!1,supportsHashtags:!0},youtube:{maxLength:5e3,maxImages:1,maxVideos:1,supportsThreads:!1,supportsHashtags:!0,maxHashtags:15},tiktok:{maxLength:2200,maxImages:35,maxVideos:1,supportsThreads:!1,supportsHashtags:!0,maxHashtags:10},pinterest:{maxLength:500,maxImages:1,maxVideos:1,supportsThreads:!1,supportsHashtags:!0},reddit:{maxLength:4e4,maxImages:20,maxVideos:1,supportsThreads:!0,supportsHashtags:!1},blog:{maxLength:1e5,maxImages:50,maxVideos:10,supportsThreads:!1,supportsHashtags:!0}};function Lg({transformedContent:e=null,remixContent:t=null,onContentUsed:n}={}){const[r,a]=v.useState(""),[i,o]=v.useState([]),[l,c]=v.useState(null),[d,m]=v.useState(null),[u,h]=v.useState(Nn()),[p,f]=v.useState([]),[b,w]=v.useState(!1),{currentProject:g}=At(),[N,E]=v.useState([{id:"twitter",name:"Twitter",icon:s.jsx(pe,{platform:"twitter"}),enabled:!0},{id:"instagram",name:"Instagram",icon:s.jsx(pe,{platform:"instagram"}),enabled:!0},{id:"linkedin",name:"LinkedIn",icon:s.jsx(pe,{platform:"linkedin"}),enabled:!0},{id:"facebook",name:"Facebook",icon:s.jsx(pe,{platform:"facebook"}),enabled:!1},{id:"youtube",name:"YouTube",icon:s.jsx(pe,{platform:"youtube"}),enabled:!1},{id:"tiktok",name:"TikTok",icon:s.jsx(pe,{platform:"tiktok"}),enabled:!1},{id:"pinterest",name:"Pinterest",icon:s.jsx(pe,{platform:"pinterest"}),enabled:!1},{id:"reddit",name:"Reddit",icon:s.jsx(pe,{platform:"reddit"}),enabled:!1},{id:"blog",name:"Blog",icon:s.jsx(pe,{platform:"blog"}),enabled:!1}]);v.useEffect(()=>{t&&(c(t),a(t.description),m(null),$.info("Content Loaded from Remix",{description:`"${t.title}" from ${t.platform}`}),n&&n())},[t]),v.useEffect(()=>{e&&(a(e.content),m(e),c(null),E(N.map(I=>({...I,enabled:e.platforms.includes(I.id)}))),$.info("Content Loaded",{description:`Transformed from "${e.sourceVideo.title}" (${e.sourceVideo.platform})`}),n&&n())},[e]),v.useEffect(()=>{h(Nn())},[]);const A=I=>{E(N.map(P=>P.id===I?{...P,enabled:!P.enabled}:P))},y=(I,P)=>{E(N.map(R=>R.id===I?{...R,selectedTemplate:P}:R))},j=(I,P)=>{const R=Pr[I],z=P.length,U=i.filter(re=>re.type.startsWith("image/")).length,V=i.filter(re=>re.type.startsWith("video/")).length,ne=[];return z>R.maxLength&&ne.push(`Exceeds character limit (${z}/${R.maxLength})`),U>R.maxImages&&ne.push(`Too many images (${U}/${R.maxImages})`),V>R.maxVideos&&ne.push(`Too many videos (${V}/${R.maxVideos})`),{isValid:ne.length===0,issues:ne}},_=()=>{const I=["Just discovered an amazing productivity hack that's changed my workflow!  Who else struggles with time management?","Behind the scenes look at how we create content that resonates. The secret? Authenticity always wins. ","Hot take: The best content strategy is the one you can stick to consistently. Quality over quantity, every time. "],P=I[Math.floor(Math.random()*I.length)];a(P)},T=()=>{const I=document.createElement("input");I.type="file",I.multiple=!0,I.accept="image/*,video/*,application/pdf,.doc,.docx,.txt",I.onchange=P=>{const R=P.target.files;if(R&&R.length>0){const z=Array.from(R).map(U=>({name:U.name,size:U.size,type:U.type}));o([...i,...z])}},I.click()},k=I=>{o(i.filter(P=>P.name!==I))},S=()=>{const I=N.filter(P=>P.enabled);if(I.length===0){$.error("No Platforms Selected",{description:"Please select at least one platform to generate previews."});return}if(!r.trim()){$.error("No Content",{description:"Please add content in the 'Your Content' section."});return}w(!0),setTimeout(()=>{const P=I.map(R=>{const z=u.find(ne=>ne.id===R.selectedTemplate);let U=r;z&&(U=z.content.replace(/\{content\}/g,r.slice(0,100)));const V=Pr[R.id].maxLength;return U.length>V&&(U=U.slice(0,V-3)+"..."),{platform:R.id,content:U}});f(P),w(!1),$.success("Previews Generated",{description:`Created ${P.length} preview(s) for your selected platforms.`})},1500)},D=N.filter(I=>I.enabled),F=I=>u.filter(P=>P.platforms.includes(I)),q=async(I,P)=>{if(!g){$.error("No project selected");return}setPublishingPlatforms(R=>new Set(R).add(I));try{const{post:R}=await js.create({projectId:g.id,platforms:[I],content:P,status:"publishing",attachments:i.filter(x=>x.platform===I)}),z=i.find(x=>x.platform===I),{data:{session:U},error:V}=await Ke.auth.getSession();if(V||!U?.access_token)throw new Error("You must be signed in to publish");const ne=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/posts/publish`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${U.access_token}`},body:JSON.stringify({postId:R.id,projectId:g.id,platforms:[I],content:{text:P,caption:P,title:P.split(`
`)[0].substring(0,100),subreddit:I==="reddit"?"test":void 0},media:z?{url:z.url,type:z.type,videoUrl:z.type==="video"?z.url:void 0}:null})}),re=await ne.json();if(!ne.ok)throw new Error(re.error||"Failed to publish");const K=re.results?.find(x=>x.platform===I);if(K?.success)await js.update(R.id,{status:"published",publishedAt:new Date().toISOString()}),$.success(" Post Published!",{description:`Successfully posted to ${N.find(x=>x.id===I)?.name}`,action:K.url?{label:"View Post",onClick:()=>window.open(K.url,"_blank")}:void 0}),f(x=>x.filter(M=>M.platform!==I));else throw new Error(K?.error||"Failed to publish to platform")}catch(R){console.error("Publishing error:",R),R.message?.includes("not connected")||R.message?.includes("Platform not connected")?$.error("Platform Not Connected",{description:`Connect your ${N.find(z=>z.id===I)?.name} account in Settings to publish live.`,action:{label:"Go to Settings",onClick:()=>{window.dispatchEvent(new CustomEvent("navigate-to-settings",{detail:{tab:"connections"}}))}}}):R.message?.includes("OAuth not configured")?$.error("Platform Setup Required",{description:"OAuth credentials need to be configured for this platform."}):$.error("Publishing Failed",{description:R.message||"Failed to publish post. Please try again."})}finally{setPublishingPlatforms(R=>{const z=new Set(R);return z.delete(I),z})}},te=async(I,P)=>{if(!g){$.error("No project selected");return}$.info("Schedule Post",{description:"Scheduling feature coming soon! This would save as a draft for now."});try{await js.create({projectId:g.id,platforms:[I],content:P,status:"draft",attachments:i.filter(R=>R.platform===I)}),$.success("Saved as Draft",{description:"Your post has been saved as a draft."})}catch(R){console.error("Draft save error:",R),$.error("Save Failed",{description:R.message||"Failed to save draft."})}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-emerald-400 mb-2",children:"Create Content"}),s.jsx("p",{className:"text-muted-foreground",children:"Create content from scratch or use your remixed content"})]}),!g&&s.jsxs($e,{className:"border-yellow-500/30 bg-yellow-500/10",children:[s.jsx($t,{className:"w-4 h-4 text-yellow-400"}),s.jsx(Be,{className:"text-yellow-400",children:"No project selected. Please select a project from the sidebar to create content."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[l&&s.jsxs(O,{className:"overflow-hidden",children:[s.jsx(Je,{className:"bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-b border-emerald-500/20",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-4 h-4 text-emerald-400"}),s.jsx("h3",{className:"text-emerald-400",children:"Remix Source"})]})}),s.jsxs(ge,{className:"p-4 space-y-3",children:[s.jsxs("div",{className:"relative aspect-video overflow-hidden rounded-md bg-muted",children:[s.jsx(yo,{src:l.thumbnail,alt:l.title,className:"w-full h-full object-cover"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(pe,{platform:l.platform,className:"w-6 h-6"})})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"line-clamp-2",children:l.title}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1 line-clamp-3",children:l.description})]}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>{c(null),a(""),$.success("Source cleared")},className:"w-full",children:"Clear Source"})]})]}),d&&!l&&s.jsxs($e,{className:"bg-blue-500/10 border-blue-500/30",children:[s.jsx(ve,{className:"w-4 h-4 text-blue-400"}),s.jsx(Be,{className:"text-blue-400",children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{children:s.jsx("span",{className:"font-medium",children:"Content transformed from video"})}),s.jsxs("div",{className:"text-sm flex items-center gap-2",children:[s.jsx(pe,{platform:d.sourceVideo.platform,className:"w-4 h-4"}),s.jsx("span",{className:"truncate",children:d.sourceVideo.title})]}),s.jsx(C,{variant:"ghost",size:"sm",onClick:()=>{m(null),a(""),$.success("Content cleared")},className:"text-blue-400 hover:text-blue-300 hover:bg-blue-500/10 w-full",children:"Clear"})]})})]}),s.jsxs(O,{children:[s.jsx(Je,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("h3",{children:"Your Content"})]}),s.jsx(En,{onGenerate:I=>a(I),contextType:"post",placeholder:"e.g., 'Write an engaging post about productivity tips'",variant:"button",buttonText:"Generate with AI"})]})}),s.jsxs(ge,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(kt,{placeholder:"Add your content here to use with templates...",value:r,onChange:I=>a(I.target.value),rows:10,className:"resize-none pr-12"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(En,{onGenerate:I=>a(I),contextType:"post",placeholder:"e.g., 'Write an engaging post about...'",variant:"icon"})})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[s.jsxs("span",{children:[r.length," characters"]}),s.jsxs(C,{variant:"ghost",size:"sm",onClick:_,className:"gap-2",children:[s.jsx(ra,{className:"w-3 h-3"}),"AI Suggest"]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{children:"Attachments"}),s.jsxs(C,{variant:"outline",size:"sm",onClick:T,className:"w-full gap-2",children:[s.jsx(_n,{className:"w-4 h-4"}),"Add Files"]}),i.length>0&&s.jsx("div",{className:"space-y-2 mt-2",children:i.map(I=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted rounded-md text-sm",children:[s.jsx("span",{className:"truncate flex-1",children:I.name}),s.jsx("button",{onClick:()=>k(I.name),className:"ml-2 text-muted-foreground hover:text-foreground",children:s.jsx(Is,{className:"w-4 h-4"})})]},I.name))})]})]})]})]}),s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsx("h3",{children:"Select Platforms"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Choose platforms and templates for your content"})]}),s.jsxs(ge,{className:"space-y-4",children:[s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:N.map(I=>s.jsxs("div",{className:`p-4 border rounded-lg transition-all ${I.enabled?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[I.icon,s.jsx("span",{children:I.name})]}),s.jsx(la,{checked:I.enabled,onCheckedChange:()=>A(I.id)})]}),I.enabled&&s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"flex items-center justify-between text-sm",children:s.jsxs("span",{className:"text-muted-foreground",children:["Max: ",Pr[I.id].maxLength," chars"]})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx(ee,{className:"text-xs",children:"Template"}),s.jsxs(yt,{value:I.selectedTemplate||"none",onValueChange:P=>y(I.id,P==="none"?"":P),children:[s.jsx(jt,{className:"w-full",children:s.jsx(vt,{placeholder:"No template"})}),s.jsxs(wt,{children:[s.jsx(qe,{value:"none",children:"No template"}),F(I.id).map(P=>s.jsx(qe,{value:P.id,children:P.name},P.id))]})]})]})]})]},I.id))}),s.jsxs(C,{onClick:S,disabled:D.length===0||!r.trim()||b,className:"w-full gap-2",size:"lg",children:[s.jsx(ve,{className:"w-4 h-4"}),b?"Generating...":"Generate Previews"]})]})]}),p.length>0&&s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsx("h3",{children:"Generated Previews"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Review and edit your content for each platform"})]}),s.jsx(ge,{className:"space-y-4",children:p.map(I=>{const P=N.find(z=>z.id===I.platform),R=j(I.platform,I.content);return s.jsxs(O,{className:"overflow-hidden",children:[s.jsx(Je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{platform:I.platform,className:"w-5 h-5"}),s.jsx("span",{children:P?.name})]}),R.isValid?s.jsxs(J,{variant:"outline",className:"bg-green-500/10 text-green-400 border-green-500/30",children:[s.jsx(He,{className:"w-3 h-3 mr-1"}),"Valid"]}):s.jsxs(J,{variant:"outline",className:"bg-red-500/10 text-red-400 border-red-500/30",children:[s.jsx($t,{className:"w-3 h-3 mr-1"}),"Issues"]})]})}),s.jsxs(ge,{className:"space-y-3",children:[s.jsx(kt,{value:I.content,onChange:z=>{f(p.map(U=>U.platform===I.platform?{...U,content:z.target.value}:U))},rows:4,className:"resize-none"}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsxs("span",{className:"text-muted-foreground",children:[I.content.length," / ",Pr[I.platform].maxLength]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>te(I.platform,I.content),children:[s.jsx(Js,{className:"w-3 h-3 mr-1"}),"Schedule"]}),s.jsx(C,{size:"sm",onClick:()=>q(I.platform,I.content),disabled:!R.isValid||publishingPlatforms.has(I.platform),children:publishingPlatforms.has(I.platform)?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-3 h-3 mr-1 animate-spin"}),"Posting..."]}):s.jsxs(s.Fragment,{children:[s.jsx(wd,{className:"w-3 h-3 mr-1"}),"Post Now"]})})]})]}),!R.isValid&&s.jsxs($e,{variant:"destructive",className:"mt-2",children:[s.jsx($t,{className:"w-4 h-4"}),s.jsx(Be,{children:s.jsx("ul",{className:"list-disc list-inside text-sm",children:R.issues.map((z,U)=>s.jsx("li",{children:z},U))})})]})]})]},I.platform)})})]})]})]})]})}function Nt({className:e,...t}){return s.jsx(np,{"data-slot":"avatar",className:G("relative flex size-10 shrink-0 overflow-hidden rounded-full",e),...t})}function Hs({className:e,...t}){return s.jsx(rp,{"data-slot":"avatar-image",className:G("aspect-square size-full",e),...t})}function St({className:e,...t}){return s.jsx(ap,{"data-slot":"avatar-fallback",className:G("bg-muted flex size-full items-center justify-center rounded-full",e),...t})}function Fg({inboxView:e,selectedPlatform:t}){const[n,r]=v.useState(null),[a,i]=v.useState(""),[o,l]=v.useState([]),c=o.length>0?o:[{id:"1",platform:"twitter",sender:"Sarah Chen",message:"Love this! Can you share more tips on content creation?",time:"5 min ago",isRead:!1,type:"comment"},{id:"2",platform:"instagram",sender:"Mike Johnson",message:"This is exactly what I needed to see today. Thank you!",time:"15 min ago",isRead:!1,type:"comment"},{id:"3",platform:"linkedin",sender:"Emily Rodriguez",message:"Great insights! Would love to collaborate on a project.",time:"1h ago",isRead:!0,type:"dm"},{id:"4",platform:"twitter",sender:"Alex Kim",message:"Mentioned you in a post about content marketing strategies!",time:"2h ago",isRead:!0,type:"mention"},{id:"5",platform:"instagram",sender:"Jordan Lee",message:"Your content always inspires me to create more!",time:"3h ago",isRead:!0,type:"comment"},{id:"6",platform:"facebook",sender:"Alex Martinez",message:"Can you create more content like this? It's amazing!",time:"4h ago",isRead:!1,type:"comment"},{id:"7",platform:"youtube",sender:"Taylor Swift",message:"Great video! Subscribed!",time:"5h ago",isRead:!0,type:"comment"},{id:"8",platform:"tiktok",sender:"Chris Evans",message:"This trend is fire! ",time:"6h ago",isRead:!1,type:"comment"},{id:"9",platform:"linkedin",sender:"Morgan Davis",message:"I'd love to connect and discuss potential opportunities.",time:"7h ago",isRead:!0,type:"dm"},{id:"10",platform:"pinterest",sender:"Jamie Parker",message:"Saved this to my inspiration board!",time:"8h ago",isRead:!0,type:"comment"}],d=v.useMemo(()=>{let h=c;switch(e){case"unread":h=h.filter(p=>!p.isRead);break;case"comments":h=h.filter(p=>p.type==="comment"||p.type==="mention");break;case"messages":h=h.filter(p=>p.type==="dm");break}return t!=="all"&&(h=h.filter(p=>p.platform.toLowerCase()===t)),h},[e,t]),m=h=>s.jsx(pe,{platform:h,className:"w-3 h-3"}),u=h=>{switch(h){case"comment":return"bg-blue-500/10 text-blue-500";case"dm":return"bg-purple-500/10 text-purple-500";case"mention":return"bg-green-500/10 text-green-500";default:return""}};return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(O,{className:"p-4",children:[s.jsx("div",{className:"mb-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(jn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Search messages...",className:"pl-10"})]})}),d.length>0?s.jsx("div",{className:"space-y-2",children:d.map(h=>s.jsx("button",{onClick:()=>r(h),className:`w-full p-3 rounded-lg border text-left transition-colors ${n?.id===h.id?"border-primary bg-primary/5":"border-border hover:bg-accent"} ${h.isRead?"":"bg-accent/50"}`,children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Nt,{className:"w-8 h-8",children:s.jsx(St,{children:h.sender.split(" ").map(p=>p[0]).join("")})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("span",{className:"truncate",children:h.sender}),!h.isRead&&s.jsx("div",{className:"w-2 h-2 bg-primary rounded-full"})]}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:h.message}),s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx(J,{variant:"outline",className:"px-1.5 py-0.5 h-5",children:m(h.platform)}),s.jsx("span",{className:"text-xs text-muted-foreground",children:h.time})]})]})]})},h.id))}):s.jsxs(O,{className:"p-8 text-center",children:[s.jsx("div",{className:"w-12 h-12 bg-muted rounded-full flex items-center justify-center mx-auto mb-3",children:s.jsx(jn,{className:"w-6 h-6 text-muted-foreground"})}),s.jsx("p",{className:"text-muted-foreground",children:"No messages found"})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:n?s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Nt,{className:"w-12 h-12",children:s.jsx(St,{children:n.sender.split(" ").map(h=>h[0]).join("")})}),s.jsxs("div",{children:[s.jsx("h3",{children:n.sender}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsxs(J,{variant:"outline",children:[m(n.platform),s.jsx("span",{className:"ml-1 capitalize",children:n.platform})]}),s.jsx(J,{className:u(n.type),children:n.type}),s.jsx("span",{className:"text-sm text-muted-foreground",children:n.time})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{variant:"ghost",size:"icon",children:s.jsx(_i,{className:"w-4 h-4"})}),s.jsx(C,{variant:"ghost",size:"icon",children:s.jsx(Wp,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"border-t pt-6",children:s.jsx("p",{children:n.message})}),s.jsxs("div",{className:"border-t pt-6 space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{children:"Reply"}),s.jsx(En,{onGenerate:h=>i(h),context:n.message,contextType:"reply",variant:"button",buttonText:"Generate Reply",autoGenerate:!0})]}),s.jsxs("div",{className:"relative",children:[s.jsx(kt,{placeholder:"Type your reply...",value:a,onChange:h=>i(h.target.value),className:"min-h-[120px] pr-12"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(En,{onGenerate:h=>i(h),context:n.message,contextType:"reply",placeholder:"e.g., 'Write a friendly and professional reply'",variant:"icon"})})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{className:"bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 shadow-lg shadow-blue-500/20",children:[s.jsx(qp,{className:"w-4 h-4 mr-2"}),"Send Reply"]}),s.jsxs(C,{variant:"outline",className:"border-pink-500/30 hover:bg-pink-500/10",children:[s.jsx(Ss,{className:"w-4 h-4 mr-2 text-pink-500"}),"Like"]})]})]})]})}):s.jsx(O,{className:"p-12 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(jn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsx("h3",{children:"Select a message"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Choose a message from the list to view and reply"})]})})})]})})}function Sn({className:e,...t}){return s.jsx(ip,{"data-slot":"checkbox",className:G("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(op,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:s.jsx(Xe,{className:"size-3.5"})})})}function Et({...e}){return s.jsx(hd,{"data-slot":"dialog",...e})}function Wd({...e}){return s.jsx(cp,{"data-slot":"dialog-trigger",...e})}function $g({...e}){return s.jsx(bd,{"data-slot":"dialog-portal",...e})}const qd=v.forwardRef(({className:e,...t},n)=>s.jsx(md,{ref:n,"data-slot":"dialog-overlay",className:G("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));qd.displayName="DialogOverlay";function Tt({className:e,children:t,...n}){return s.jsxs($g,{"data-slot":"dialog-portal",children:[s.jsx(qd,{}),s.jsxs(pd,{"data-slot":"dialog-content",className:G("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,s.jsxs(fd,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[s.jsx(Is,{}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function zt({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-header",className:G("flex flex-col gap-2 text-center sm:text-left",e),...t})}function vo({className:e,...t}){return s.jsx("div",{"data-slot":"dialog-footer",className:G("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Ut({className:e,...t}){return s.jsx(gd,{"data-slot":"dialog-title",className:G("text-lg leading-none font-semibold",e),...t})}function Ht({className:e,...t}){return s.jsx(xd,{"data-slot":"dialog-description",className:G("text-muted-foreground text-sm",e),...t})}function Ic({initialData:e,initialContent:t="",initialPlatform:n="twitter",initialTime:r="",initialDate:a=new Date,initialAttachments:i=[],initialCrossPostTo:o=[],onSave:l,onCancel:c,showActions:d=!0}){const m=e||{},u=m.content??t,h=m.platform??n,p=m.time??r,f=m.date??a,b=m.attachments??i,w=m.crossPostTo??o,g=x=>{if(!x)return"";const M=x.match(/(\d+):(\d+)\s*(AM|PM)/i);if(!M)return x;let[,X,le,Q]=M,Se=parseInt(X);return Q.toUpperCase()==="PM"&&Se!==12?Se+=12:Q.toUpperCase()==="AM"&&Se===12&&(Se=0),`${Se.toString().padStart(2,"0")}:${le}`},[N,E]=v.useState(u),[A,y]=v.useState(h),[j,_]=v.useState(g(p)),[T,k]=v.useState(f),[S,D]=v.useState(b),[F,q]=v.useState(w),[te,I]=v.useState(m.recurrence?.frequency||"none"),P=[{value:"twitter",label:"Twitter"},{value:"instagram",label:"Instagram"},{value:"linkedin",label:"LinkedIn"},{value:"facebook",label:"Facebook"},{value:"youtube",label:"YouTube"},{value:"tiktok",label:"TikTok"},{value:"pinterest",label:"Pinterest"},{value:"reddit",label:"Reddit"},{value:"blog",label:"Blog"}],R=()=>{const x=document.createElement("input");x.type="file",x.multiple=!0,x.accept="image/*,video/*,application/pdf,.doc,.docx,.txt",x.onchange=M=>{const X=M.target.files;if(X&&X.length>0){const le=Array.from(X).map(Q=>({name:Q.name,size:Q.size,type:Q.type}));D([...S,...le])}},x.click()},z=x=>{D(S.filter(M=>M.name!==x))},U=()=>{const x=["Just discovered an amazing productivity hack that's changed my workflow!  Who else struggles with time management?","Behind the scenes look at how we create content that resonates. The secret? Authenticity always wins. ","Hot take: The best content strategy is the one you can stick to consistently. Quality over quantity, every time. ","Sharing some insights from today's creative session. The process is just as important as the outcome! ","Quick reminder: Your progress doesn't have to be perfect. It just has to be real. Keep going! "],M=x[Math.floor(Math.random()*x.length)];E(M)},V=x=>{q(M=>M.includes(x)?M.filter(X=>X!==x):[...M,x])},ne=()=>{const x=P.map(X=>X.value).filter(X=>X!==A),M=x.every(X=>F.includes(X));q(M?[]:x)},re=()=>{l&&l({content:N,platform:A,time:(M=>{if(!M)return"";const[X,le]=M.split(":");let Q=parseInt(X);const Se=Q>=12?"PM":"AM";return Q>12&&(Q-=12),Q===0&&(Q=12),`${Q}:${le} ${Se}`})(j),date:T,attachments:S,crossPostTo:F,recurrence:{frequency:te}})},K=x=>{if(!x||isNaN(x.getTime())){const Q=new Date,Se=Q.getFullYear(),Y=String(Q.getMonth()+1).padStart(2,"0"),B=String(Q.getDate()).padStart(2,"0");return`${Se}-${Y}-${B}`}const M=x.getFullYear(),X=String(x.getMonth()+1).padStart(2,"0"),le=String(x.getDate()).padStart(2,"0");return`${M}-${X}-${le}`};return s.jsxs("div",{className:"space-y-6",children:[s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ee,{children:"Content"}),s.jsx(kt,{placeholder:"What do you want to share with your audience?",value:N,onChange:x=>E(x.target.value),className:"mt-2 min-h-[200px] resize-none"}),s.jsxs("div",{className:"flex items-center justify-between mt-2",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[N.length," characters"]}),s.jsxs(C,{variant:"ghost",size:"sm",onClick:U,className:"text-emerald-400 hover:text-emerald-300 hover:bg-emerald-500/10",children:[s.jsx(ve,{className:"w-4 h-4 mr-2"}),"Generate with AI"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ee,{children:"Platform"}),s.jsx("select",{value:A,onChange:x=>y(x.target.value),className:"mt-2 w-full h-10 px-3 rounded-md border border-border bg-background text-foreground",children:P.map(x=>s.jsx("option",{value:x.value,children:x.label},x.value))})]}),s.jsxs("div",{children:[s.jsx(ee,{children:"Scheduled Date"}),s.jsxs("div",{className:"mt-2 relative",children:[s.jsx(Ks,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{type:"date",value:K(T),onChange:x=>k(new Date(x.target.value)),className:"pl-10"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx(ee,{children:"Scheduled Time"}),s.jsxs("div",{className:"mt-2 relative",children:[s.jsx(Js,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{type:"time",value:j,onChange:x=>_(x.target.value),className:"pl-10"})]})]}),s.jsxs("div",{children:[s.jsx(ee,{children:"Recurrence"}),s.jsxs("select",{value:te,onChange:x=>I(x.target.value),className:"mt-2 w-full h-10 px-3 rounded-md border border-border bg-background text-foreground",children:[s.jsx("option",{value:"none",children:"Does not repeat"}),s.jsx("option",{value:"daily",children:"Repeats daily"}),s.jsx("option",{value:"weekly",children:"Repeats weekly"}),s.jsx("option",{value:"monthly",children:"Repeats monthly"})]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ee,{children:"Cross-post to Other Platforms"}),s.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[s.jsx(Sn,{checked:P.filter(x=>x.value!==A).every(x=>F.includes(x.value)),onCheckedChange:ne}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Select All"})]})]}),s.jsx("div",{className:"grid grid-cols-2 gap-2 p-3 border border-border rounded-lg bg-muted/20",children:P.filter(x=>x.value!==A).map(x=>s.jsxs("label",{className:"flex items-center gap-2 p-2 rounded hover:bg-muted/50 cursor-pointer transition-colors",children:[s.jsx(Sn,{checked:F.includes(x.value),onCheckedChange:()=>V(x.value)}),s.jsx(pe,{platform:x.value,className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:x.label})]},x.value))}),F.length>0&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["This post will be automatically published to ",F.length," additional platform",F.length>1?"s":""]})]}),s.jsx("div",{children:s.jsxs(C,{variant:"outline",size:"sm",onClick:R,className:"hover:bg-emerald-500/5 hover:border-emerald-500/30",children:[s.jsx(_n,{className:"w-4 h-4 mr-2"}),"Add Files"]})}),S.length>0&&s.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[s.jsxs(ee,{children:["Attachments (",S.length,")"]}),S.map((x,M)=>s.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/30 rounded-lg border border-border/50",children:[s.jsx(_n,{className:"w-4 h-4 text-emerald-400"}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm truncate",children:x.name}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[(x.size/1024).toFixed(1),"KB"]})]}),s.jsx("button",{onClick:()=>z(x.name),className:"p-1 hover:bg-destructive/10 rounded transition-colors",title:"Remove attachment",children:s.jsx(Is,{className:"w-4 h-4 text-muted-foreground hover:text-destructive"})})]},M))]})]})}),d&&s.jsxs("div",{className:"flex gap-3 justify-end",children:[s.jsx(C,{variant:"outline",onClick:c,className:"min-w-[120px]",children:"Cancel"}),s.jsx(C,{onClick:re,className:"min-w-[120px] bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 shadow-lg shadow-emerald-500/20",children:"Save Changes"})]})]})}function Bg({currentDate:e,selectedDate:t,postsForDate:n,onDateSelect:r}){const a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],i=d=>{const m=d.getFullYear(),u=d.getMonth(),h=new Date(m,u,1),f=new Date(m,u+1,0).getDate(),b=h.getDay();return{daysInMonth:f,startingDayOfWeek:b}},{daysInMonth:o,startingDayOfWeek:l}=i(e),c=[];for(let d=0;d<l;d++)c.push(null);for(let d=1;d<=o;d++)c.push(d);return s.jsxs("div",{className:"grid grid-cols-7 gap-2",children:[a.map(d=>s.jsx("div",{className:"text-center pb-2 border-b border-border",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:d})},d)),c.map((d,m)=>{if(d===null)return s.jsx("div",{className:"min-h-[140px]"},`empty-${m}`);const u=new Date(e.getFullYear(),e.getMonth(),d),h=n(u),p=u.toDateString()===new Date().toDateString(),f=t?.toDateString()===u.toDateString();return s.jsxs("div",{className:`min-h-[140px] p-2 border border-border rounded-lg cursor-pointer transition-all hover:border-emerald-500/30 hover:bg-emerald-500/5 ${f?"border-emerald-500 bg-emerald-500/10":""} ${p?"border-emerald-500/50 bg-emerald-500/5":""}`,onClick:()=>r(u),children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:`text-sm ${p?"text-emerald-400":"text-foreground"}`,children:d}),h.length>0&&s.jsx(J,{variant:"outline",className:"text-xs h-5 bg-emerald-500/10 text-emerald-400 border-emerald-500/30",children:h.length})]}),s.jsxs("div",{className:"space-y-1.5",children:[h.slice(0,4).map(b=>s.jsxs("div",{className:"flex items-center gap-1.5 p-1.5 rounded bg-card/50 border border-border/50",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(pe,{platform:b.platform,className:"w-3.5 h-3.5",size:14})}),s.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-1",children:[s.jsx("p",{className:"text-xs truncate text-muted-foreground",children:b.time}),b.recurrence&&b.recurrence.frequency&&b.recurrence.frequency!=="none"&&s.jsx(ns,{className:"w-2.5 h-2.5 text-emerald-400 flex-shrink-0"}),b.isAiGenerated&&s.jsx(ve,{className:"w-2.5 h-2.5 text-purple-400 flex-shrink-0"}),b.attachments&&b.attachments.length>0&&s.jsx(_n,{className:"w-2.5 h-2.5 text-emerald-400 flex-shrink-0"})]})]},b.id)),h.length>4&&s.jsxs("div",{className:"text-xs text-center text-emerald-400 pt-0.5",children:["+",h.length-4]})]})]},d)})]})}function zg({currentDate:e,selectedDate:t,postsForDate:n,onDateSelect:r}){const a=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],o=(l=>{const c=new Date(l);c.setDate(l.getDate()-l.getDay());const d=[];for(let m=0;m<7;m++){const u=new Date(c);u.setDate(c.getDate()+m),d.push(u)}return d})(e);return s.jsx("div",{className:"grid grid-cols-7 gap-3",children:o.map((l,c)=>{const d=n(l),m=l.toDateString()===new Date().toDateString(),u=t?.toDateString()===l.toDateString();return s.jsxs("div",{className:`border border-border rounded-lg p-3 cursor-pointer transition-all hover:border-emerald-500/30 hover:bg-emerald-500/5 ${u?"border-emerald-500 bg-emerald-500/10":""} ${m?"border-emerald-500/50 bg-emerald-500/5":""}`,onClick:()=>r(l),children:[s.jsxs("div",{className:"text-center mb-3 pb-3 border-b border-border",children:[s.jsx("div",{className:"text-sm text-muted-foreground",children:a[c]}),s.jsx("div",{className:`text-lg ${m?"text-emerald-400":"text-foreground"}`,children:l.getDate()})]}),s.jsxs("div",{className:"space-y-2",children:[d.map(h=>s.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-card/50 border border-border/50",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(pe,{platform:h.platform,className:"w-4 h-4",size:16})}),s.jsxs("div",{className:"flex-1 min-w-0 flex items-center gap-1",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:h.time}),h.recurrence&&h.recurrence.frequency&&h.recurrence.frequency!=="none"&&s.jsx(ns,{className:"w-3 h-3 text-emerald-400 flex-shrink-0"}),h.isAiGenerated&&s.jsx(ve,{className:"w-3 h-3 text-purple-400 flex-shrink-0"}),h.attachments&&h.attachments.length>0&&s.jsx(_n,{className:"w-3 h-3 text-emerald-400 flex-shrink-0"}),h.crossPostTo&&h.crossPostTo.length>0&&s.jsx(Us,{className:"w-3 h-3 text-cyan-400 flex-shrink-0"})]})]},h.id)),d.length===0&&s.jsx("div",{className:"text-xs text-center text-muted-foreground py-4",children:"No posts"})]})]},c)})})}function Ug({post:e,onEdit:t,onDelete:n,onRemoveAttachment:r}){const a=o=>{switch(o){case"scheduled":return"bg-green-500/10 text-green-500 border-green-500/30";case"published":return"bg-gray-500/10 text-gray-500 border-gray-500/30";case"draft":return"bg-yellow-500/10 text-yellow-500 border-yellow-500/30";case"failed":return"bg-red-500/10 text-red-500 border-red-500/30";default:return""}},i=o=>o<1024?o+" B":o<1048576?(o/1024).toFixed(1)+" KB":(o/1048576).toFixed(1)+" MB";return s.jsxs("div",{className:"p-4 border border-border rounded-lg hover:border-emerald-500/30 transition-colors",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(pe,{platform:e.platform,className:"w-5 h-5",size:20})}),s.jsx(J,{variant:"outline",className:"capitalize",children:e.platform}),s.jsx(J,{className:a(e.status),children:e.status}),e.isAiGenerated&&s.jsxs(J,{className:"bg-purple-500/10 text-purple-400 border-purple-500/30",children:[s.jsx(ve,{className:"w-3 h-3 mr-1"}),"AI"]})]}),s.jsx("p",{className:"text-sm mb-3",children:e.content}),e.attachments&&e.attachments.length>0&&s.jsx("div",{className:"mb-3 space-y-2",children:e.attachments.map((o,l)=>s.jsxs("div",{className:"flex items-center justify-between p-2 bg-muted/30 border border-border/50 rounded text-xs",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(_n,{className:"w-3 h-3 text-emerald-400 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:o.name}),s.jsxs("span",{className:"text-muted-foreground flex-shrink-0",children:["(",i(o.size),")"]})]}),r&&s.jsx(C,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 hover:bg-red-500/10 hover:text-red-400",onClick:()=>r(e.id,o.name),children:s.jsx(Is,{className:"w-3 h-3"})})]},l))}),e.crossPostTo&&e.crossPostTo.length>0&&s.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[s.jsx(Us,{className:"w-3 h-3 text-cyan-400"}),s.jsx("span",{className:"text-xs text-muted-foreground",children:"Cross-posting to:"}),s.jsx("div",{className:"flex gap-1",children:e.crossPostTo.map(o=>s.jsx(pe,{platform:o,className:"w-3.5 h-3.5",size:14},o))})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{variant:"outline",size:"sm",onClick:()=>t(e),className:"flex-1 hover:bg-emerald-500/10 hover:border-emerald-500/30",children:"Edit"}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>n(e.id),className:"hover:bg-red-500/10 hover:border-red-500/30 hover:text-red-400",children:s.jsx(Xt,{className:"w-4 h-4"})})]})]})}function Hg({selectedDate:e,posts:t,onEditPost:n,onDeletePost:r,onRemoveAttachment:a}){return s.jsxs(O,{className:"p-6",children:[s.jsx("h3",{className:"mb-4",children:e?.toLocaleDateString("en-US",{month:"long",day:"numeric"})}),t.length>0?s.jsx("div",{className:"space-y-3",children:t.map(i=>s.jsx(Ug,{post:i,onEdit:n,onDelete:r,onRemoveAttachment:a},i.id))}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("p",{className:"text-muted-foreground text-sm",children:"No posts scheduled for this day"}),s.jsx("p",{className:"text-muted-foreground text-xs mt-1",children:'Click "Schedule Post" to add content'})]})]})}function Wg({...e}){return s.jsx(lp,{"data-slot":"alert-dialog",...e})}function qg({...e}){return s.jsx(fp,{"data-slot":"alert-dialog-portal",...e})}const Gd=v.forwardRef(({className:e,...t},n)=>s.jsx(yd,{ref:n,"data-slot":"alert-dialog-overlay",className:G("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));Gd.displayName=yd.displayName;function Gg({className:e,...t}){return s.jsxs(qg,{children:[s.jsx(Gd,{}),s.jsx(dp,{"data-slot":"alert-dialog-content",className:G("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...t})]})}function Yg({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-header",className:G("flex flex-col gap-2 text-center sm:text-left",e),...t})}function Vg({className:e,...t}){return s.jsx("div",{"data-slot":"alert-dialog-footer",className:G("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",e),...t})}function Kg({className:e,...t}){return s.jsx(up,{"data-slot":"alert-dialog-title",className:G("text-lg font-semibold",e),...t})}function Jg({className:e,...t}){return s.jsx(mp,{"data-slot":"alert-dialog-description",className:G("text-muted-foreground text-sm",e),...t})}function Xg({className:e,...t}){return s.jsx(pp,{className:G(bo(),e),...t})}function Qg({className:e,...t}){return s.jsx(hp,{className:G(bo({variant:"outline"}),e),...t})}function gr({open:e,onOpenChange:t,title:n,description:r,confirmText:a="Continue",cancelText:i="Cancel",onConfirm:o,variant:l="default"}){const c=()=>{o(),t(!1)};return s.jsx(Wg,{open:e,onOpenChange:t,children:s.jsxs(Gg,{children:[s.jsxs(Yg,{children:[s.jsx(Kg,{children:n}),s.jsx(Jg,{children:r})]}),s.jsxs(Vg,{children:[s.jsx(Qg,{children:i}),s.jsx(Xg,{onClick:c,className:l==="destructive"?"bg-destructive text-destructive-foreground hover:bg-destructive/90":"",children:a})]})]})})}function Zg({selectedPlatform:e="all"}){const[t,n]=v.useState(new Date),[r,a]=v.useState(new Date),[i,o]=v.useState("month"),[l,c]=v.useState(["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit","blog"]),[d,m]=v.useState(["draft","scheduled","published"]),[u,h]=v.useState(!0),[p,f]=v.useState(null),[b,w]=v.useState(!1),[g,N]=v.useState(!1),[E,A]=v.useState(!1),[y,j]=v.useState(null),[_,T]=v.useState(!0),[k,S]=v.useState(!1),[D,F]=v.useState([]),{currentProject:q}=At();v.useEffect(()=>{q&&te()},[q?.id]);const te=async()=>{if(q)try{T(!0);const{posts:L}=await js.getAll({projectId:q.id}),oe=L.map(fe=>{const Ce=fe.scheduledFor?new Date(fe.scheduledFor):fe.publishedAt?new Date(fe.publishedAt):new Date,Ie=Ce.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{id:fe.id,date:Ce,time:Ie,platform:fe.platforms[0],content:fe.content,status:fe.status,attachments:fe.attachments,crossPostTo:fe.platforms.slice(1),recurrence:fe.recurrence}});F(oe)}catch(L){console.error("Failed to load posts:",L),$.error("Failed to load posts from server")}finally{T(!1)}},I=[{value:"twitter",label:"Twitter"},{value:"instagram",label:"Instagram"},{value:"linkedin",label:"LinkedIn"},{value:"facebook",label:"Facebook"},{value:"youtube",label:"YouTube"},{value:"tiktok",label:"TikTok"},{value:"pinterest",label:"Pinterest"},{value:"reddit",label:"Reddit"},{value:"blog",label:"Blog"}],P=()=>{const L=["twitter","instagram","linkedin","youtube","tiktok","blog"],oe={twitter:["Tech Tips thread: 10 productivity hacks","Quick update on industry trends","Behind the scenes of our workflow"],instagram:["Carousel: 5 design principles","Reel: Day in the life","Story highlights compilation"],linkedin:["Article: Future of remote work","Industry insights and analysis","Professional development tips"],youtube:["Tutorial: Complete beginner's guide","How-to video: Advanced techniques","Q&A session recording"],tiktok:["Quick tip: 30-second productivity hack","Trending challenge participation","Educational short clip"],blog:["Long-form: Comprehensive guide to content strategy","In-depth analysis of market trends","Step-by-step tutorial series"]},fe=["9:00 AM","11:00 AM","2:00 PM","4:00 PM","6:00 PM"],Ce=[];let Ie=D.length+1;for(let de=1;de<=10;de++){const Ee=new Date;Ee.setDate(Ee.getDate()+de);const se=Math.floor(Math.random()*2)+2,_e=[...L].sort(()=>Math.random()-.5);for(let ue=0;ue<se;ue++){const Wt=_e[ue],Os=oe[Wt]||["AI-generated content"],Ga=Os[Math.floor(Math.random()*Os.length)],Tr=fe[Math.floor(Math.random()*fe.length)];Ce.push({id:`ai-${Ie++}`,date:new Date(Ee),time:Tr,platform:Wt,content:Ga,status:"scheduled",isAiGenerated:!0})}}F([...D,...Ce])},R=()=>{F(D.filter(L=>!L.isAiGenerated))},z=L=>{c(oe=>oe.includes(L)?oe.filter(fe=>fe!==L):[...oe,L])},U=L=>{f(L),w(!0)},V=async L=>{if(p)try{S(!0);const oe=new Date(L.date);if(isNaN(oe.getTime()))throw new Error("Invalid date provided");const[fe,Ce]=L.time.split(" ");if(!fe||!Ce)throw new Error("Invalid time format");const[Ie,de]=fe.split(":").map(Number);if(isNaN(Ie)||isNaN(de))throw new Error("Invalid time values");let Ee=Ie;Ce==="PM"&&Ee!==12&&(Ee+=12),Ce==="AM"&&Ee===12&&(Ee=0),oe.setHours(Ee,de,0,0);const se=[L.platform,...L.crossPostTo||[]];await js.update(p.id,{platforms:se,content:L.content,scheduledFor:oe.toISOString(),attachments:L.attachments}),F(_e=>_e.map(ue=>ue.id===p.id?{...ue,content:L.content,platform:L.platform,time:L.time,date:L.date,attachments:L.attachments,crossPostTo:L.crossPostTo}:ue)),$.success("Post updated successfully"),w(!1),f(null)}catch(oe){console.error("Failed to update post:",oe),$.error("Failed to update post",{description:oe.message||"Please try again"})}finally{S(!1)}},ne=L=>{const oe=D.find(fe=>fe.id===L);oe&&(j(oe),A(!0))},re=async()=>{if(y)try{S(!0),await js.delete(y.id),F(L=>L.filter(oe=>oe.id!==y.id)),$.success("Post deleted successfully")}catch(L){console.error("Failed to delete post:",L),$.error("Failed to delete post",{description:L.message||"Please try again"})}finally{S(!1)}j(null)},K=async L=>{try{S(!0);const oe=new Date(L.date);if(isNaN(oe.getTime()))throw new Error("Invalid date provided");const[fe,Ce]=L.time.split(" ");if(!fe||!Ce)throw new Error("Invalid time format");const[Ie,de]=fe.split(":").map(Number);if(isNaN(Ie)||isNaN(de))throw new Error("Invalid time values");let Ee=Ie;Ce==="PM"&&Ee!==12&&(Ee+=12),Ce==="AM"&&Ee===12&&(Ee=0),oe.setHours(Ee,de,0,0);const se=[L.platform,...L.crossPostTo||[]],{post:_e}=await js.create({projectId:q.id,platforms:se,content:L.content,status:"scheduled",scheduledFor:oe.toISOString(),attachments:L.attachments,recurrence:L.recurrence}),ue={id:_e.id,content:L.content,platform:L.platform,time:L.time,date:L.date,status:"scheduled",attachments:L.attachments,crossPostTo:L.crossPostTo,recurrence:L.recurrence};F([...D,ue]),$.success("Post scheduled successfully"),N(!1)}catch(oe){console.error("Failed to create post:",oe),$.error("Failed to schedule post",{description:oe.message||"Please try again"})}finally{S(!1)}},x=(L,oe)=>{F(fe=>fe.map(Ce=>Ce.id===L?{...Ce,attachments:Ce.attachments?.filter(Ie=>Ie.name!==oe)}:Ce))},M=L=>{m(oe=>oe.includes(L)?oe.filter(fe=>fe!==L):[...oe,L])},X=D.filter(L=>{const oe=e==="all"||L.platform===e,fe=l.includes(L.platform),Ce=d.includes(L.status),Ie=u||!L.isAiGenerated;return oe&&fe&&Ce&&Ie}),le=L=>X.filter(oe=>oe.date.toDateString()===L.toDateString()),Q=()=>{const L=new Date(t);L.setDate(t.getDate()-1),n(L),a(L)},Se=()=>{const L=new Date(t);L.setDate(t.getDate()+1),n(L),a(L)},Y=()=>{if(i==="month")n(new Date(t.getFullYear(),t.getMonth()-1,1));else{const L=new Date(t);L.setDate(t.getDate()-7),n(L)}},B=()=>{if(i==="month")n(new Date(t.getFullYear(),t.getMonth()+1,1));else{const L=new Date(t);L.setDate(t.getDate()+7),n(L)}},ft=()=>{n(new Date),a(new Date)},Ms=L=>{const oe=new Date(L);return oe.setDate(L.getDate()-L.getDay()),[oe]},dt=r?le(r):[];return _?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx(Pe,{className:"w-8 h-8 animate-spin text-emerald-500 mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading your content calendar..."})]})}):s.jsxs("div",{className:"space-y-6",children:[!q&&s.jsxs(Alert,{className:"border-yellow-500/30 bg-yellow-500/10",children:[s.jsx($t,{className:"w-4 h-4 text-yellow-400"}),s.jsx(AlertDescription,{className:"text-yellow-400",children:"No project selected. Please select a project from the sidebar to view your calendar."})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h2",{className:"text-emerald-400",children:"Content Calendar"}),k&&s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(Pe,{className:"w-3 h-3 animate-spin"}),"Saving..."]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(C,{onClick:te,variant:"outline",size:"sm",className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),"Refresh"]}),s.jsxs(C,{onClick:P,size:"sm",className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 shadow-lg shadow-purple-500/20",children:[s.jsx(ve,{className:"w-4 h-4 mr-2"}),"AI Enhancement"]}),s.jsxs(C,{onClick:R,variant:"outline",size:"sm",className:"border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-500/50",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Clear AI"]}),s.jsxs(C,{onClick:()=>N(!0),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 shadow-lg shadow-emerald-500/20",children:[s.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Schedule Post"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("h3",{className:"text-emerald-400",children:i==="month"?t.toLocaleDateString("en-US",{month:"long",year:"numeric"}):`Week of ${Ms(t)[0].toLocaleDateString("en-US",{month:"short",day:"numeric"})}`}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"flex gap-1 mr-2 bg-muted/30 rounded-lg p-1",children:[s.jsx(C,{variant:i==="month"?"default":"ghost",size:"sm",onClick:()=>o("month"),className:i==="month"?"bg-emerald-500 hover:bg-emerald-600":"",children:s.jsx(Gp,{className:"w-4 h-4"})}),s.jsx(C,{variant:i==="week"?"default":"ghost",size:"sm",onClick:()=>o("week"),className:i==="week"?"bg-emerald-500 hover:bg-emerald-600":"",children:s.jsx(Yp,{className:"w-4 h-4"})})]}),s.jsx(C,{variant:"outline",size:"sm",onClick:Y,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",title:i==="month"?"Previous month":"Previous week",children:s.jsx(Vp,{className:"w-4 h-4"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:Q,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",title:"Previous day",children:s.jsx(Kn,{className:"w-4 h-4"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:ft,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",children:"Today"}),s.jsx(C,{variant:"outline",size:"sm",onClick:Se,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",title:"Next day",children:s.jsx(Gr,{className:"w-4 h-4"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:B,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",title:i==="month"?"Next month":"Next week",children:s.jsx(Kp,{className:"w-4 h-4"})})]})]}),i==="month"?s.jsx(Bg,{currentDate:t,selectedDate:r,postsForDate:le,onDateSelect:a}):s.jsx(zg,{currentDate:t,selectedDate:r,postsForDate:le,onDateSelect:a})]})}),s.jsxs("div",{className:"space-y-6",children:[s.jsx(Hg,{selectedDate:r,posts:dt,onEditPost:U,onDeletePost:ne,onRemoveAttachment:x}),s.jsxs(O,{className:"p-6",children:[s.jsx("h3",{className:"mb-4",children:"Filters"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm mb-3 text-muted-foreground",children:"Status"}),s.jsx("div",{className:"space-y-2",children:[{value:"draft",label:"Draft",color:"text-gray-400"},{value:"scheduled",label:"Scheduled",color:"text-blue-400"},{value:"published",label:"Published",color:"text-green-400"}].map(L=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{id:`status-${L.value}`,checked:d.includes(L.value),onCheckedChange:()=>M(L.value)}),s.jsx("label",{htmlFor:`status-${L.value}`,className:`text-sm cursor-pointer select-none ${L.color}`,children:L.label})]},L.value))})]}),s.jsxs("div",{className:"pt-2 border-t border-border",children:[s.jsx("p",{className:"text-sm mb-3 text-muted-foreground",children:"Platforms"}),s.jsx("div",{className:"space-y-2",children:I.map(L=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{id:L.value,checked:l.includes(L.value),onCheckedChange:()=>z(L.value)}),s.jsx("label",{htmlFor:L.value,className:"text-sm cursor-pointer select-none",children:L.label})]},L.value))})]}),s.jsx("div",{className:"pt-2 border-t border-border",children:s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Sn,{id:"show-ai",checked:u,onCheckedChange:L=>h(L)}),s.jsx("label",{htmlFor:"show-ai",className:"text-sm cursor-pointer select-none",children:"Show AI-generated posts"})]})}),s.jsx("div",{className:"pt-4 border-t border-border",children:s.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Total posts:"}),s.jsx("span",{className:"text-foreground",children:D.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Filtered:"}),s.jsx("span",{className:"text-foreground",children:X.length})]})]})})]})]})]})]}),s.jsx(Et,{open:b,onOpenChange:w,children:s.jsxs(Tt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(zt,{className:"sr-only",children:[s.jsx(Ut,{children:"Edit Post"}),s.jsx(Ht,{children:"Edit your scheduled post"})]}),p&&s.jsx(Ic,{initialData:{content:p.content,platform:p.platform,time:p.time,date:p.date,attachments:p.attachments||[],crossPostTo:p.crossPostTo},onSave:V,onCancel:()=>{w(!1),f(null)}})]})}),s.jsx(Et,{open:g,onOpenChange:N,children:s.jsxs(Tt,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(zt,{className:"sr-only",children:[s.jsx(Ut,{children:"Create Post"}),s.jsx(Ht,{children:"Create a new scheduled post"})]}),s.jsx(Ic,{initialData:{content:"",platform:"twitter",time:"9:00 AM",date:r||new Date,attachments:[]},onSave:K,onCancel:()=>N(!1)})]})}),s.jsx(gr,{open:E,onOpenChange:A,title:"Delete scheduled post?",description:y?`Are you sure you want to delete this ${y.status} post for ${y.platform}? This action cannot be undone.`:"Are you sure you want to delete this post? This action cannot be undone.",confirmText:"Delete",onConfirm:re,variant:"destructive"})]})}function ex({selectedPlatform:e}){const t={all:"ALL",twitter:"Twitter",instagram:"Instagram",linkedin:"LinkedIn",facebook:"Facebook",youtube:"YouTube",tiktok:"TikTok",pinterest:"Pinterest",reddit:"Reddit",blog:"Blog"},n={all:[{title:"Best Performing Type",value:"Video Content",change:22,trend:"up"},{title:"Avg. Engagement Rate",value:"6.5%",change:14,trend:"up"},{title:"Overall Reach",value:"2.4M",change:18,trend:"up"},{title:"Top Content Theme",value:"Educational",change:20,trend:"up"}],twitter:[{title:"Best Performing Type",value:"Threads",change:12,trend:"up"},{title:"Avg. Engagement Rate",value:"4.2%",change:8,trend:"up"},{title:"Optimal Post Length",value:"280 chars",change:0,trend:"up"},{title:"Top Content Theme",value:"Tech Tips",change:15,trend:"up"}],instagram:[{title:"Best Performing Type",value:"Reels",change:25,trend:"up"},{title:"Avg. Engagement Rate",value:"6.8%",change:12,trend:"up"},{title:"Optimal Format",value:"Carousel",change:10,trend:"up"},{title:"Top Content Theme",value:"Lifestyle",change:18,trend:"up"}],linkedin:[{title:"Best Performing Type",value:"Articles",change:20,trend:"up"},{title:"Avg. Engagement Rate",value:"3.5%",change:5,trend:"up"},{title:"Optimal Post Length",value:"1200 words",change:0,trend:"up"},{title:"Top Content Theme",value:"Industry News",change:22,trend:"up"}],facebook:[{title:"Best Performing Type",value:"Video",change:15,trend:"up"},{title:"Avg. Engagement Rate",value:"5.1%",change:7,trend:"up"},{title:"Optimal Format",value:"Native Video",change:12,trend:"up"},{title:"Top Content Theme",value:"Community",change:14,trend:"up"}],youtube:[{title:"Best Performing Type",value:"Tutorials",change:30,trend:"up"},{title:"Avg. Engagement Rate",value:"8.9%",change:20,trend:"up"},{title:"Optimal Length",value:"12 minutes",change:0,trend:"up"},{title:"Top Content Theme",value:"How-To",change:25,trend:"up"}],tiktok:[{title:"Best Performing Type",value:"Short Clips",change:50,trend:"up"},{title:"Avg. Engagement Rate",value:"12.5%",change:35,trend:"up"},{title:"Optimal Length",value:"15-30 sec",change:0,trend:"up"},{title:"Top Content Theme",value:"Trends",change:40,trend:"up"}],pinterest:[{title:"Best Performing Type",value:"Infographics",change:28,trend:"up"},{title:"Avg. Engagement Rate",value:"5.6%",change:15,trend:"up"},{title:"Optimal Format",value:"Vertical",change:0,trend:"up"},{title:"Top Content Theme",value:"DIY & Crafts",change:22,trend:"up"}],reddit:[{title:"Best Performing Type",value:"Discussions",change:18,trend:"up"},{title:"Avg. Engagement Rate",value:"7.2%",change:10,trend:"up"},{title:"Optimal Post Type",value:"Text Posts",change:0,trend:"up"},{title:"Top Content Theme",value:"Q&A",change:16,trend:"up"}],blog:[{title:"Best Performing Type",value:"Long-Form",change:32,trend:"up"},{title:"Avg. Reading Time",value:"8 min",change:12,trend:"up"},{title:"Optimal Length",value:"2000+ words",change:0,trend:"up"},{title:"Top Content Theme",value:"Tutorials",change:28,trend:"up"}]},r={all:{bestTimes:["9:00 AM","1:00 PM","7:00 PM"],bestDays:["Tuesday","Wednesday","Friday"],peakEngagement:"Wednesday at 1:00 PM"},twitter:{bestTimes:["9:00 AM","12:00 PM","5:00 PM"],bestDays:["Tuesday","Wednesday","Thursday"],peakEngagement:"Wednesday at 12:00 PM"},instagram:{bestTimes:["11:00 AM","2:00 PM","7:00 PM"],bestDays:["Monday","Wednesday","Friday"],peakEngagement:"Friday at 7:00 PM"},linkedin:{bestTimes:["8:00 AM","12:00 PM","5:00 PM"],bestDays:["Tuesday","Wednesday","Thursday"],peakEngagement:"Tuesday at 8:00 AM"},facebook:{bestTimes:["1:00 PM","3:00 PM","8:00 PM"],bestDays:["Wednesday","Thursday","Sunday"],peakEngagement:"Sunday at 8:00 PM"},youtube:{bestTimes:["2:00 PM","6:00 PM","9:00 PM"],bestDays:["Friday","Saturday","Sunday"],peakEngagement:"Saturday at 6:00 PM"},tiktok:{bestTimes:["7:00 AM","4:00 PM","9:00 PM"],bestDays:["Tuesday","Thursday","Friday"],peakEngagement:"Friday at 9:00 PM"},pinterest:{bestTimes:["8:00 PM","9:00 PM","11:00 PM"],bestDays:["Saturday","Sunday","Monday"],peakEngagement:"Saturday at 9:00 PM"},reddit:{bestTimes:["6:00 AM","12:00 PM","9:00 PM"],bestDays:["Monday","Tuesday","Wednesday"],peakEngagement:"Monday at 9:00 PM"},blog:{bestTimes:["7:00 AM","1:00 PM","8:00 PM"],bestDays:["Tuesday","Wednesday","Thursday"],peakEngagement:"Tuesday at 7:00 AM"}},a={all:{trending:["#ContentCreation","#DigitalMarketing","#SocialMedia","#CreatorEconomy","#Innovation"],recommended:["#ContentStrategy","#GrowthHacking","#Engagement","#CreatorLife","#BuildInPublic"],topPerforming:["#Tutorial","#Tips","#HowTo","#BehindTheScenes","#DailyPost"]},twitter:{trending:["#AI","#Tech","#Innovation","#Startup","#Future"],recommended:["#ContentCreator","#DigitalMarketing","#SocialMedia","#Growth","#Engagement"],topPerforming:["#TechTips","#CodeNewbie","#WebDev","#Programming","#BuildInPublic"]},instagram:{trending:["#InstaDaily","#PhotoOfTheDay","#InstaGood","#Love","#Instagood"],recommended:["#CreatorLife","#ContentStrategy","#IGReels","#InstaGrowth","#Influencer"],topPerforming:["#LifestyleBlogger","#TravelGram","#FitnessMotivation","#Foodie","#OOTD"]},linkedin:{trending:["#LinkedInTips","#CareerGrowth","#Leadership","#Innovation","#FutureOfWork"],recommended:["#ProfessionalDevelopment","#B2B","#Marketing","#Sales","#Networking"],topPerforming:["#ThoughtLeadership","#IndustryInsights","#BusinessStrategy","#CareerAdvice","#Hiring"]},facebook:{trending:["#Motivation","#Family","#Community","#Life","#Blessed"],recommended:["#SmallBusiness","#LocalBusiness","#Support","#Shopping","#Community"],topPerforming:["#MondayMotivation","#ThrowbackThursday","#FridayFeeling","#WeekendVibes","#SundayFunday"]},youtube:{trending:["#Shorts","#Tutorial","#HowTo","#Review","#Vlog"],recommended:["#YouTuber","#Subscribe","#ContentCreator","#NewVideo","#Trending"],topPerforming:["#TechReview","#Gaming","#DIY","#Cooking","#Fitness"]},tiktok:{trending:["#FYP","#ForYou","#Viral","#Trending","#Challenge"],recommended:["#TikTokMadeMeBuyIt","#LearnOnTikTok","#TikTokTutorial","#LifeHack","#DuetThis"],topPerforming:["#Dance","#Comedy","#DIY","#Recipe","#MakeupTutorial"]},pinterest:{trending:["#PinterestInspired","#DIYProjects","#HomeDecor","#Recipe","#Fashion"],recommended:["#PinterestTips","#InspirationalQuotes","#DIYIdeas","#WeddingIdeas","#Crafts"],topPerforming:["#InteriorDesign","#GardenIdeas","#HealthyRecipes","#BeautyTips","#OutfitIdeas"]},reddit:{trending:["r/AskReddit","r/todayilearned","r/explainlikeimfive","r/news","r/technology"],recommended:["r/entrepreneur","r/smallbusiness","r/marketing","r/socialmedia","r/content"],topPerforming:["r/IAmA","r/LifeProTips","r/Showerthoughts","r/Futurology","r/dataisbeautiful"]},blog:{trending:["#Blogging","#ContentCreation","#Writing","#SEO","#WordPress"],recommended:["#BloggingTips","#ContentMarketing","#Blogger","#WritingCommunity","#BlogPost"],topPerforming:["#Tutorial","#HowTo","#Guide","#TechBlog","#DigitalMarketing"]}},i={all:{topics:[{name:"AI & Technology",growth:58},{name:"Video Content",growth:52},{name:"Sustainability",growth:45},{name:"Creator Economy",growth:40}],competitors:["Top Creator Network","Multi-Platform Influencer","Content Pro"],opportunities:["Cross-platform campaigns","Video-first strategy","Community engagement across channels"]},twitter:{topics:[{name:"AI & Machine Learning",growth:45},{name:"Climate Tech",growth:38},{name:"Web3 & Crypto",growth:25},{name:"Remote Work",growth:20}],competitors:["@TechInfluencer","@CodeMaster","@DevCommunity"],opportunities:["Live Spaces about AI","Twitter Threads on Tech News","Poll-based engagement"]},instagram:{topics:[{name:"Sustainability",growth:52},{name:"Wellness",growth:41},{name:"Home Decor",growth:35},{name:"Food Photography",growth:28}],competitors:["@lifestyle_guru","@wellness_daily","@home_inspo"],opportunities:["Reels with trending audio","Carousel posts with tips","Story polls and quizzes"]},linkedin:{topics:[{name:"Remote Work Culture",growth:48},{name:"AI in Business",growth:55},{name:"Leadership Development",growth:32},{name:"DEI Initiatives",growth:30}],competitors:["Industry Leader Co.","Thought Leader Inc.","Business Insights"],opportunities:["Long-form articles","Video insights","Document carousels"]},facebook:{topics:[{name:"Community Events",growth:35},{name:"Local Business Support",growth:42},{name:"Family Activities",growth:28},{name:"DIY Projects",growth:25}],competitors:["Community Hub","Local Connect","Family First"],opportunities:["Live videos","Group discussions","Event promotion"]},youtube:{topics:[{name:"Short Form Content",growth:65},{name:"Educational Tech",growth:58},{name:"Product Reviews",growth:45},{name:"Gaming Walkthroughs",growth:40}],competitors:["TechReviewer","Tutorial Master","How-To Channel"],opportunities:["YouTube Shorts","Series content","Collaboration videos"]},tiktok:{topics:[{name:"Dance Challenges",growth:75},{name:"Cooking Hacks",growth:62},{name:"Comedy Skits",growth:58},{name:"Life Hacks",growth:54}],competitors:["@trendsetter","@viral_creator","@tiktoker_pro"],opportunities:["Duet with trending creators","Use trending sounds","Jump on challenges early"]},pinterest:{topics:[{name:"Sustainable Living",growth:68},{name:"Budget Decorating",growth:55},{name:"Meal Prep Ideas",growth:50},{name:"Minimalist Design",growth:45}],competitors:["Design Inspiration Hub","DIY Queen","Home Style Pro"],opportunities:["Create idea pins","Rich pins for products","Seasonal content boards"]},reddit:{topics:[{name:"Tech Discussions",growth:42},{name:"Career Advice",growth:38},{name:"Personal Finance",growth:35},{name:"Mental Health",growth:32}],competitors:["u/IndustryExpert","u/LifeProTips","u/TechGuru"],opportunities:["Host AMAs","Share expertise in niche subreddits","Create valuable discussions"]},blog:{topics:[{name:"AI & Technology",growth:72},{name:"Productivity Tips",growth:58},{name:"Web Development",growth:52},{name:"Digital Marketing",growth:48}],competitors:["TechCrunch","Medium Writers","Dev.to Authors"],opportunities:["Guest posting","SEO optimization","Newsletter integration","Series content"]}};return s.jsxs("div",{className:"space-y-8",children:[e!=="all"&&s.jsxs("div",{className:"flex items-center gap-3 pb-4 border-b border-border",children:[s.jsx(pe,{platform:e,className:"w-8 h-8",size:32}),s.jsxs("div",{children:[s.jsxs("h2",{children:[t[e]," Insights"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Analytics and recommendations for ",t[e]]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-5 h-5 text-purple-400"}),s.jsx("h3",{children:"Content Performance"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n[e].map((o,l)=>s.jsxs(O,{className:"p-6 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 border-purple-500/20",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:o.title}),s.jsxs(J,{className:o.trend==="up"?"bg-green-500/10 text-green-500":"bg-red-500/10 text-red-500",children:[o.trend==="up"?s.jsx(bc,{className:"w-3 h-3 mr-1"}):s.jsx(Jp,{className:"w-3 h-3 mr-1"}),o.change,"%"]})]}),s.jsx("h3",{className:"text-purple-400",children:o.value})]},l))}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),s.jsx("h4",{children:"AI Recommendations"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-muted-foreground",children:[" Based on your ",t[e]," analytics, carousel posts get 3x more engagement than single images."]}),s.jsx("p",{className:"text-muted-foreground",children:" Your audience responds best to educational content. Consider creating more how-to posts."}),s.jsx("p",{className:"text-muted-foreground",children:" Posts with questions in the caption receive 45% more comments. Try ending with a call-to-action question."})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Js,{className:"w-5 h-5 text-blue-400"}),s.jsx("h3",{children:"Optimal Posting Times"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(O,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Js,{className:"w-5 h-5 text-blue-400"}),s.jsx("h4",{children:"Best Times to Post"})]}),s.jsx("div",{className:"space-y-2",children:r[e].bestTimes.map((o,l)=>s.jsx("div",{className:"flex items-center justify-between p-2 bg-blue-500/5 rounded",children:s.jsx("span",{className:"text-blue-400",children:o})},l))})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-pink-500/10 to-rose-500/10 border-pink-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(aa,{className:"w-5 h-5 text-pink-400"}),s.jsx("h4",{children:"Best Days to Post"})]}),s.jsx("div",{className:"space-y-2",children:r[e].bestDays.map((o,l)=>s.jsx("div",{className:"flex items-center justify-between p-2 bg-pink-500/5 rounded",children:s.jsx("span",{className:"text-pink-400",children:o})},l))})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(tt,{className:"w-5 h-5 text-amber-400"}),s.jsx("h4",{children:"Peak Engagement"})]}),s.jsx("div",{className:"flex items-center justify-center h-24",children:s.jsx("p",{className:"text-center text-amber-400",children:r[e].peakEngagement})})]})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),s.jsx("h4",{children:"Posting Schedule Recommendations"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-muted-foreground",children:[" Posting consistently at ",r[e].bestTimes[0]," increases reach by 30%."]}),s.jsxs("p",{className:"text-muted-foreground",children:[" Your ",t[e]," audience is most active on ",r[e].bestDays[0],"s."]}),s.jsx("p",{className:"text-muted-foreground",children:" Consider scheduling 3-5 posts per week for optimal engagement without overwhelming your audience."})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ss,{className:"w-5 h-5 text-orange-400"}),s.jsx("h3",{children:"Hashtag Strategy"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs(O,{className:"p-6 bg-gradient-to-br from-orange-500/10 to-red-500/10 border-orange-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(tt,{className:"w-5 h-5 text-orange-400"}),s.jsx("h4",{children:"Trending Now"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a[e].trending.map((o,l)=>s.jsx(J,{className:"bg-orange-500/20 text-orange-400 hover:bg-orange-500/30 cursor-pointer",children:o},l))})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),s.jsx("h4",{children:"Recommended for You"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a[e].recommended.map((o,l)=>s.jsx(J,{className:"bg-emerald-500/20 text-emerald-400 hover:bg-emerald-500/30 cursor-pointer",children:o},l))})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(Ss,{className:"w-5 h-5 text-purple-400"}),s.jsx("h4",{children:"Top Performing"})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a[e].topPerforming.map((o,l)=>s.jsx(J,{className:"bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 cursor-pointer",children:o},l))})]})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ve,{className:"w-5 h-5 text-blue-400"}),s.jsx("h4",{children:"Hashtag Strategy Tips"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-muted-foreground",children:[" Use 3-5 relevant hashtags per post on ",t[e]," for optimal reach."]}),s.jsx("p",{className:"text-muted-foreground",children:" Mix trending hashtags with niche-specific ones to reach both broad and targeted audiences."}),s.jsxs("p",{className:"text-muted-foreground",children:[" Your top-performing hashtag ",a[e].topPerforming[0]," increases engagement by 40%."]})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tt,{className:"w-5 h-5 text-purple-400"}),s.jsx("h3",{children:"Trending Topics & Opportunities"})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-purple-500/10 to-indigo-500/10 border-purple-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(tt,{className:"w-5 h-5 text-purple-400"}),s.jsx("h4",{children:"Trending Topics in Your Niche"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i[e].topics.map((o,l)=>s.jsx("div",{className:"p-4 bg-purple-500/5 rounded-lg border border-purple-500/10",children:s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{children:o.name}),s.jsxs(J,{className:"bg-green-500/10 text-green-500",children:[s.jsx(bc,{className:"w-3 h-3 mr-1"}),o.growth,"%"]})]})},l))})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(O,{className:"p-6 bg-gradient-to-br from-pink-500/10 to-rose-500/10 border-pink-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(aa,{className:"w-5 h-5 text-pink-400"}),s.jsx("h4",{children:"Competitors to Watch"})]}),s.jsx("div",{className:"space-y-2",children:i[e].competitors.map((o,l)=>s.jsxs("div",{className:"p-3 bg-pink-500/5 rounded flex items-center justify-between",children:[s.jsx("span",{children:o}),s.jsx(C,{variant:"ghost",size:"sm",className:"text-pink-400 hover:text-pink-300",children:"View"})]},l))})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),s.jsx("h4",{children:"Content Opportunities"})]}),s.jsx("div",{className:"space-y-2",children:i[e].opportunities.map((o,l)=>s.jsxs("div",{className:"p-3 bg-emerald-500/5 rounded flex items-center gap-2",children:[s.jsx(fo,{className:"w-4 h-4 text-emerald-400"}),s.jsx("span",{className:"text-sm",children:o})]},l))})]})]}),s.jsxs(O,{className:"p-6 bg-gradient-to-br from-amber-500/10 to-orange-500/10 border-amber-500/20",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx(tt,{className:"w-5 h-5 text-amber-400"}),s.jsx("h4",{children:"Trending Insights"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("p",{className:"text-muted-foreground",children:[" ",i[e].topics[0].name," is seeing explosive growth on ",t[e],"."]}),s.jsx("p",{className:"text-muted-foreground",children:" Your competitors are posting 2x more frequently. Consider increasing your posting schedule."}),s.jsx("p",{className:"text-muted-foreground",children:" Capitalize on trending topics early for maximum reach - posts made within the first 24 hours get 5x more engagement."})]})]})]})]})}function tx({selectedPlatform:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-emerald-400 mb-2",children:"Analytics"}),s.jsx("p",{className:"text-muted-foreground",children:"Track your performance, engagement, and growth across all platforms"})]}),s.jsx(ex,{selectedPlatform:e})]})}function nn({className:e,...t}){return s.jsx(gp,{"data-slot":"tabs",className:G("flex flex-col gap-2",e),...t})}function rn({className:e,...t}){return s.jsx(xp,{"data-slot":"tabs-list",className:G("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function De({className:e,...t}){return s.jsx(bp,{"data-slot":"tabs-trigger",className:G("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Ge({className:e,...t}){return s.jsx(yp,{"data-slot":"tabs-content",className:G("flex-1 outline-none",e),...t})}function sx(){const{user:e,profilePicture:t,refreshProfile:n}=Ln(),{currentProject:r,projects:a,refreshProjects:i}=At(),[o,l]=v.useState(!1),[c,d]=v.useState(!1),m=v.useRef(null),u=v.useRef(null),h=()=>(e?.user_metadata?.name||e?.email||"U").charAt(0).toUpperCase(),p=async b=>{const w=b.target.files?.[0];if(!w)return;if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"].includes(w.type)){$.error("Invalid file type. Please upload a JPEG, PNG, GIF, WebP, or SVG image.");return}if(w.size>5242880){$.error("File size exceeds 5MB limit. Please choose a smaller image.");return}l(!0);try{await Di.uploadProfilePicture(w),await n(),$.success("Profile picture updated successfully!")}catch(N){console.error("Profile picture upload error:",N),$.error(N.message||"Failed to upload profile picture")}finally{l(!1),m.current&&(m.current.value="")}},f=async b=>{const w=b.target.files?.[0];if(!w||!r)return;if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"].includes(w.type)){$.error("Invalid file type. Please upload a JPEG, PNG, GIF, WebP, or SVG image.");return}if(w.size>5242880){$.error("File size exceeds 5MB limit. Please choose a smaller image.");return}d(!0);try{await Di.uploadProjectLogo(r.id,w),await i(),$.success("Project logo updated successfully!")}catch(N){console.error("Project logo upload error:",N),$.error(N.message||"Failed to upload project logo")}finally{d(!1),u.current&&(u.current.value="")}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs($e,{className:"border-purple-500/30 bg-purple-500/10",children:[s.jsx(ia,{className:"h-4 w-4 text-purple-400"}),s.jsx(Be,{className:"text-purple-200",children:"Customize your profile picture (account-wide) and upload logos for your projects."})]}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Profile Picture"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"This profile picture will be displayed across your entire PubHub account."})]}),s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsxs(Nt,{className:"w-24 h-24",children:[t&&s.jsx(Hs,{src:t,alt:"Profile"}),s.jsx(St,{className:"text-2xl",children:h()})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{ref:m,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml",onChange:p,className:"hidden",disabled:o}),s.jsx(C,{onClick:()=>m.current?.click(),disabled:o,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"Upload Picture"]})})]})]}),s.jsx("div",{className:"flex-1 space-y-2",children:s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Requirements:"}),s.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Supported formats: JPEG, PNG, GIF, WebP, SVG"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Maximum file size: 5MB"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Recommended: Square image (1:1 ratio)"]})]})]})})]})]})}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Project Logo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a custom logo for the current project. It will appear in the project selector."})]}),r?s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-border bg-card flex items-center justify-center overflow-hidden",children:r.logo?s.jsx("img",{src:r.logo,alt:r.name,className:"w-full h-full object-contain"}):s.jsxs("div",{className:"text-muted-foreground flex flex-col items-center gap-2",children:[s.jsx(Xn,{className:"w-8 h-8"}),s.jsx("span",{className:"text-xs",children:"No logo"})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{ref:u,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml",onChange:f,className:"hidden",disabled:c}),s.jsx(C,{onClick:()=>u.current?.click(),disabled:c,variant:"outline",className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",children:c?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"Upload Logo"]})})]})]}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm",children:"Current Project"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:r.name})]}),s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Requirements:"}),s.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Supported formats: JPEG, PNG, GIF, WebP, SVG"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Maximum file size: 5MB"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Recommended: Square or icon-sized image"]})]})]}),s.jsx($e,{className:"border-amber-500/30 bg-amber-500/10",children:s.jsx(Be,{className:"text-amber-200 text-xs",children:"If no logo is uploaded, the PubHub logo will be displayed as the default."})})]})]}):s.jsx($e,{children:s.jsx(Be,{children:"Please select a project to upload a logo."})})]})}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Account Information"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Your account details."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm",children:"Name"}),s.jsx(ke,{value:e?.user_metadata?.name||"",disabled:!0,className:"mt-1 bg-muted/50"})]}),s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm",children:"Email"}),s.jsx(ke,{value:e?.email||"",disabled:!0,className:"mt-1 bg-muted/50"})]})]})]})})]})}function nx({initialTab:e="profile",onClose:t}){const[n,r]=v.useState(e);return s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-border/50",children:[s.jsx("h2",{className:"text-emerald-400",children:"Account Settings"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage your personal PubHub account preferences"})]}),s.jsxs(nn,{value:n,onValueChange:a=>r(a),className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"px-6 pt-4",children:s.jsxs(rn,{className:"w-full grid grid-cols-4 bg-muted/50",children:[s.jsxs(De,{value:"profile",className:"gap-2",children:[s.jsx(ia,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Profile"})]}),s.jsxs(De,{value:"shortcuts",className:"gap-2",children:[s.jsx(Ei,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Shortcuts"})]}),s.jsxs(De,{value:"notifications",className:"gap-2",children:[s.jsx(kn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Notifications"})]}),s.jsxs(De,{value:"preferences",className:"gap-2",children:[s.jsx(Ti,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Preferences"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[s.jsx(Ge,{value:"profile",className:"mt-0",children:s.jsx(sx,{})}),s.jsx(Ge,{value:"shortcuts",className:"mt-0",children:s.jsx(rx,{})}),s.jsx(Ge,{value:"notifications",className:"mt-0",children:s.jsx(ax,{})}),s.jsx(Ge,{value:"preferences",className:"mt-0",children:s.jsx(ix,{})})]})]})]})}function rx(){const e=[{category:"Navigation",shortcuts:[{keys:"H",description:"Go to Home"},{keys:"N",description:"New Post"},{keys:"I",description:"Open Inbox"},{keys:"C",description:"Open Calendar"},{keys:"A",description:"Open Analytics"}]},{category:"Actions",shortcuts:[{keys:"K",description:"Open AI Chat"},{keys:"K",description:"Open Command Palette"},{keys:",",description:"Open Settings Panel"},{keys:"S",description:"Save Draft"},{keys:"Enter",description:"Publish Post"}]},{category:"Editing",shortcuts:[{keys:"B",description:"Bold Text"},{keys:"I",description:"Italic Text"},{keys:"U",description:"Underline Text"},{keys:"Z",description:"Undo"},{keys:"Z",description:"Redo"}]}];return s.jsx("div",{className:"space-y-6",children:e.map(t=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-emerald-400 mb-3",children:t.category}),s.jsx("div",{className:"space-y-2",children:t.shortcuts.map(n=>s.jsxs("div",{className:"flex items-center justify-between py-2 px-3 rounded-lg hover:bg-muted/50",children:[s.jsx("span",{className:"text-sm",children:n.description}),s.jsx("kbd",{className:"px-2 py-1 text-xs bg-muted border border-border rounded",children:n.keys})]},n.keys))})]},t.category))})}function ax(){const[e,t]=v.useState(!0),[n,r]=v.useState(!0),[a,i]=v.useState(!0),[o,l]=v.useState(!0);return s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-emerald-400 mb-3",children:"Notification Preferences"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Email Notifications"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive updates via email"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:e,onChange:c=>t(c.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Push Notifications"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Get browser notifications"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:c=>r(c.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Post Reminders"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Remind me about scheduled posts"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a,onChange:c=>i(c.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Inbox Alerts"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert me of new messages and comments"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:o,onChange:c=>l(c.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]})]})]})})}function ix(){const[e,t]=v.useState("dark"),[n,r]=v.useState(!1),[a,i]=v.useState(!0);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-emerald-400 mb-3",children:"Appearance"}),s.jsx("div",{className:"space-y-4",children:s.jsxs("div",{children:[s.jsx("p",{className:"text-sm mb-2",children:"Theme"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("button",{onClick:()=>t("dark"),className:`p-4 rounded-lg border-2 transition-colors ${e==="dark"?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-border/80"}`,children:[s.jsx("div",{className:"w-full h-16 rounded bg-gradient-to-br from-gray-900 to-gray-800 mb-2"}),s.jsx("p",{className:"text-sm",children:"Dark"})]}),s.jsxs("button",{onClick:()=>t("light"),className:`p-4 rounded-lg border-2 transition-colors ${e==="light"?"border-emerald-500 bg-emerald-500/10":"border-border hover:border-border/80"}`,children:[s.jsx("div",{className:"w-full h-16 rounded bg-gradient-to-br from-gray-100 to-gray-200 mb-2"}),s.jsx("p",{className:"text-sm",children:"Light"})]})]})]})})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm text-emerald-400 mb-3",children:"Editor Preferences"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Compact Mode"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Reduce spacing in the interface"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:n,onChange:o=>r(o.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Auto-save Drafts"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically save your work"})]}),s.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[s.jsx("input",{type:"checkbox",checked:a,onChange:o=>i(o.target.checked),className:"sr-only peer"}),s.jsx("div",{className:"w-11 h-6 bg-gray-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-emerald-500"})]})]})]})]})]})}function ox({open:e,onOpenChange:t,onConnect:n}){const[r,a]=v.useState(""),[i,o]=v.useState(""),[l,c]=v.useState(""),[d,m]=v.useState(!1),[u,h]=v.useState(!1),p=async()=>{if(!r.trim()){$.error("Please enter your WordPress site URL");return}if(!i.trim()){$.error("Please enter your WordPress username");return}if(!l.trim()){$.error("Please enter your Application Password");return}let f=r.trim();!f.startsWith("http://")&&!f.startsWith("https://")&&(f="https://"+f),f=f.replace(/\/$/,"");try{m(!0),await n({siteUrl:f,username:i.trim(),applicationPassword:l.trim().replace(/\s/g,"")}),a(""),o(""),c(""),t(!1)}catch(b){console.error("WordPress connection error:",b),$.error(b.message||"Failed to connect to WordPress")}finally{m(!1)}};return s.jsx(Et,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-[500px]",children:[s.jsxs(zt,{children:[s.jsx(Ut,{children:"Connect WordPress Blog"}),s.jsx(Ht,{children:"Enter your WordPress site credentials to enable publishing from PubHub"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs(C,{variant:"ghost",size:"sm",className:"w-full justify-center text-xs",onClick:()=>h(!u),children:[s.jsx(Nd,{className:"w-3 h-3 mr-2"}),u?"Hide":"Show"," Setup Instructions"]}),u&&s.jsx($e,{children:s.jsxs(Be,{className:"text-xs space-y-2",children:[s.jsx("p",{className:"font-semibold",children:"How to get your Application Password:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-2",children:[s.jsx("li",{children:"Log in to your WordPress admin panel"}),s.jsx("li",{children:"Go to Users  Profile"}),s.jsx("li",{children:'Scroll down to "Application Passwords"'}),s.jsx("li",{children:'Enter "PubHub" as the name and click "Add New Application Password"'}),s.jsx("li",{children:"Copy the generated password (shown only once!)"})]}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Note: Application Passwords require WordPress 5.6+ and HTTPS"})]})}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"site-url",children:"WordPress Site URL"}),s.jsx(ke,{id:"site-url",placeholder:"https://yourblog.com",value:r,onChange:f=>a(f.target.value),disabled:d}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Your WordPress site address (e.g., yourblog.com or blog.yoursite.com)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"username",children:"WordPress Username"}),s.jsx(ke,{id:"username",placeholder:"admin",value:i,onChange:f=>o(f.target.value),disabled:d}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Your WordPress admin username"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"app-password",children:"Application Password"}),s.jsx(ke,{id:"app-password",type:"password",placeholder:"xxxx xxxx xxxx xxxx xxxx xxxx",value:l,onChange:f=>c(f.target.value),disabled:d}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Generated from WordPress  Users  Profile  Application Passwords"})]}),s.jsx($e,{children:s.jsx(Be,{className:"text-xs",children:" Your credentials are encrypted and stored securely. PubHub will only use them to publish content on your behalf."})}),s.jsxs(C,{variant:"link",size:"sm",className:"w-full text-xs",onClick:()=>window.open("https://wordpress.org/support/article/application-passwords/","_blank"),children:[s.jsx(ws,{className:"w-3 h-3 mr-2"}),"WordPress Application Passwords Documentation"]})]}),s.jsxs(vo,{children:[s.jsx(C,{variant:"outline",onClick:()=>t(!1),disabled:d,children:"Cancel"}),s.jsx(C,{onClick:p,disabled:d,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:d?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Connecting..."]}):s.jsx(s.Fragment,{children:"Connect WordPress"})})]})]})})}function cx(){const e=[{platform:"twitter",name:"Twitter",connected:!1,description:"Connect your Twitter account to post tweets and threads"},{platform:"instagram",name:"Instagram",connected:!1,description:"Share photos, reels, and stories on Instagram"},{platform:"linkedin",name:"LinkedIn",connected:!1,description:"Post professional content and articles on LinkedIn"},{platform:"facebook",name:"Facebook",connected:!1,description:"Share updates on your Facebook page"},{platform:"youtube",name:"YouTube",connected:!1,description:"Upload videos and manage your YouTube channel"},{platform:"tiktok",name:"TikTok",connected:!1,description:"Create and share short-form videos on TikTok"},{platform:"pinterest",name:"Pinterest",connected:!1,description:"Pin your content and ideas on Pinterest boards"},{platform:"reddit",name:"Reddit",connected:!1,description:"Engage with communities and share content on Reddit"},{platform:"blog",name:"Blog",connected:!1,description:"Publish articles and posts to your WordPress, Medium, or custom blog"}],[t,n]=v.useState(e),[r,a]=v.useState(!0),[i,o]=v.useState(!1),[l,c]=v.useState(null),[d,m]=v.useState(!1),[u,h]=v.useState(null),[p,f]=v.useState(!1),{currentProject:b}=At();v.useEffect(()=>{b&&w()},[b?.id]),v.useEffect(()=>{if(!b)return;const S=async()=>{sessionStorage.getItem("oauth_just_completed")==="true"&&(console.log("OAuth just completed, refreshing connections..."),setTimeout(()=>{w(),sessionStorage.removeItem("oauth_just_completed"),sessionStorage.removeItem("oauth_completed_platform")},500))};S();const D=setInterval(()=>{S()},1e3),F=()=>{S()};window.addEventListener("focus",F);const q=setTimeout(()=>{clearInterval(D)},1e4);return()=>{window.removeEventListener("focus",F),clearInterval(D),clearTimeout(q)}},[b]);const w=async()=>{if(b)try{a(!0);const{connections:S}=await ir.getAll(b.id);if(S&&S.length>0){const D=e.map(F=>{const q=S.find(te=>te.platform===F.platform);return q?{...F,...q}:F});n(D)}}catch(S){console.error("Failed to load connections:",S),$.error("Failed to load connections")}finally{a(!1)}},g=async S=>{if(b)try{o(!0),await ir.update(S,b.id)}catch(D){throw console.error("Failed to save connections:",D),$.error(D.message||"Failed to save connections"),D}finally{o(!1)}},N=S=>{h(S),m(!0)},E=async()=>{if(u&&b)try{const{data:{session:S},error:D}=await Ke.auth.getSession();if(D||!S?.access_token)throw new Error("You must be signed in to disconnect platforms");Yt(S.access_token);const F=await Pi.disconnect(u,b.id);if(F.connections){const te=e.map(I=>{const P=F.connections.find(R=>R.platform===I.platform);return P?{...I,...P}:I});n(te)}const q=t.find(te=>te.platform===u)?.name;$.success(`${q} disconnected successfully`)}catch(S){console.error("Disconnect error:",S),$.error(S.message||"Failed to disconnect platform")}h(null)},A=async S=>{t.find(F=>F.platform===S)?.connected?N(S):S==="blog"?f(!0):await y(S)},y=async S=>{if(!b){$.error("No project selected");return}try{$.info(`Connecting to ${S}...`,{description:"You will be redirected to authorize PubHub"});const{data:{session:D},error:F}=await Ke.auth.getSession();if(F||!D?.access_token)throw new Error("You must be signed in to connect platforms");Yt(D.access_token);const q=await Pi.authorize(S,b.id);sessionStorage.setItem("oauth_state",q.state),sessionStorage.setItem("oauth_platform",S),sessionStorage.setItem("oauth_project_id",b.id),window.location.href=q.authUrl}catch(D){console.error("OAuth flow error:",D),$.error(D.message||"Failed to connect platform")}},j=async S=>{const D=t.map(F=>F.platform===S?{...F,autoPost:!F.autoPost}:F);n(D),await g(D)},_=async S=>{if(!b)throw new Error("No project selected");try{const{data:{session:D},error:F}=await Ke.auth.getSession();if(F||!D?.access_token)throw new Error("You must be signed in to connect WordPress");Yt(D.access_token);const q=await fetch("https://ykzckfwdvmzuzxhezthv.supabase.co/functions/v1/make-server-19ccd85e/wordpress/connect",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${D.access_token}`},body:JSON.stringify({projectId:b.id,...S})});if(!q.ok){const I=await q.json();throw new Error(I.error||"Failed to connect WordPress")}const te=await q.json();$.success("WordPress connected successfully!"),await w()}catch(D){throw console.error("WordPress connection error:",D),D}},T=t.filter(S=>S.connected).length,k=t.length;return r?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Pe,{className:"w-8 h-8 animate-spin text-emerald-500"})}):s.jsxs("div",{className:"space-y-6",children:[T===0&&s.jsx(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"mt-0.5",children:s.jsx(yc,{className:"w-5 h-5 text-blue-400"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm mb-1 text-blue-400",children:"Connect Your Social Accounts"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:`Click "Connect" on any platform below to authorize PubHub with your social media accounts. You'll be redirected to the platform's authorization page and back automatically.`}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Note: Make sure OAuth credentials are configured in your Supabase environment variables. See OAUTH_SETUP.md for details."})]})]})}),s.jsx(O,{className:"p-6 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("h3",{children:"Connected Platforms"}),i&&s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(Pe,{className:"w-3 h-3 animate-spin"}),"Saving..."]})]}),s.jsxs("p",{className:"text-muted-foreground",children:[T," of ",k," platforms connected"]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs("div",{className:"w-20 h-20 relative",children:[s.jsxs("svg",{className:"w-20 h-20 transform -rotate-90",children:[s.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-emerald-500/20"}),s.jsx("circle",{cx:"40",cy:"40",r:"36",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${T/k*226} 226`,className:"text-emerald-500"})]}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("span",{className:"text-emerald-400",children:[Math.round(T/k*100),"%"]})})]})})]})}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsxs("h3",{children:["Connected (",T,")"]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4","data-testid":"platform-connections",children:t.filter(S=>S.connected).map(S=>s.jsxs(O,{className:"p-6","data-testid":`platform-${S.platform}`,children:[s.jsx("div",{className:"flex items-start justify-between mb-4",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(pe,{platform:S.platform,className:"w-8 h-8",size:32})}),s.jsxs("div",{children:[s.jsxs("h4",{className:"flex items-center gap-2",children:[S.name,s.jsx(He,{className:"w-4 h-4 text-green-500"})]}),s.jsx("p",{className:"text-sm text-muted-foreground","data-testid":"platform-username",children:S.username})]})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Followers"}),s.jsx(J,{variant:"outline",children:S.followers})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:`auto-${S.platform}`,className:"text-sm text-muted-foreground cursor-pointer",children:"Auto-post enabled"}),s.jsx(la,{id:`auto-${S.platform}`,checked:S.autoPost,onCheckedChange:()=>j(S.platform),"data-testid":"auto-post-toggle"})]}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsxs(Et,{children:[s.jsx(Wd,{asChild:!0,children:s.jsxs(C,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>c(S.platform),children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Settings"]})}),s.jsxs(Tt,{children:[s.jsxs(zt,{children:[s.jsx(Ut,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{platform:S.platform,className:"w-5 h-5",size:20}),S.name," Settings"]})}),s.jsxs(Ht,{children:["Configure your ",S.name," connection settings"]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"username",children:"Username"}),s.jsx(ke,{id:"username",value:S.username,disabled:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"followers",children:"Followers"}),s.jsx(ke,{id:"followers",value:S.followers,disabled:!0})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{htmlFor:"auto-post",children:"Auto-post enabled"}),s.jsx(la,{id:"auto-post",checked:S.autoPost,onCheckedChange:()=>j(S.platform)})]}),s.jsxs(C,{className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:[s.jsx(ws,{className:"w-4 h-4 mr-2"}),"Open Platform Dashboard"]})]})]})]}),s.jsxs(C,{variant:"outline",size:"sm",className:"border-red-500/30 text-red-500 hover:bg-red-500/10",onClick:()=>A(S.platform),children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Disconnect"]})]})]})]},S.platform))})]}),s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center justify-between mb-4",children:s.jsx("h3",{children:"Available Platforms"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:t.filter(S=>!S.connected).map(S=>s.jsx(O,{className:"p-6 hover:border-emerald-500/30 transition-all cursor-pointer group",children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx(pe,{platform:S.platform,className:"w-10 h-10",size:40})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-1",children:S.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:S.description})]}),s.jsxs(C,{className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",onClick:()=>A(S.platform),children:[s.jsx(Qt,{className:"w-4 h-4 mr-2"}),"Connect"]})]})},S.platform))})]}),s.jsx(O,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded shadow-lg",children:s.jsx(yc,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"mb-1 text-blue-400",children:"Pro Tip"}),s.jsx("p",{className:"text-muted-foreground",children:"Connect all your platforms to unlock cross-posting features and get unified analytics. You can always disable auto-posting for specific platforms in their settings."})]})]})}),s.jsx(gr,{open:d,onOpenChange:m,title:`Disconnect ${t.find(S=>S.platform===u)?.name}?`,description:"This will remove the platform connection and disable all automated posting. You can reconnect at any time.",confirmText:"Disconnect",onConfirm:E,variant:"destructive"}),s.jsx(ox,{open:p,onOpenChange:f,onConnect:_})]})}const Ac=[{id:"blog",label:"Blog Post",icon:ot,platforms:["blog"]},{id:"social-thread",label:"Social Media Thread",icon:Ni,platforms:["twitter"]},{id:"linkedin-post",label:"LinkedIn Article",icon:vd,platforms:["linkedin"]},{id:"social-announcement",label:"Video Announcement",icon:ve,platforms:["twitter","linkedin","facebook","instagram"]},{id:"newsletter",label:"Email Newsletter",icon:Sd,platforms:["blog"]},{id:"captions",label:"Repurposed Captions",icon:vn,platforms:["instagram","tiktok","facebook"]}];function lx({open:e,onOpenChange:t,onSave:n,editRule:r}){const[a,i]=v.useState(r?.name||""),[o,l]=v.useState(r?.trigger.platform||"youtube"),[c,d]=v.useState(r?.trigger.minDuration?String(Math.floor(r.trigger.minDuration/60)):""),[m,u]=v.useState(r?.trigger.keywords||[]),[h,p]=v.useState(""),[f,b]=v.useState(r?.transformation||"blog"),[w,g]=v.useState(r?.transformationInstructions||""),[N,E]=v.useState(r?.action||"draft"),A=Ac.find(S=>S.id===f),y=()=>({blog:"e.g., Use a conversational tone, include relevant statistics, add actionable takeaways at the end, keep paragraphs short for readability...","social-thread":"e.g., Start with a compelling hook, use emojis sparingly, keep each tweet concise, end with a call-to-action...","linkedin-post":"e.g., Use a professional yet approachable tone, highlight business value, include industry insights, format with clear sections...","social-announcement":"e.g., Keep it exciting and concise, emphasize the value, include a clear CTA, use platform-appropriate language...",newsletter:"e.g., Use a friendly tone, personalize the message, include a compelling subject line suggestion, add multiple CTAs...",captions:"e.g., Use trending hashtags, keep it short and punchy, match the platform's tone, include emoji where appropriate..."})[f],j=()=>{h.trim()&&!m.includes(h.trim())&&(u([...m,h.trim()]),p(""))},_=S=>{u(m.filter(D=>D!==S))},T=()=>{const S={name:a.trim()||`Auto-remix ${o} videos to ${Ra(f)}`,enabled:r?.enabled??!0,trigger:{platform:o,minDuration:c?parseInt(c)*60:void 0,keywords:m.length>0?m:void 0},transformation:f,transformationInstructions:w.trim()||void 0,action:N,targetPlatforms:A?.platforms||[],lastTriggered:r?.lastTriggered};n(S),k()},k=()=>{r||(i(""),l("youtube"),d(""),u([]),p(""),b("blog"),g(""),E("draft")),t(!1)};return s.jsx(Et,{open:e,onOpenChange:k,children:s.jsxs(Tt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(zt,{children:[s.jsxs(Ut,{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-5 h-5 text-yellow-400"}),r?"Edit Automation Rule":"Create Automation Rule"]}),s.jsx(Ht,{children:"Automatically remix your videos into other content formats when they're published"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{children:"Rule Name (Optional)"}),s.jsx(ke,{placeholder:"e.g., YouTube videos to blog posts",value:a,onChange:S=>i(S.target.value)})]}),s.jsx(O,{children:s.jsxs(ge,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4 text-yellow-400"}),s.jsx("h4",{children:"When this happens..."})]}),s.jsxs("div",{className:"space-y-4 ml-6",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{children:"Platform"}),s.jsxs(yt,{value:o,onValueChange:S=>l(S),children:[s.jsx(jt,{children:s.jsx(vt,{})}),s.jsxs(wt,{children:[s.jsx(qe,{value:"youtube",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{platform:"youtube",className:"w-4 h-4"}),s.jsx("span",{children:"New YouTube video"})]})}),s.jsx(qe,{value:"tiktok",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pe,{platform:"tiktok",className:"w-4 h-4"}),s.jsx("span",{children:"New TikTok video"})]})})]})]})]}),s.jsxs("div",{className:"space-y-3 border-t border-border pt-3",children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Optional Filters"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"text-sm",children:"Minimum Duration (minutes)"}),s.jsx(ke,{type:"number",placeholder:"Any duration",value:c,onChange:S=>d(S.target.value),min:"0"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{className:"text-sm",children:"Keywords (optional - video must contain at least one)"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{placeholder:"e.g., tutorial, tips",value:h,onChange:S=>p(S.target.value),onKeyDown:S=>{S.key==="Enter"&&(S.preventDefault(),j())}}),s.jsx(C,{type:"button",variant:"outline",size:"sm",onClick:j,children:s.jsx(Qt,{className:"w-4 h-4"})})]}),m.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:m.map(S=>s.jsxs(J,{variant:"secondary",className:"gap-1",children:[S,s.jsx("button",{onClick:()=>_(S),className:"ml-1 hover:text-destructive",children:s.jsx(Is,{className:"w-3 h-3"})})]},S))})]})]})]})]})}),s.jsx(O,{children:s.jsxs(ge,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-4 h-4 text-purple-400"}),s.jsx("h4",{children:"Remix it into..."})]}),s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsx(ee,{children:"Content Type"}),s.jsxs(yt,{value:f,onValueChange:S=>b(S),children:[s.jsx(jt,{children:s.jsx(vt,{})}),s.jsx(wt,{children:Ac.map(S=>{const D=S.icon;return s.jsx(qe,{value:S.id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(D,{className:"w-4 h-4"}),s.jsx("span",{children:S.label})]})},S.id)})})]}),A&&s.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Target platforms:"}),s.jsx("div",{className:"flex items-center gap-1",children:A.platforms.map(S=>s.jsx(pe,{platform:S,className:"w-4 h-4"},S))})]}),s.jsxs("div",{className:"space-y-2 pt-3 border-t border-border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ee,{className:"text-sm",children:"Custom Instructions (Optional)"}),w&&s.jsxs(J,{variant:"outline",className:"text-xs bg-purple-500/10 text-purple-400 border-purple-500/30",children:[w.length," characters"]})]}),s.jsx(kt,{placeholder:y(),value:w,onChange:S=>g(S.target.value),className:"min-h-[100px] resize-none text-sm"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:" Provide specific guidelines for how the AI should remix your content. This helps maintain your brand voice and content style."})]})]})]})}),s.jsx(O,{children:s.jsxs(ge,{className:"p-4 space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Js,{className:"w-4 h-4 text-blue-400"}),s.jsx("h4",{children:"Then do this..."})]}),s.jsxs("div",{className:"ml-6 space-y-2",children:[s.jsx(ee,{children:"Action"}),s.jsxs(yt,{value:N,onValueChange:S=>E(S),children:[s.jsx(jt,{children:s.jsx(vt,{})}),s.jsxs(wt,{children:[s.jsx(qe,{value:"draft",children:"Save as Draft"}),s.jsx(qe,{value:"review",children:"Save for Review"}),s.jsx(qe,{value:"auto-publish",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:"Auto-Publish"}),s.jsx(J,{variant:"outline",className:"text-xs bg-yellow-500/10 text-yellow-400 border-yellow-500/30",children:"Advanced"})]})})]})]}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[N==="draft"&&"Content will be saved as a draft in the composer",N==="review"&&"Content will be flagged for your review before publishing",N==="auto-publish"&&"Content will be automatically published (use with caution)"]})]})]})})]}),s.jsxs(vo,{children:[s.jsx(C,{variant:"outline",onClick:k,children:"Cancel"}),s.jsx(C,{onClick:T,disabled:!a.trim()&&!f,children:r?"Update Rule":"Create Rule"})]})]})})}function dx(){const[e,t]=v.useState([]),[n,r]=v.useState(!1),[a,i]=v.useState(null),[o,l]=v.useState(!1),[c,d]=v.useState(null);v.useEffect(()=>{m()},[]);const m=()=>{t(sn())},u=g=>{Uf(g),m(),$.success("Automation Rule Created",{description:"Your automation rule is now active and will process new videos."})},h=g=>{a&&(Hf(a.id,g),m(),i(null),$.success("Automation Rule Updated"))},p=g=>{qf(g),m();const N=e.find(E=>E.id===g);$.success(N?.enabled?"Rule Disabled":"Rule Enabled")},f=g=>{d(g),l(!0)},b=()=>{c&&(Wf(c.id),m(),$.success("Automation Rule Deleted")),d(null)},w=g=>new Date(g).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"});return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-emerald-400 mb-2",children:"Automation Workflows"}),s.jsx("p",{className:"text-muted-foreground",children:"Automatically transform your video content into other formats when published"})]}),s.jsxs($e,{className:"bg-blue-500/10 border-blue-500/30",children:[s.jsx(Xp,{className:"w-4 h-4 text-blue-400"}),s.jsxs(Be,{className:"text-blue-400",children:[s.jsx("span",{className:"font-medium",children:"How it works:"})," When you publish a new video on YouTube or TikTok, matching automation rules will automatically transform it into the specified content format."]})]}),s.jsxs(C,{onClick:()=>r(!0),className:"gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Create Automation Rule"]}),e.length===0?s.jsx(O,{children:s.jsxs(ge,{className:"p-12 text-center",children:[s.jsx(Jt,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),s.jsx("h3",{children:"No Automation Rules Yet"}),s.jsx("p",{className:"text-muted-foreground mt-2 max-w-md mx-auto",children:"Create your first automation rule to automatically transform your videos into other content formats"}),s.jsxs(C,{onClick:()=>r(!0),className:"mt-4 gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Create Your First Rule"]})]})}):s.jsx("div",{className:"space-y-4",children:e.map(g=>s.jsxs(O,{className:g.enabled?"":"opacity-60",children:[s.jsx(Je,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(la,{checked:g.enabled,onCheckedChange:()=>p(g.id)}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"truncate",children:g.name}),!g.enabled&&s.jsx(J,{variant:"outline",className:"mt-1 text-xs",children:"Disabled"})]})]})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(C,{variant:"ghost",size:"sm",onClick:()=>{i(g),r(!0)},children:s.jsx(_d,{className:"w-4 h-4"})}),s.jsx(C,{variant:"ghost",size:"sm",onClick:()=>f(g),className:"text-destructive hover:text-destructive",children:s.jsx(Xt,{className:"w-4 h-4"})})]})]})}),s.jsxs(ge,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[s.jsx(O,{className:"bg-accent/50",children:s.jsx(ge,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Jt,{className:"w-4 h-4 text-yellow-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"When"}),s.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[s.jsx(pe,{platform:g.trigger.platform,className:"w-4 h-4"}),s.jsxs("span",{className:"text-sm",children:[g.trigger.platform==="youtube"?"YouTube":"TikTok"," video"]})]})]})]})})}),s.jsx(yn,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),s.jsx(O,{className:"bg-accent/50",children:s.jsx(ge,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-4 h-4 text-purple-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Transform to"}),s.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[s.jsx("p",{className:"text-sm",children:Ra(g.transformation)}),g.transformationInstructions&&s.jsx(J,{variant:"outline",className:"text-xs bg-purple-500/10 text-purple-400 border-purple-500/30",children:"Custom"})]})]})]})})}),s.jsx(yn,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),s.jsx(O,{className:"bg-accent/50",children:s.jsx(ge,{className:"p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Js,{className:"w-4 h-4 text-blue-400"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Then"}),s.jsx("p",{className:"text-sm mt-1",children:Yf(g.action)})]})]})})})]}),(g.trigger.minDuration||g.trigger.keywords)&&s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Filters:"}),g.trigger.minDuration&&s.jsxs(J,{variant:"outline",className:"text-xs",children:["Min ",Math.floor(g.trigger.minDuration/60)," min"]}),g.trigger.keywords&&g.trigger.keywords.map(N=>s.jsxs(J,{variant:"outline",className:"text-xs",children:['"',N,'"']},N))]}),g.transformationInstructions&&s.jsxs("div",{className:"p-3 bg-purple-500/5 border border-purple-500/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(ve,{className:"w-3 h-3 text-purple-400"}),s.jsx("span",{className:"text-xs text-purple-400 font-medium",children:"Custom Instructions:"})]}),s.jsxs("p",{className:"text-xs text-muted-foreground italic",children:['"',g.transformationInstructions,'"']})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Publishes to:"}),s.jsx("div",{className:"flex items-center gap-1",children:g.targetPlatforms.map(N=>s.jsx(pe,{platform:N,className:"w-4 h-4"},N))})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground pt-2 border-t border-border",children:[s.jsxs("div",{children:[s.jsx("span",{children:"Executed: "}),s.jsxs("span",{className:"text-foreground",children:[g.executionCount," times"]})]}),g.lastTriggered&&s.jsxs("div",{children:[s.jsx("span",{children:"Last run: "}),s.jsx("span",{className:"text-foreground",children:w(g.lastTriggered)})]}),s.jsxs("div",{className:"ml-auto",children:[s.jsx("span",{children:"Created: "}),s.jsx("span",{className:"text-foreground",children:w(g.createdAt)})]})]})]})]},g.id))}),e.some(g=>g.action==="auto-publish"&&g.enabled)&&s.jsxs($e,{className:"bg-yellow-500/10 border-yellow-500/30",children:[s.jsx(oa,{className:"w-4 h-4 text-yellow-400"}),s.jsxs(Be,{className:"text-yellow-400",children:[s.jsx("span",{className:"font-medium",children:"Warning:"})," You have auto-publish rules enabled. Content will be automatically published without review. Make sure your transformations are accurate."]})]}),s.jsx(lx,{open:n,onOpenChange:g=>{r(g),g||i(null)},onSave:a?h:u,editRule:a}),s.jsx(gr,{open:o,onOpenChange:l,title:"Delete automation rule?",description:c?`Are you sure you want to delete "${c.name}"? This action cannot be undone.`:"Are you sure you want to delete this automation rule? This action cannot be undone.",confirmText:"Delete",onConfirm:b,variant:"destructive"})]})}const ei=[{value:"announcement",label:"Announcement",emoji:""},{value:"educational",label:"Educational",emoji:""},{value:"promotional",label:"Promotional",emoji:""},{value:"engagement",label:"Engagement",emoji:""},{value:"behind-scenes",label:"Behind the Scenes",emoji:""},{value:"storytelling",label:"Storytelling",emoji:""}],ux=["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit","blog"];function mx({open:e,onOpenChange:t,onSave:n,initialContent:r="",initialPlatforms:a=[],editingTemplate:i=null}){const[o,l]=v.useState(i?.title||""),[c,d]=v.useState(i?.category||"engagement"),[m,u]=v.useState(i?.content||r),[h,p]=v.useState(i?.platforms||a),[f,b]=v.useState(i?.hashtags||[]),[w,g]=v.useState(""),N=()=>{i||(l(""),d("engagement"),u(r),p(a),b([]),g(""))},E=()=>{N(),t(!1)},A=k=>{p(S=>S.includes(k)?S.filter(D=>D!==k):[...S,k])},y=()=>{if(w.trim()){const k=w.trim().startsWith("#")?w.trim():`#${w.trim()}`;f.includes(k)||(b([...f,k]),g(""))}},j=k=>{b(f.filter(S=>S!==k))},_=()=>{if(!o.trim()){$.error("Please enter a template title");return}if(!m.trim()){$.error("Please enter template content");return}if(h.length===0){$.error("Please select at least one platform");return}const k=ei.find(D=>D.value===c)?.emoji||"",S={id:i?.id||`custom-${Date.now()}`,title:o.trim(),category:c,content:m.trim(),platforms:h,hashtags:f.length>0?f:void 0,emoji:k};n(S),$.success(i?"Template updated!":"Template created!"),E()},T=ei.find(k=>k.value===c);return s.jsx(Et,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(zt,{children:[s.jsxs(Ut,{className:"flex items-center gap-2",children:[s.jsx(ve,{className:"w-5 h-5 text-emerald-400"}),i?"Edit Template":"Create Custom Template"]}),s.jsx(Ht,{children:i?"Update your custom template to use it again later":"Save this content as a reusable template for future posts"})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"title",children:"Template Title *"}),s.jsx(ke,{id:"title",placeholder:"e.g., Weekly Newsletter Announcement",value:o,onChange:k=>l(k.target.value),className:"mt-2"})]}),s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"category",children:"Category *"}),s.jsxs(yt,{value:c,onValueChange:k=>d(k),children:[s.jsx(jt,{className:"mt-2",children:s.jsx(vt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:T?.emoji}),s.jsx("span",{children:T?.label})]})})}),s.jsx(wt,{children:ei.map(k=>s.jsx(qe,{value:k.value,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:k.emoji}),s.jsx("span",{children:k.label})]})},k.value))})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx(ee,{htmlFor:"content",children:"Template Content *"}),s.jsx(En,{onGenerate:k=>u(k),contextType:"template",placeholder:"e.g., 'Create a template for product announcements'",variant:"button",buttonText:"Generate Template"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:"Use placeholders like [Your Topic], [Date], or [Product Name] to make it easy to customize later"}),s.jsxs("div",{className:"relative",children:[s.jsx(kt,{id:"content",placeholder:"Write your template content here...",value:m,onChange:k=>u(k.target.value),className:"min-h-[200px] resize-none pr-12"}),s.jsx("div",{className:"absolute top-2 right-2",children:s.jsx(En,{onGenerate:k=>u(k),contextType:"template",placeholder:"e.g., 'Create a template for...'",variant:"icon"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[m.length," characters"]})]}),s.jsxs("div",{children:[s.jsx(ee,{children:"Recommended Platforms *"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-3",children:"Select which platforms this template works best for"}),s.jsx("div",{className:"grid grid-cols-3 gap-3",children:ux.map(k=>s.jsxs("div",{onClick:()=>A(k),className:`flex items-center gap-3 p-3 border rounded-lg cursor-pointer transition-all hover:border-emerald-500/30 ${h.includes(k)?"border-emerald-500 bg-emerald-500/10":"border-border"}`,children:[s.jsx(Sn,{checked:h.includes(k),onCheckedChange:()=>A(k),onClick:S=>S.stopPropagation()}),s.jsx(pe,{platform:k,className:"w-4 h-4",size:16}),s.jsx("span",{className:"text-sm capitalize",children:k})]},k))})]}),s.jsxs("div",{children:[s.jsx(ee,{htmlFor:"hashtags",children:"Suggested Hashtags (Optional)"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1 mb-2",children:"Add hashtags that work well with this template"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{id:"hashtags",placeholder:"e.g., ContentCreator",value:w,onChange:k=>g(k.target.value),onKeyDown:k=>{k.key==="Enter"&&(k.preventDefault(),y())}}),s.jsx(C,{type:"button",variant:"outline",onClick:y,className:"hover:bg-emerald-500/10 hover:border-emerald-500/30",children:s.jsx(Qt,{className:"w-4 h-4"})})]}),f.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:f.map(k=>s.jsxs(J,{variant:"outline",className:"bg-blue-500/10 text-blue-400 border-blue-500/30 pr-1",children:[k,s.jsx("button",{onClick:()=>j(k),className:"ml-1 hover:text-blue-300",children:s.jsx(Is,{className:"w-3 h-3"})})]},k))})]}),s.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[s.jsx(C,{variant:"outline",onClick:E,className:"flex-1",children:"Cancel"}),s.jsxs(C,{onClick:_,className:"flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 shadow-lg shadow-emerald-500/20",children:[s.jsx(ve,{className:"w-4 h-4 mr-2"}),i?"Update Template":"Create Template"]})]})]})]})})}function hx(){const[e,t]=v.useState(Nn()),[n,r]=v.useState(""),[a,i]=v.useState(!1),[o,l]=v.useState(null),[c,d]=v.useState(!1),[m,u]=v.useState(null),h=e.filter(N=>N.name.toLowerCase().includes(n.toLowerCase())||N.platforms.some(E=>E.toLowerCase().includes(n.toLowerCase()))),p=N=>{l(N),i(!0)},f=N=>{u(N),d(!0)},b=()=>{m&&(Og(m.id),t(Nn()),$.success("Template Deleted"),d(!1),u(null))},w=N=>{const E={...N,name:`${N.name} (Copy)`};l(E),i(!0)},g=()=>{i(!1),l(null),t(Nn())};return s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex items-center justify-end",children:s.jsxs(C,{onClick:()=>i(!0),className:"gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Create Template"]})}),s.jsx(O,{children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"relative",children:[s.jsx(jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Search templates...",value:n,onChange:N=>r(N.target.value),className:"pl-9"})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h.map(N=>s.jsx(O,{className:"group hover:border-primary/50 transition-all",children:s.jsxs(ge,{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{children:N.name}),s.jsxs("p",{className:"text-muted-foreground text-sm mt-1 line-clamp-2",children:[N.content.slice(0,100),"..."]})]}),s.jsx(ot,{className:"w-5 h-5 text-muted-foreground flex-shrink-0 ml-2"})]}),s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-xs text-muted-foreground",children:"Platforms:"}),N.platforms.map(E=>s.jsxs(J,{variant:"secondary",className:"gap-1",children:[s.jsx(pe,{platform:E,className:"w-3 h-3"}),E]},E))]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t border-border",children:[s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>p(N),className:"flex-1 gap-1",children:[s.jsx(_d,{className:"w-3 h-3"}),"Edit"]}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>w(N),className:"gap-1",children:s.jsx(ar,{className:"w-3 h-3"})}),s.jsx(C,{variant:"outline",size:"sm",onClick:()=>f(N),className:"gap-1 text-destructive hover:text-destructive",children:s.jsx(Xt,{className:"w-3 h-3"})})]})]})},N.id))}),h.length===0&&s.jsx(O,{children:s.jsxs(ge,{className:"p-12 text-center",children:[s.jsx(ot,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),s.jsx("h3",{children:"No templates found"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:n?"Try adjusting your search query":"Create your first template to get started"}),!n&&s.jsxs(C,{onClick:()=>i(!0),className:"mt-4 gap-2",children:[s.jsx(Qt,{className:"w-4 h-4"}),"Create Template"]})]})}),s.jsx(mx,{open:a,onOpenChange:g,editTemplate:o}),s.jsx(gr,{open:c,onOpenChange:d,onConfirm:b,title:"Delete Template",description:`Are you sure you want to delete "${m?.name}"? This action cannot be undone.`,confirmText:"Delete",variant:"destructive"})]})}function px(){const{currentProject:e,projects:t,refreshProjects:n,updateProject:r}=At(),[a,i]=v.useState(!1),[o,l]=v.useState(!1),[c,d]=v.useState(e?.name||""),[m,u]=v.useState(e?.description||""),h=v.useRef(null);v.useEffect(()=>{e&&(d(e.name),u(e.description))},[e]);const p=async b=>{const w=b.target.files?.[0];if(!w||!e)return;if(!["image/jpeg","image/png","image/gif","image/webp","image/svg+xml"].includes(w.type)){$.error("Invalid file type. Please upload a JPEG, PNG, GIF, WebP, or SVG image.");return}if(w.size>5242880){$.error("File size exceeds 5MB limit. Please choose a smaller image.");return}i(!0);try{await Di.uploadProjectLogo(e.id,w),await n(),$.success("Project logo updated successfully!")}catch(N){console.error("Project logo upload error:",N),$.error(N.message||"Failed to upload project logo")}finally{i(!1),h.current&&(h.current.value="")}},f=async()=>{if(e){if(!c.trim()){$.error("Project name cannot be empty");return}l(!0);try{await r(e.id,{name:c,description:m}),await n(),$.success("Project details updated successfully!")}catch(b){console.error("Project update error:",b),$.error(b.message||"Failed to update project details")}finally{l(!1)}}};return e?s.jsxs("div",{className:"space-y-6",children:[s.jsxs($e,{className:"border-purple-500/30 bg-purple-500/10",children:[s.jsx(vc,{className:"h-4 w-4 text-purple-400"}),s.jsx(Be,{className:"text-purple-200",children:"Customize your project details, name, description, and logo."})]}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Project Logo"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload a custom logo for this project. It will appear in the project selector."})]}),s.jsxs("div",{className:"flex items-start gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx("div",{className:"w-24 h-24 rounded-lg border-2 border-border bg-card flex items-center justify-center overflow-hidden",children:e.logo?s.jsx("img",{src:e.logo,alt:e.name,className:"w-full h-full object-contain"}):s.jsxs("div",{className:"text-muted-foreground flex flex-col items-center gap-2",children:[s.jsx(Xn,{className:"w-8 h-8"}),s.jsx("span",{className:"text-xs",children:"No logo"})]})}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("input",{ref:h,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp,image/svg+xml",onChange:p,className:"hidden",disabled:a}),s.jsx(C,{onClick:()=>h.current?.click(),disabled:a,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:a?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"Upload Logo"]})})]})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"text-muted-foreground mb-2",children:"Requirements:"}),s.jsxs("ul",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Supported formats: JPEG, PNG, GIF, WebP, SVG"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Maximum file size: 5MB"]}),s.jsxs("li",{className:"flex items-center gap-2",children:[s.jsx(Xe,{className:"w-3 h-3 text-emerald-400"}),"Recommended: Square or icon-sized image"]})]})]}),s.jsx($e,{className:"border-amber-500/30 bg-amber-500/10 mt-3",children:s.jsx(Be,{className:"text-amber-200 text-xs",children:"If no logo is uploaded, the PubHub logo will be displayed as the default."})})]})]})]})}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Project Information"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Update the name and description of your project."})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm",children:"Project Name"}),s.jsx(ke,{value:c,onChange:b=>d(b.target.value),placeholder:"Enter project name",className:"mt-1"})]}),s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm",children:"Description"}),s.jsx(kt,{value:m,onChange:b=>u(b.target.value),placeholder:"Enter project description (optional)",className:"mt-1 resize-none",rows:4})]}),s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(C,{onClick:f,disabled:o||!c.trim(),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):s.jsxs(s.Fragment,{children:[s.jsx(kd,{className:"w-4 h-4 mr-2"}),"Save Changes"]})}),s.jsx(C,{variant:"outline",onClick:()=>{d(e.name),u(e.description)},disabled:o,children:"Reset"})]})]})]})}),s.jsx(O,{className:"p-6",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base mb-1 text-emerald-400",children:"Project Metadata"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Read-only information about this project."})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm text-muted-foreground",children:"Project ID"}),s.jsx("p",{className:"text-sm font-mono bg-muted/50 p-2 rounded mt-1",children:e.id})]}),s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm text-muted-foreground",children:"Created"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded mt-1",children:new Date(e.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.updatedAt&&s.jsxs("div",{children:[s.jsx(ee,{className:"text-sm text-muted-foreground",children:"Last Updated"}),s.jsx("p",{className:"text-sm bg-muted/50 p-2 rounded mt-1",children:new Date(e.updatedAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})]})})]}):s.jsxs($e,{children:[s.jsx(vc,{className:"h-4 w-4"}),s.jsx(Be,{children:"Please select a project to view and edit its details."})]})}function Ws({className:e,children:t,...n}){return s.jsxs(vp,{"data-slot":"scroll-area",className:G("relative",e),...n,children:[s.jsx(jp,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:t}),s.jsx(fx,{}),s.jsx(wp,{})]})}function fx({className:e,orientation:t="vertical",...n}){return s.jsx(Np,{"data-slot":"scroll-area-scrollbar",orientation:t,className:G("flex touch-none p-px transition-colors select-none",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",e),...n,children:s.jsx(Sp,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function gx(){const[e,t]=v.useState(!1),[n,r]=v.useState([]),a=async()=>{t(!0),r([]);const c=[];c.push({section:"Authentication",status:"info",message:"Checking user authentication..."});const d=it();if(d)c.push({section:"Authentication",status:"success",message:"User is authenticated",details:"Access token found in localStorage"});else{c.push({section:"Authentication",status:"error",message:"User is not authenticated",details:"No access token found. Please sign in."}),r([...c]),t(!1);return}c.push({section:"Supabase",status:"info",message:"Checking Supabase configuration..."}),c.push({section:"Supabase",status:"success",message:"Supabase is configured",details:`Project ID: ${We}`}),r([...c]),c.push({section:"Backend",status:"info",message:"Checking backend health..."}),r([...c]);try{const N=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/health`,{headers:{Authorization:`Bearer ${xs}`}});N.ok?c.push({section:"Backend",status:"success",message:"Backend is healthy",details:"Edge function is responding"}):c.push({section:"Backend",status:"error",message:"Backend health check failed",details:`Status: ${N.status}`})}catch(N){c.push({section:"Backend",status:"error",message:"Cannot reach backend",details:N.message})}r([...c]),c.push({section:"OAuth Routes",status:"info",message:"Checking OAuth route availability..."}),r([...c]);const m=["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit"];let u=0,h=[];for(const N of m)try{const E=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/oauth/authorize/${N}?projectId=test`,{headers:{Authorization:`Bearer ${d}`}}),A=await E.json();E.ok?u++:A.error?.includes("not configured")&&h.push(N)}catch{}u===m.length?c.push({section:"OAuth Routes",status:"success",message:"All platforms configured",details:`${u}/${m.length} platforms have OAuth credentials`}):u>0?c.push({section:"OAuth Routes",status:"warning",message:"Some platforms not configured",details:`${u}/${m.length} platforms configured. Missing: ${h.join(", ")}`}):c.push({section:"OAuth Routes",status:"error",message:"No platforms configured",details:"Add OAuth credentials to Supabase environment variables"}),r([...c]),c.push({section:"Configuration",status:"info",message:"Checking frontend URL configuration..."}),r([...c]);const p=window.location.origin;c.push({section:"Configuration",status:"info",message:"Current URL detected",details:`Frontend URL: ${p}`}),p.startsWith("https://")?c.push({section:"Configuration",status:"success",message:"Using HTTPS (recommended for production)"}):p.startsWith("https://pubhub.dev")?c.push({section:"Configuration",status:"success",message:"Using production domain (pubhub.dev)",details:"This is the correct production configuration"}):c.push({section:"Configuration",status:"warning",message:"Not using HTTPS",details:"OAuth may not work properly without HTTPS in production"}),r([...c]),c.push({section:"Routes",status:"info",message:"Checking OAuth callback route..."}),r([...c]);const f=`${p}/oauth/callback`;c.push({section:"Routes",status:"success",message:"OAuth callback URL",details:f});const b=c.filter(N=>N.status==="error").length,w=c.filter(N=>N.status==="warning").length,g=c.filter(N=>N.status==="success").length;c.push({section:"Summary",status:b>0?"error":w>0?"warning":"success",message:"Diagnostics complete",details:` ${g} passed,  ${w} warnings,  ${b} errors`}),r([...c]),t(!1),b===0&&w===0?$.success("All diagnostics passed!"):b>0?$.error(`Found ${b} critical issues`):$.warning(`Found ${w} warnings`)},i=()=>{const c=n.map(d=>`[${d.status.toUpperCase()}] ${d.section}: ${d.message}${d.details?`
  Details: ${d.details}`:""}`).join(`

`);navigator.clipboard.writeText(c),$.success("Debug info copied to clipboard")},o=c=>{switch(c){case"success":return s.jsx(He,{className:"w-4 h-4 text-green-500"});case"error":return s.jsx(Vt,{className:"w-4 h-4 text-red-500"});case"warning":return s.jsx(oa,{className:"w-4 h-4 text-yellow-500"});default:return s.jsx(Qn,{className:"w-4 h-4 text-blue-500"})}},l=c=>{switch(c){case"success":return"text-green-400";case"error":return"text-red-400";case"warning":return"text-yellow-400";default:return"text-blue-400"}};return s.jsxs(O,{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"w-5 h-5"}),"OAuth Diagnostics"]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Run comprehensive checks on your OAuth configuration"})]}),s.jsxs("div",{className:"flex gap-2",children:[n.length>0&&s.jsxs(C,{variant:"outline",size:"sm",onClick:i,children:[s.jsx(ar,{className:"w-4 h-4 mr-2"}),"Copy"]}),s.jsx(C,{onClick:a,disabled:e,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:e?s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"w-4 h-4 mr-2 animate-spin"}),"Running..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),"Run Diagnostics"]})})]})]}),n.length===0?s.jsxs($e,{children:[s.jsx(Qn,{className:"h-4 w-4"}),s.jsx(Be,{children:'Click "Run Diagnostics" to check your OAuth configuration, backend health, and environment setup. This will help identify any issues before testing individual platforms.'})]}):s.jsx(Ws,{className:"h-[500px] w-full rounded border bg-black/20 p-4",children:s.jsx("div",{className:"space-y-3 font-mono text-sm",children:n.map((c,d)=>s.jsx("div",{className:"p-3 rounded border border-border/50 hover:border-border bg-background/50",children:s.jsxs("div",{className:"flex items-start gap-2",children:[o(c.status),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("div",{className:"flex items-start justify-between gap-2 mb-1",children:s.jsx("span",{className:"text-xs text-muted-foreground",children:c.section})}),s.jsx("div",{className:`mb-1 ${l(c.status)}`,children:c.message}),c.details&&s.jsx("div",{className:"text-xs text-muted-foreground mt-1 pl-4 border-l-2 border-border/50",children:c.details})]})]})},d))})}),n.length>0&&n.some(c=>c.status==="error"||c.status==="warning")&&s.jsx("div",{className:"mt-4",children:s.jsxs($e,{children:[s.jsx(oa,{className:"h-4 w-4"}),s.jsxs(Be,{children:[s.jsx("strong",{children:"Issues detected."})," Common fixes:",s.jsxs("ul",{className:"list-disc list-inside mt-2 text-sm space-y-1",children:[n.some(c=>c.message.includes("not authenticated"))&&s.jsx("li",{children:"Sign in to your account"}),n.some(c=>c.message.includes("not configured"))&&s.jsx("li",{children:"Add OAuth credentials to Supabase environment variables"}),n.some(c=>c.message.includes("Backend"))&&s.jsx("li",{children:"Check if Supabase Edge Functions are deployed"}),n.some(c=>c.message.includes("HTTPS"))&&s.jsx("li",{children:"Ensure FRONTEND_URL uses HTTPS in production"})]})]})]})})]})}function xx(){return s.jsxs(Et,{children:[s.jsx(Wd,{asChild:!0,children:s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(Nd,{className:"w-4 h-4 mr-2"}),"Quick Help"]})}),s.jsxs(Tt,{className:"max-w-3xl max-h-[80vh]",children:[s.jsxs(zt,{children:[s.jsx(Ut,{children:"OAuth Testing Quick Help"}),s.jsx(Ht,{children:"Common issues, quick fixes, and helpful tips for OAuth testing"})]}),s.jsxs(nn,{defaultValue:"quickstart",className:"w-full",children:[s.jsxs(rn,{className:"grid w-full grid-cols-3",children:[s.jsx(De,{value:"quickstart",children:"Quick Start"}),s.jsx(De,{value:"issues",children:"Common Issues"}),s.jsx(De,{value:"tips",children:"Pro Tips"})]}),s.jsxs(Ws,{className:"h-[500px] mt-4",children:[s.jsxs(Ge,{value:"quickstart",className:"space-y-4 pr-4",children:[s.jsxs(O,{className:"p-4 bg-emerald-500/10 border-emerald-500/20",children:[s.jsxs("h4",{className:"mb-3 text-emerald-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Getting Started (3 Steps)"]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center text-sm",children:"1"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium mb-1",children:"Run Diagnostics"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Click "Run Diagnostics" at the top to check your setup'})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center text-sm",children:"2"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium mb-1",children:"Fix Any Issues"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Follow suggestions to resolve configuration problems"})]})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-6 h-6 rounded-full bg-emerald-500 text-white flex items-center justify-center text-sm",children:"3"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium mb-1",children:"Test a Platform"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Select a platform tab and click "Test OAuth Flow"'})]})]})]})]}),s.jsxs(O,{className:"p-4",children:[s.jsx("h4",{className:"mb-3",children:"Platform Testing Order"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Test platforms in this order (easiest to hardest):"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"1"}),s.jsx("span",{children:"Twitter/X - Most straightforward OAuth 2.0"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"2"}),s.jsx("span",{children:"LinkedIn - Similar to Twitter"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"3"}),s.jsx("span",{children:"Reddit - Simpler API"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"4"}),s.jsx("span",{children:"Facebook - More complex setup"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"5"}),s.jsx("span",{children:"Instagram - Requires Facebook"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"6"}),s.jsx("span",{children:"YouTube - Requires Google Cloud"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"7"}),s.jsx("span",{children:"Pinterest - Requires app approval"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(J,{variant:"outline",className:"w-6 justify-center",children:"8"}),s.jsx("span",{children:"TikTok - Requires production approval"})]})]})]}),s.jsxs(O,{className:"p-4",children:[s.jsx("h4",{className:"mb-3",children:"Environment Variables Template"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add these to Supabase  Settings  Edge Functions:"}),s.jsxs("div",{className:"bg-black/20 rounded p-3 font-mono text-xs space-y-1",children:[s.jsx("div",{className:"text-muted-foreground",children:"# Frontend URL"}),s.jsx("div",{children:"FRONTEND_URL=https://pubhub.dev"}),s.jsx("div",{className:"text-muted-foreground mt-2",children:"# Platform Credentials"}),s.jsx("div",{children:"TWITTER_CLIENT_ID=your_client_id"}),s.jsx("div",{children:"TWITTER_CLIENT_SECRET=your_client_secret"}),s.jsx("div",{children:"TWITTER_REDIRECT_URI=https://pubhub.dev/api/oauth/callback/twitter"}),s.jsx("div",{className:"text-muted-foreground mt-2",children:"# Repeat for each platform..."})]})]})]}),s.jsxs(Ge,{value:"issues",className:"space-y-4 pr-4",children:[s.jsxs(O,{className:"p-4 border-red-500/20 bg-red-500/5",children:[s.jsxs("h4",{className:"mb-3 text-red-400 flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),'"Environment variables not configured"']}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"This means OAuth credentials are missing."}),s.jsx("p",{className:"font-medium",children:"Fix:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"Go to Supabase Dashboard"}),s.jsx("li",{children:"Navigate to Project Settings  Edge Functions"}),s.jsx("li",{children:"Add the required CLIENT_ID and CLIENT_SECRET"}),s.jsx("li",{children:"Redeploy the edge function"}),s.jsx("li",{children:'Click "Refresh All" in OAuth Tester'})]})]})]}),s.jsxs(O,{className:"p-4 border-red-500/20 bg-red-500/5",children:[s.jsxs("h4",{className:"mb-3 text-red-400 flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),'"Invalid redirect URI"']}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"The redirect URI doesn't match the platform's settings."}),s.jsx("p",{className:"font-medium",children:"Fix:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"Check FRONTEND_URL is set correctly"}),s.jsx("li",{children:"Verify redirect URI in platform's developer console"}),s.jsx("li",{children:"Ensure exact match (including https://)"}),s.jsx("li",{children:"Update platform settings if needed"})]})]})]}),s.jsxs(O,{className:"p-4 border-yellow-500/20 bg-yellow-500/5",children:[s.jsxs("h4",{className:"mb-3 text-yellow-400 flex items-center gap-2",children:[s.jsx(oa,{className:"w-5 h-5"}),'"Failed to fetch user info"']}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"Usually a non-critical warning."}),s.jsx("p",{className:"font-medium",children:"Fix (optional):"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"Check platform API permissions in dev console"}),s.jsx("li",{children:"Verify required scopes are enabled"}),s.jsx("li",{children:"Connection may still work for posting"}),s.jsx("li",{children:"This often doesn't require fixing"})]})]})]}),s.jsxs(O,{className:"p-4 border-red-500/20 bg-red-500/5",children:[s.jsxs("h4",{className:"mb-3 text-red-400 flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),'"Token exchange failed"']}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"The OAuth code couldn't be exchanged for a token."}),s.jsx("p",{className:"font-medium",children:"Fix:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"Verify CLIENT_ID and CLIENT_SECRET are correct"}),s.jsx("li",{children:"Check if platform API is operational"}),s.jsx("li",{children:"Review backend logs for detailed error"}),s.jsx("li",{children:"Ensure redirect_uri matches exactly"})]})]})]}),s.jsxs(O,{className:"p-4 border-red-500/20 bg-red-500/5",children:[s.jsxs("h4",{className:"mb-3 text-red-400 flex items-center gap-2",children:[s.jsx(Vt,{className:"w-5 h-5"}),'"Invalid state" or "State mismatch"']}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"CSRF protection state doesn't match."}),s.jsx("p",{className:"font-medium",children:"Fix:"}),s.jsxs("ol",{className:"list-decimal list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"Clear browser sessionStorage"}),s.jsx("li",{children:"Try the OAuth flow again"}),s.jsx("li",{children:"Enable cookies if disabled"}),s.jsx("li",{children:"Check if backend state storage is working"})]})]})]})]}),s.jsxs(Ge,{value:"tips",className:"space-y-4 pr-4",children:[s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Use Diagnostics First"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:'Always run "Run Diagnostics" before testing individual platforms. It automatically checks your configuration and shows exactly what needs fixing.'})]}),s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Copy Logs Before Making Changes"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:`Click "Copy" to save logs before trying fixes. This helps you track what worked and what didn't. You can paste them in a text file for reference.`})]}),s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Test in Incognito Mode"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Use incognito/private browsing for a clean OAuth flow test. This eliminates issues from cached credentials or cookies."})]}),s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Check Backend Logs"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"For detailed errors, check Supabase Dashboard  Edge Functions  Logs. Backend logs show the full error messages from OAuth providers."})]}),s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Use Browser Dev Tools"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Open browser developer tools (F12) and check the Network tab to see all API requests. Look for failed requests or unexpected redirects."})]}),s.jsxs(O,{className:"p-4 bg-blue-500/10 border-blue-500/20",children:[s.jsxs("h4",{className:"mb-3 text-blue-400 flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5"}),"Verify Platform Settings"]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep the platform's developer console open in another tab. Verify your app settings, redirect URIs, and permissions while testing."})]}),s.jsxs(O,{className:"p-4 bg-purple-500/10 border-purple-500/20",children:[s.jsxs("h4",{className:"mb-3 text-purple-400 flex items-center gap-2",children:[s.jsx(ot,{className:"w-5 h-5"}),"Documentation Available"]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"text-muted-foreground",children:"Comprehensive guides are available:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-muted-foreground ml-2",children:[s.jsx("li",{children:"OAUTH_QUICK_START.md - Fast setup"}),s.jsx("li",{children:"OAUTH_TESTING_GUIDE.md - Detailed guide"}),s.jsx("li",{children:"OAUTH_TESTING_CHECKLIST.md - Step-by-step"}),s.jsx("li",{children:"OAUTH_SETUP.md - Platform setup"})]})]})]})]})]})]}),s.jsx("div",{className:"flex gap-2 mt-4",children:s.jsxs(C,{variant:"outline",className:"flex-1",onClick:()=>window.open("https://developer.twitter.com","_blank"),children:[s.jsx(ws,{className:"w-4 h-4 mr-2"}),"Platform Docs"]})})]})]})}function bx(){const{currentProject:e}=At(),[t,n]=v.useState("twitter"),[r,a]=v.useState({twitter:{platform:"twitter",name:"Twitter/X",status:"idle",logs:[]},instagram:{platform:"instagram",name:"Instagram",status:"idle",logs:[]},linkedin:{platform:"linkedin",name:"LinkedIn",status:"idle",logs:[]},facebook:{platform:"facebook",name:"Facebook",status:"idle",logs:[]},youtube:{platform:"youtube",name:"YouTube",status:"idle",logs:[]},tiktok:{platform:"tiktok",name:"TikTok",status:"idle",logs:[]},pinterest:{platform:"pinterest",name:"Pinterest",status:"idle",logs:[]},reddit:{platform:"reddit",name:"Reddit",status:"idle",logs:[]}}),[i,o]=v.useState([]),[l,c]=v.useState({}),[d,m]=v.useState(!0);v.useEffect(()=>{e&&(h(),p())},[e?.id]);const u=(y,j,_,T)=>{a(k=>({...k,[y]:{...k[y],logs:[...k[y].logs,{timestamp:new Date().toISOString(),type:j,message:_,details:T}]}}))},h=async()=>{if(e)try{m(!0);const{connections:y}=await ir.getAll(e.id);o(y||[]),a(j=>{const _={...j};return y?.forEach(T=>{_[T.platform]&&(_[T.platform].connection=T,_[T.platform].status=T.connected?"success":"idle")}),_})}catch(y){console.error("Failed to load connections:",y),$.error("Failed to load connections")}finally{m(!1)}},p=async()=>{const y=["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit"];for(const j of y)try{const _=it(),T=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/oauth/authorize/${j}?projectId=test`,{headers:{Authorization:`Bearer ${_}`}}),k=await T.json();T.ok?c(S=>({...S,[j]:!0})):(c(S=>({...S,[j]:!1})),k.error?.includes("not configured")&&u(j,"warning","Environment variables not configured",k.error))}catch{c(T=>({...T,[j]:!1}))}},f=async y=>{if(!e){$.error("No project selected");return}a(j=>({...j,[y]:{...j[y],status:"testing",logs:[]}})),u(y,"info",`Starting OAuth flow test for ${r[y].name}...`);try{u(y,"info","Checking environment variables...");const j=it();if(!j)throw new Error("Not authenticated. Please sign in first.");u(y,"success","User authenticated"),u(y,"info","Requesting authorization URL...");const _=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/oauth/authorize/${y}?projectId=${e.id}`,{headers:{Authorization:`Bearer ${j}`}}),T=await _.json();if(!_.ok)throw new Error(T.error||"Failed to get authorization URL");u(y,"success","Authorization URL generated",{url:T.authUrl,state:T.state}),u(y,"info","Storing OAuth state in sessionStorage..."),sessionStorage.setItem("oauth_state",T.state),sessionStorage.setItem("oauth_platform",y),sessionStorage.setItem("oauth_project_id",e.id),u(y,"success","OAuth state stored"),u(y,"info",`Redirecting to ${r[y].name} authorization page...`),$.info(`Redirecting to ${r[y].name}...`,{description:"You will be asked to authorize PubHub"}),setTimeout(()=>{window.location.href=T.authUrl},1500)}catch(j){console.error(`OAuth test failed for ${y}:`,j),u(y,"error",j.message||"OAuth flow failed",j),a(_=>({..._,[y]:{..._[y],status:"error",error:j.message}})),$.error(`OAuth test failed: ${j.message}`)}},b=async y=>{if(!e){$.error("No project selected");return}a(j=>({...j,[y]:{...j[y],status:"testing"}})),u(y,"info","Testing disconnect flow...");try{const j=it(),_=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/oauth/disconnect`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${j}`},body:JSON.stringify({platform:y,projectId:e.id})}),T=await _.json();if(!_.ok)throw new Error(T.error||"Disconnect failed");u(y,"success","Disconnect successful"),a(k=>({...k,[y]:{...k[y],status:"idle",connection:null}})),await h(),$.success(`${r[y].name} disconnected`)}catch(j){console.error(`Disconnect failed for ${y}:`,j),u(y,"error",j.message||"Disconnect failed"),a(_=>({..._,[y]:{..._[y],status:"error",error:j.message}})),$.error(`Disconnect failed: ${j.message}`)}},w=y=>{a(j=>({...j,[y]:{...j[y],logs:[]}}))},g=y=>{const j=r[y].logs.map(_=>`[${_.timestamp}] ${_.type.toUpperCase()}: ${_.message}`).join(`
`);navigator.clipboard.writeText(j),$.success("Logs copied to clipboard")},N=y=>{switch(y){case"success":return s.jsx(He,{className:"w-5 h-5 text-green-500"});case"error":return s.jsx(Vt,{className:"w-5 h-5 text-red-500"});case"testing":return s.jsx(Pe,{className:"w-5 h-5 text-blue-500 animate-spin"});default:return s.jsx($t,{className:"w-5 h-5 text-gray-500"})}},E=y=>{switch(y){case"success":return s.jsx(He,{className:"w-4 h-4 text-green-500"});case"error":return s.jsx(Vt,{className:"w-4 h-4 text-red-500"});case"warning":return s.jsx($t,{className:"w-4 h-4 text-yellow-500"});default:return s.jsx(Qn,{className:"w-4 h-4 text-blue-500"})}},A=["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit"];return d?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(Pe,{className:"w-8 h-8 animate-spin text-emerald-500"})}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(gx,{}),s.jsx(O,{className:"p-6 bg-gradient-to-br from-blue-500/10 to-purple-500/10 border-blue-500/20",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"p-2 bg-gradient-to-br from-blue-500 to-purple-600 rounded shadow-lg",children:s.jsx(_s,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"mb-1 text-blue-400",children:"OAuth Testing & Debugging"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Test OAuth flows for each platform, view detailed logs, and debug connection issues. Each test will walk through the complete OAuth flow and show you exactly what's happening."}),s.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-4 h-4 text-green-500"}),s.jsxs("span",{className:"text-muted-foreground",children:[A.filter(y=>r[y].status==="success").length," Connected"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx($t,{className:"w-4 h-4 text-yellow-500"}),s.jsxs("span",{className:"text-muted-foreground",children:[A.filter(y=>l[y]===!1).length," Missing Credentials"]})]})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(xx,{}),s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>{h(),p()},children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),"Refresh All"]})]})]})}),s.jsx(O,{className:"p-6",children:s.jsxs(nn,{value:t,onValueChange:y=>n(y),children:[s.jsx(rn,{className:"grid grid-cols-4 lg:grid-cols-8 mb-6",children:A.map(y=>s.jsxs(De,{value:y,className:"relative",children:[s.jsx(pe,{platform:y,className:"w-4 h-4 mr-1",size:16}),s.jsx("span",{className:"hidden md:inline",children:r[y].name}),r[y].status!=="idle"&&s.jsx("span",{className:"absolute -top-1 -right-1",children:N(r[y].status)})]},y))}),A.map(y=>{const j=r[y],_=l[y]!==!1;return s.jsxs(Ge,{value:y,className:"space-y-4",children:[s.jsxs(O,{className:"p-4 bg-gradient-to-br from-emerald-500/5 to-teal-500/5",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pe,{platform:y,className:"w-8 h-8",size:32}),s.jsxs("div",{children:[s.jsxs("h4",{className:"flex items-center gap-2",children:[j.name,j.connection?.connected&&s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(He,{className:"w-3 h-3 text-green-500"}),"Connected"]})]}),j.connection?.username&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["@",j.connection.username]})]})]}),N(j.status)]}),s.jsxs("div",{className:"mb-4 p-3 bg-background rounded border",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Qp,{className:"w-4 h-4"}),s.jsx("span",{className:"text-sm",children:"Environment Variables"})]}),_?s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(He,{className:"w-3 h-3 text-green-500"}),"Configured"]}):s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(Vt,{className:"w-3 h-3 text-red-500"}),"Missing"]})]}),!_&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Required: ",y.toUpperCase(),"_CLIENT_ID and ",y.toUpperCase(),"_CLIENT_SECRET"]})]}),s.jsx("div",{className:"flex gap-2",children:j.connection?.connected?s.jsxs(s.Fragment,{children:[s.jsxs(C,{variant:"outline",className:"flex-1",onClick:()=>f(y),disabled:j.status==="testing",children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),"Reconnect"]}),s.jsxs(C,{variant:"outline",onClick:()=>b(y),disabled:j.status==="testing",className:"border-red-500/30 text-red-500 hover:bg-red-500/10",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Disconnect"]})]}):s.jsx(C,{className:"flex-1 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",onClick:()=>f(y),disabled:j.status==="testing"||!_,children:j.status==="testing"?s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}),"Testing..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Zp,{className:"w-4 h-4 mr-2"}),"Test OAuth Flow"]})})})]}),s.jsxs(O,{className:"p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h4",{className:"flex items-center gap-2",children:[s.jsx(Qn,{className:"w-4 h-4"}),"Test Logs",j.logs.length>0&&s.jsx(J,{variant:"outline",children:j.logs.length})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>g(y),disabled:j.logs.length===0,children:[s.jsx(ar,{className:"w-3 h-3 mr-1"}),"Copy"]}),s.jsxs(C,{variant:"outline",size:"sm",onClick:()=>w(y),disabled:j.logs.length===0,children:[s.jsx(Xt,{className:"w-3 h-3 mr-1"}),"Clear"]})]})]}),s.jsx(Ws,{className:"h-[400px] w-full rounded border bg-black/20 p-3",children:j.logs.length===0?s.jsx("div",{className:"flex items-center justify-center h-full text-muted-foreground text-sm",children:'No logs yet. Click "Test OAuth Flow" to start testing.'}):s.jsx("div",{className:"space-y-2 font-mono text-xs",children:j.logs.map((T,k)=>s.jsxs("div",{className:"flex items-start gap-2 p-2 rounded hover:bg-background/50",children:[E(T.type),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2",children:[s.jsx("span",{className:T.type==="error"?"text-red-400":T.type==="success"?"text-green-400":T.type==="warning"?"text-yellow-400":"text-blue-400",children:T.message}),s.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:new Date(T.timestamp).toLocaleTimeString()})]}),T.details&&s.jsx("pre",{className:"mt-1 text-xs text-muted-foreground overflow-x-auto",children:JSON.stringify(T.details,null,2)})]})]},k))})})]}),s.jsxs(O,{className:"p-4 bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:[s.jsxs("h4",{className:"mb-2 text-purple-400 flex items-center gap-2",children:[s.jsx(ws,{className:"w-4 h-4"}),"Platform Documentation"]}),s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Need help setting up OAuth credentials? Check the official documentation:"}),s.jsxs(C,{variant:"outline",size:"sm",className:"w-full",onClick:()=>{const T={twitter:"https://developer.twitter.com/en/docs/authentication/oauth-2-0",instagram:"https://developers.facebook.com/docs/instagram-basic-display-api",linkedin:"https://learn.microsoft.com/en-us/linkedin/shared/authentication/authentication",facebook:"https://developers.facebook.com/docs/facebook-login",youtube:"https://developers.google.com/youtube/v3/guides/auth/server-side-web-apps",tiktok:"https://developers.tiktok.com/doc/login-kit-web",pinterest:"https://developers.pinterest.com/docs/getting-started/authentication/",reddit:"https://github.com/reddit-archive/reddit/wiki/OAuth2"};window.open(T[y],"_blank")},children:[s.jsx(ws,{className:"w-4 h-4 mr-2"}),"View ",j.name," OAuth Documentation"]})]})]},y)})]})}),s.jsxs(O,{className:"p-4 bg-gradient-to-br from-emerald-500/10 to-teal-500/10 border-emerald-500/20",children:[s.jsx("h4",{className:"mb-3 text-emerald-400",children:"Quick Actions"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[s.jsxs(C,{variant:"outline",onClick:()=>{A.forEach(y=>w(y)),$.success("All logs cleared")},children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Clear All Logs"]}),s.jsxs(C,{variant:"outline",onClick:()=>{const y=A.map(j=>{const _=r[j].logs;return _.length===0?null:`
=== ${r[j].name} ===
${_.map(T=>`[${T.timestamp}] ${T.type.toUpperCase()}: ${T.message}`).join(`
`)}`}).filter(Boolean).join(`

`);navigator.clipboard.writeText(y),$.success("All logs copied to clipboard")},children:[s.jsx(ar,{className:"w-4 h-4 mr-2"}),"Copy All Logs"]}),s.jsxs(C,{variant:"outline",onClick:()=>{h(),p(),$.success("Status refreshed")},children:[s.jsx(ns,{className:"w-4 h-4 mr-2"}),"Refresh Status"]})]})]})]})}function yx({initialTab:e="details"}){const[t,n]=v.useState(e);return v.useEffect(()=>{n(e)},[e]),s.jsxs("div",{className:"h-full flex flex-col",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-border/50",children:[s.jsx("h2",{className:"text-emerald-400",children:"Project Settings"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure settings for the current project"})]}),s.jsxs(nn,{value:t,onValueChange:r=>n(r),className:"flex-1 flex flex-col",children:[s.jsx("div",{className:"px-6 pt-4",children:s.jsxs(rn,{className:"w-full grid grid-cols-5 bg-muted/50",children:[s.jsxs(De,{value:"details",className:"gap-2",children:[s.jsx(_s,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Details"})]}),s.jsxs(De,{value:"connections",className:"gap-2",children:[s.jsx(Us,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Connections"})]}),s.jsxs(De,{value:"oauth-test",className:"gap-2",children:[s.jsx(ef,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"OAuth Test"})]}),s.jsxs(De,{value:"automation",className:"gap-2",children:[s.jsx(po,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Automation"})]}),s.jsxs(De,{value:"templates",className:"gap-2",children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Templates"})]})]})}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-6",children:[s.jsx(Ge,{value:"details",className:"mt-0",children:s.jsx(px,{})}),s.jsx(Ge,{value:"connections",className:"mt-0",children:s.jsx(cx,{})}),s.jsx(Ge,{value:"oauth-test",className:"mt-0",children:s.jsx(bx,{})}),s.jsx(Ge,{value:"automation",className:"mt-0",children:s.jsx(dx,{})}),s.jsx(Ge,{value:"templates",className:"mt-0",children:s.jsx(hx,{})})]})]})]})}function vx({selectedPlatform:e="all",onRemix:t}){const[n,r]=v.useState(""),[a,i]=v.useState("recent"),[o,l]=v.useState([]),d=[...o.filter(f=>{const b=e==="all"||o.platform===e,w=o.title.toLowerCase().includes(n.toLowerCase())||o.description.toLowerCase().includes(n.toLowerCase());return b&&w})].sort((f,b)=>{switch(a){case"views":return b.views-f.views;case"engagement":return b.likes+b.comments-(f.likes+f.comments);case"recent":default:return new Date(b.publishedAt).getTime()-new Date(f.publishedAt).getTime()}}),m=f=>f>=1e6?`${(f/1e6).toFixed(1)}M`:f>=1e3?`${(f/1e3).toFixed(1)}K`:f.toString(),u=f=>{const b=new Date(f),g=Math.abs(new Date().getTime()-b.getTime()),N=Math.ceil(g/(1e3*60*60*24));return N===0?"Today":N===1?"Yesterday":N<7?`${N} days ago`:N<30?`${Math.floor(N/7)} weeks ago`:b.toLocaleDateString()},h=f=>{t&&t({id:f.id,platform:f.platform,title:f.title,description:f.description,thumbnail:f.thumbnail,type:f.type})},p=f=>{switch(f){case"new":return"bg-blue-500/10 text-blue-400 border-blue-500/20";case"processed":return"bg-green-500/10 text-green-400 border-green-500/20";case"scheduled":return"bg-purple-500/10 text-purple-400 border-purple-500/20";default:return"bg-muted text-muted-foreground"}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{children:"Remix"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Remix your content from any platform into new formats with AI assistance"})]}),s.jsx(O,{children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(jn,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(ke,{placeholder:"Search content...",value:n,onChange:f=>r(f.target.value),className:"pl-9"})]}),s.jsxs(yt,{value:a,onValueChange:f=>i(f),children:[s.jsx(jt,{className:"w-full md:w-[180px]",children:s.jsx(vt,{})}),s.jsxs(wt,{children:[s.jsx(qe,{value:"recent",children:"Most Recent"}),s.jsx(qe,{value:"views",children:"Most Views"}),s.jsx(qe,{value:"engagement",children:"Most Engagement"})]})]})]})})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:d.map(f=>{const b=f.type==="video"&&f.duration?Gf({platform:f.platform,duration:f.duration,title:f.title,description:f.description}):[];return s.jsxs(O,{className:"group overflow-hidden hover:border-primary/50 transition-all",children:[s.jsx(Je,{className:"p-0",children:s.jsxs("div",{className:"relative aspect-video overflow-hidden bg-muted",children:[s.jsx(yo,{src:f.thumbnail,alt:f.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),s.jsxs("div",{className:"absolute top-3 left-3 flex gap-2 flex-wrap max-w-[calc(100%-4rem)]",children:[s.jsxs(J,{className:p(f.status),children:[f.status==="new"&&"New",f.status==="processed"&&"Processed",f.status==="scheduled"&&"Scheduled"]}),f.hasTranscript&&s.jsxs(J,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20",children:[s.jsx(ot,{className:"w-3 h-3 mr-1"}),"Transcript"]}),b.length>0&&s.jsxs(J,{className:"bg-yellow-500/10 text-yellow-400 border-yellow-500/20",children:[s.jsx(Jt,{className:"w-3 h-3 mr-1"}),"Auto"]})]}),s.jsx("div",{className:"absolute top-3 right-3",children:s.jsx(pe,{platform:f.platform,className:"w-6 h-6"})}),f.duration&&s.jsx("div",{className:"absolute bottom-3 right-3",children:s.jsx(J,{variant:"secondary",className:"bg-black/80 backdrop-blur-sm",children:f.duration})})]})}),s.jsxs(ge,{className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"line-clamp-2 group-hover:text-primary transition-colors",children:f.title}),s.jsx("p",{className:"text-muted-foreground text-sm mt-1 line-clamp-2",children:f.description})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(wn,{className:"w-4 h-4"}),s.jsx("span",{children:m(f.views)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ed,{className:"w-4 h-4"}),s.jsx("span",{children:m(f.likes)})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(vn,{className:"w-4 h-4"}),s.jsx("span",{children:m(f.comments)})]})]}),b.length>0&&s.jsxs("div",{className:"text-xs text-yellow-400 bg-yellow-500/5 border border-yellow-500/20 rounded p-2",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsx(Jt,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Will auto-remix to:"})]}),s.jsx("div",{className:"space-y-1",children:b.map((w,g)=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-yellow-300",children:Ra(w.transformation)}),w.transformationInstructions&&s.jsx(J,{variant:"outline",className:"text-xs bg-purple-500/10 text-purple-400 border-purple-500/30",children:"Custom"})]},g))})]}),s.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border",children:[s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Ks,{className:"w-3 h-3"}),s.jsx("span",{children:u(f.publishedAt)})]}),s.jsxs(C,{size:"sm",onClick:()=>h(f),className:"gap-1",children:[s.jsx(ve,{className:"w-4 h-4"}),"Remix"]})]})]})]},f.id)})}),d.length===0&&s.jsx(O,{children:s.jsxs(ge,{className:"p-12 text-center",children:[s.jsx(Jn,{className:"w-12 h-12 mx-auto text-muted-foreground/50 mb-4"}),s.jsx("h3",{children:"No content found"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Try adjusting your search query or select a different platform"})]})})]})}function jx({onOpenSettings:e}){const[t,n]=v.useState([]),[r,a]=v.useState("all"),[i,o]=v.useState(!1),[l,c]=v.useState(null),d=t.filter(g=>!g.read).length,m=t.filter(g=>r==="all"?!0:r==="unread"?!g.read:r==="comments"?g.type==="comment":r==="mentions"?g.type==="mention":r==="engagement"?["like","share","follower"].includes(g.type):r==="system"?g.type==="system"||g.type==="post":!0),u=g=>{n(t.map(N=>N.id===g?{...N,read:!0}:N))},h=()=>{n(t.map(g=>({...g,read:!0}))),$.success("All notifications marked as read")},p=g=>{c(g),o(!0)},f=()=>{c("all"),o(!0)},b=()=>{l==="all"?(n([]),$.success("All notifications cleared")):l&&(n(t.filter(g=>g.id!==l)),$.success("Notification deleted")),c(null)},w=g=>{switch(g){case"comment":return"";case"mention":return"";case"like":return"";case"share":return"";case"follower":return"";case"post":return"";case"system":return"";default:return""}};return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"flex items-center gap-2",children:[s.jsx(kn,{className:"w-6 h-6"}),"Notifications",d>0&&s.jsxs(J,{variant:"destructive",className:"ml-2",children:[d," new"]})]}),s.jsx("p",{className:"text-muted-foreground mt-1",children:"Stay updated with all your platform activities"})]}),s.jsxs("div",{className:"flex gap-2",children:[t.length>0&&s.jsxs(C,{variant:"outline",onClick:f,children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Clear all"]}),d>0&&s.jsxs(C,{variant:"outline",onClick:h,children:[s.jsx(Xe,{className:"w-4 h-4 mr-2"}),"Mark all as read"]}),e&&s.jsxs(C,{variant:"outline",onClick:e,children:[s.jsx(_s,{className:"w-4 h-4 mr-2"}),"Settings"]})]})]}),s.jsx(nn,{value:r,onValueChange:g=>a(g),children:s.jsxs(rn,{children:[s.jsxs(De,{value:"all",children:["All (",t.length,")"]}),s.jsxs(De,{value:"unread",children:["Unread (",d,")"]}),s.jsx(De,{value:"comments",children:"Comments"}),s.jsx(De,{value:"mentions",children:"Mentions"}),s.jsx(De,{value:"engagement",children:"Engagement"}),s.jsx(De,{value:"system",children:"System"})]})}),s.jsx("div",{className:"space-y-2",children:m.length===0?s.jsxs(O,{className:"p-12 text-center",children:[s.jsx(kn,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("h3",{className:"text-muted-foreground",children:"No notifications"}),s.jsx("p",{className:"text-muted-foreground mt-1",children:r==="unread"?"You're all caught up!":"You don't have any notifications in this category"})]}):m.map(g=>s.jsx(O,{className:`p-4 transition-all hover:shadow-md ${g.read?"":"bg-accent/50 border-l-4 border-l-primary"}`,children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center gap-2",children:[s.jsx("div",{className:"text-2xl",children:w(g.type)}),g.platform!=="all"&&s.jsx(pe,{platform:g.platform,className:"w-4 h-4"})]}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between gap-4",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:g.read?"text-muted-foreground":"",children:g.title}),s.jsx("p",{className:"text-muted-foreground mt-1",children:g.message}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:g.time})]}),s.jsxs("div",{className:"flex gap-1",children:[!g.read&&s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>u(g.id),title:"Mark as read",children:s.jsx(Xe,{className:"w-4 h-4"})}),s.jsx(C,{variant:"ghost",size:"icon",onClick:()=>p(g.id),title:"Delete",children:s.jsx(Xt,{className:"w-4 h-4"})})]})]})})]})},g.id))}),s.jsx(gr,{open:i,onOpenChange:o,title:l==="all"?"Clear all notifications?":"Delete notification?",description:l==="all"?"This will permanently delete all notifications. This action cannot be undone.":"This notification will be permanently deleted. This action cannot be undone.",confirmText:"Delete",onConfirm:b,variant:"destructive"})]})}function wx({className:e,value:t,...n}){return s.jsx(_p,{"data-slot":"progress",className:G("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:s.jsx(kp,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}const Nx=["Fiction","Non-Fiction","Mystery","Romance","Science Fiction","Fantasy","Horror","Thriller","Biography","Self-Help","Business","History","Travel","Cookbook","Poetry","Children's","Young Adult","Other"],Sx={Fiction:["Literary","Historical","Contemporary","Adventure","Crime","Other"],"Non-Fiction":["Memoir","Essay","Journalism","Reference","Textbook","Other"],Mystery:["Cozy","Hard-boiled","Detective","Police Procedural","Noir","Other"],Romance:["Contemporary","Historical","Paranormal","Romantic Suspense","Other"],"Science Fiction":["Hard SF","Space Opera","Cyberpunk","Dystopian","Time Travel","Other"],Fantasy:["High Fantasy","Urban Fantasy","Dark Fantasy","Epic Fantasy","Other"],Horror:["Gothic","Psychological","Supernatural","Splatterpunk","Other"],Thriller:["Legal","Medical","Political","Psychological","Techno","Other"],Business:["Entrepreneurship","Marketing","Leadership","Finance","Management","Other"],"Self-Help":["Personal Development","Productivity","Relationships","Health","Spirituality","Other"]},_x=["Professional","Casual","Formal","Friendly","Inspirational","Humorous","Academic","Conversational","Authoritative","Empathetic","Motivational","Educational","Other"],kx=["Short (10-50 pages / 5,000-15,000 words)","Medium (50-150 pages / 15,000-50,000 words)","Long (150-300 pages / 50,000-100,000 words)","Epic (300+ pages / 100,000+ words)","Custom"],Ex=["General Adult","Young Adult (13-18)","Children (8-12)","Early Readers (5-7)","Professionals","Entrepreneurs","Students","Academics","Enthusiasts","Beginners","Advanced","Other"],Tx=["Descriptive","Narrative","Persuasive","Expository","Creative","Technical","Journalistic","Poetic","Minimalist","Verbose","Other"];function Cx(){const{currentProject:e}=At(),[t,n]=v.useState("details"),[r,a]=v.useState({title:"",description:"",genre:"",subGenre:"",tone:"",intendedLength:"",targetAudience:"",writingStyle:""}),[i,o]=v.useState(null),[l,c]=v.useState([]),[d,m]=v.useState(""),[u,h]=v.useState(!1),[p,f]=v.useState(null),[b,w]=v.useState(!1),[g,N]=v.useState(!1),[E,A]=v.useState(!1),[y,j]=v.useState(null),[_,T]=v.useState(null),[k,S]=v.useState([]);v.useEffect(()=>{D()},[e]);const D=async()=>{try{const x=it(),M=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/previous`,{headers:{Authorization:`Bearer ${x||xs}`}});if(M.ok){const X=await M.json();S(X.books||[])}}catch(x){console.error("Error loading previous books:",x)}},F=(x,M)=>{a(X=>({...X,[x]:M}))},q=()=>r.title.trim()!==""&&r.description.trim()!==""&&(r.genre!==""&&r.genre!=="Other"||r.customGenre)&&(r.subGenre!==""&&r.subGenre!=="Other"||r.customSubGenre)&&(r.tone!==""&&r.tone!=="Other"||r.customTone)&&(r.intendedLength!==""&&r.intendedLength!=="Custom"||r.customLength)&&(r.targetAudience!==""&&r.targetAudience!=="Other"||r.customAudience)&&(r.writingStyle!==""&&r.writingStyle!=="Other"||r.customStyle),te=async()=>{A(!0);try{const x=it(),M=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/suggestions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x||xs}`},body:JSON.stringify({currentDetails:r,projectNiche:e?.name||"",previousBooks:k})});if(!M.ok)throw new Error("Failed to get AI suggestions");const X=await M.json();a(le=>({...le,...X})),$.success("AI suggestions applied!")}catch(x){console.error("Error getting AI suggestions:",x),$.error("Failed to get AI suggestions")}finally{A(!1)}},I=async()=>{if(!q()){$.error("Please complete all fields before generating outline");return}h(!0);try{const x=it(),M=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/outline`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x||xs}`},body:JSON.stringify({bookDetails:r})});if(!M.ok)throw new Error("Failed to generate outline");const X=await M.json();o(X);const le=X.chapters.map(Q=>({...Q,content:"",isGenerated:!1}));c(le),n("outline"),$.success("Outline generated successfully!")}catch(x){console.error("Error generating outline:",x),$.error("Failed to generate outline")}finally{h(!1)}},P=async x=>{f(x);try{const M=l.find(Y=>Y.id===x);if(!M)return;const X=it(),le=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/chapter`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${X||xs}`},body:JSON.stringify({bookDetails:r,chapter:{title:M.title,description:M.description},previousChapters:l.filter(Y=>Y.isGenerated).map(Y=>({title:Y.title,content:Y.content.substring(0,500)}))})});if(!le.ok)throw new Error("Failed to generate chapter");const{content:Q,wordCount:Se}=await le.json();c(Y=>Y.map(B=>B.id===x?{...B,content:Q,wordCount:Se,isGenerated:!0}:B)),$.success(`Chapter "${M.title}" generated successfully!`)}catch(M){console.error("Error generating chapter:",M),$.error("Failed to generate chapter")}finally{f(null)}},R=async()=>{w(!0);try{for(let x=0;x<l.length;x++){const M=l[x];M.isGenerated||await P(M.id)}n("content"),$.success("All chapters generated successfully!")}catch(x){console.error("Error generating all chapters:",x),$.error("Failed to generate all chapters")}finally{w(!1)}},z=(x,M)=>{c(X=>X.map(le=>le.id===x?{...le,content:M,wordCount:M.split(/\s+/).length}:le))},U=async()=>{N(!0);try{const x=it(),M=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/cover`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${x||xs}`},body:JSON.stringify({title:r.title,genre:r.genre==="Other"?r.customGenre:r.genre,description:r.description})});if(!M.ok)throw new Error("Failed to generate cover art");const{imageUrl:X}=await M.json();m(X),n("cover"),$.success("Cover art generated successfully!")}catch(x){console.error("Error generating cover art:",x),$.error("Failed to generate cover art")}finally{N(!1)}},V=async x=>{try{const M=it(),X=await fetch(`https://${We}.supabase.co/functions/v1/make-server-19ccd85e/ebooks/export`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${M||xs}`},body:JSON.stringify({bookDetails:r,chapters:l,coverArtUrl:d,format:x})});if(!X.ok)throw new Error("Failed to export ebook");const le=await X.blob(),Q=window.URL.createObjectURL(le),Se=document.createElement("a");Se.href=Q,Se.download=`${r.title}.${x}`,document.body.appendChild(Se),Se.click(),window.URL.revokeObjectURL(Q),document.body.removeChild(Se),$.success(`Ebook exported as ${x.toUpperCase()}`)}catch(M){console.error("Error exporting ebook:",M),$.error("Failed to export ebook")}},ne=()=>{const x=["details","outline","content","cover","export"];return(x.indexOf(t)+1)/x.length*100},re=l.every(x=>x.isGenerated),K=l.filter(x=>x.isGenerated).length;return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl tracking-tight",children:"Ebook Generator"}),s.jsx("p",{className:"text-muted-foreground",children:"Create and export complete ebooks for Amazon KDP and more"})]}),s.jsxs(J,{variant:"outline",className:"gap-2",children:[s.jsx(Zn,{className:"w-4 h-4"}),k.length," Books Created"]})]}),s.jsx(O,{children:s.jsx(ge,{className:"pt-6",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Progress"}),s.jsxs("span",{children:[Math.round(ne()),"%"]})]}),s.jsx(wx,{value:ne(),className:"h-2"}),s.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[s.jsx("span",{className:t==="details"?"text-primary":"",children:"Details"}),s.jsx("span",{className:t==="outline"?"text-primary":"",children:"Outline"}),s.jsx("span",{className:t==="content"?"text-primary":"",children:"Content"}),s.jsx("span",{className:t==="cover"?"text-primary":"",children:"Cover"}),s.jsx("span",{className:t==="export"?"text-primary":"",children:"Export"})]})]})})}),s.jsxs(nn,{value:t,onValueChange:x=>n(x),children:[s.jsxs(rn,{className:"grid w-full grid-cols-5",children:[s.jsxs(De,{value:"details",disabled:!1,children:[s.jsx(ot,{className:"w-4 h-4 mr-2"}),"Details"]}),s.jsxs(De,{value:"outline",disabled:!i,children:[s.jsx(Zn,{className:"w-4 h-4 mr-2"}),"Outline"]}),s.jsxs(De,{value:"content",disabled:l.length===0,children:[s.jsx(Ka,{className:"w-4 h-4 mr-2"}),"Content"]}),s.jsxs(De,{value:"cover",disabled:!re,children:[s.jsx(Xn,{className:"w-4 h-4 mr-2"}),"Cover"]}),s.jsxs(De,{value:"export",disabled:!d,children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Export"]})]}),s.jsx(Ge,{value:"details",className:"space-y-6",children:s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsxs(Gt,{className:"flex items-center gap-2",children:[s.jsx(ot,{className:"w-5 h-5"}),"Book Details"]}),s.jsx(vs,{children:"Fill out the details for your ebook or use AI suggestions"})]}),s.jsxs(ge,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"title",children:"Title *"}),s.jsx(ke,{id:"title",placeholder:"Enter your book title",value:r.title,onChange:x=>F("title",x.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"description",children:"Description *"}),s.jsx(kt,{id:"description",placeholder:"Provide a brief description of your book",value:r.description,onChange:x=>F("description",x.target.value),rows:4})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"genre",children:"Genre *"}),s.jsxs(yt,{value:r.genre,onValueChange:x=>F("genre",x),children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select genre"})}),s.jsx(wt,{children:Nx.map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.genre==="Other"&&s.jsx(ke,{placeholder:"Enter custom genre",value:r.customGenre||"",onChange:x=>F("customGenre",x.target.value),className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"subGenre",children:"Sub-Genre *"}),s.jsxs(yt,{value:r.subGenre,onValueChange:x=>F("subGenre",x),disabled:!r.genre,children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select sub-genre"})}),s.jsx(wt,{children:(Sx[r.genre]||["Other"]).map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.subGenre==="Other"&&s.jsx(ke,{placeholder:"Enter custom sub-genre",value:r.customSubGenre||"",onChange:x=>F("customSubGenre",x.target.value),className:"mt-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"tone",children:"Tone *"}),s.jsxs(yt,{value:r.tone,onValueChange:x=>F("tone",x),children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select tone"})}),s.jsx(wt,{children:_x.map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.tone==="Other"&&s.jsx(ke,{placeholder:"Enter custom tone",value:r.customTone||"",onChange:x=>F("customTone",x.target.value),className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"length",children:"Intended Length *"}),s.jsxs(yt,{value:r.intendedLength,onValueChange:x=>F("intendedLength",x),children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select length"})}),s.jsx(wt,{children:kx.map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.intendedLength==="Custom"&&s.jsx(ke,{placeholder:"e.g., 200 pages / 75,000 words",value:r.customLength||"",onChange:x=>F("customLength",x.target.value),className:"mt-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"audience",children:"Target Audience *"}),s.jsxs(yt,{value:r.targetAudience,onValueChange:x=>F("targetAudience",x),children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select audience"})}),s.jsx(wt,{children:Ex.map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.targetAudience==="Other"&&s.jsx(ke,{placeholder:"Enter custom audience",value:r.customAudience||"",onChange:x=>F("customAudience",x.target.value),className:"mt-2"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"style",children:"Writing Style *"}),s.jsxs(yt,{value:r.writingStyle,onValueChange:x=>F("writingStyle",x),children:[s.jsx(jt,{children:s.jsx(vt,{placeholder:"Select style"})}),s.jsx(wt,{children:Tx.map(x=>s.jsx(qe,{value:x,children:x},x))})]}),r.writingStyle==="Other"&&s.jsx(ke,{placeholder:"Enter custom style",value:r.customStyle||"",onChange:x=>F("customStyle",x.target.value),className:"mt-2"})]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(C,{onClick:te,variant:"outline",disabled:E,className:"flex-1",children:[E?s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ve,{className:"w-4 h-4 mr-2"}),"AI Suggestions"]}),s.jsxs(C,{onClick:I,disabled:!q()||u,className:"flex-1",children:[u?s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ra,{className:"w-4 h-4 mr-2"}),"Generate Outline"]})]})]})]})}),s.jsx(Ge,{value:"outline",className:"space-y-6",children:s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsxs(Gt,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Zn,{className:"w-5 h-5"}),"Book Outline"]}),s.jsxs(J,{variant:"secondary",children:[i?.chapters.length||0," Chapters"]})]}),s.jsx(vs,{children:"Review and edit your book outline before generating content"})]}),s.jsx(ge,{className:"space-y-4",children:i&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"rounded-lg border p-4 bg-muted/50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:r.title}),s.jsxs(J,{children:["~",i.totalEstimatedWords.toLocaleString()," words"]})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.description})]}),s.jsx(Ws,{className:"h-[400px] pr-4",children:s.jsx("div",{className:"space-y-3",children:l.map((x,M)=>s.jsx(O,{className:x.isGenerated?"border-primary/50":"",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsxs(J,{variant:"outline",children:["Chapter ",M+1]}),x.isGenerated&&s.jsxs(J,{variant:"default",className:"gap-1",children:[s.jsx(Xe,{className:"w-3 h-3"}),"Generated"]})]}),s.jsx("h4",{className:"font-semibold",children:x.title}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x.description}),x.isGenerated&&s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:[x.wordCount.toLocaleString()," words"]})]}),s.jsx(C,{size:"sm",onClick:()=>P(x.id),disabled:p!==null||x.isGenerated,children:p===x.id?s.jsx(Pe,{className:"w-4 h-4 animate-spin"}):x.isGenerated?s.jsx(Xe,{className:"w-4 h-4"}):s.jsx(ve,{className:"w-4 h-4"})})]})})},x.id))})}),s.jsx(ss,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(C,{variant:"outline",onClick:()=>n("details"),className:"flex-1",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Back to Details"]}),s.jsxs(C,{onClick:R,disabled:b||re,className:"flex-1",children:[b?s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ra,{className:"w-4 h-4 mr-2"}),re?"All Chapters Generated":"Generate All Chapters"]}),re&&s.jsxs(C,{onClick:()=>n("content"),children:["Continue to Content",s.jsx(Gr,{className:"w-4 h-4 ml-2"})]})]}),K>0&&!re&&s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:[K," of ",l.length," chapters generated"]})]})})]})}),s.jsx(Ge,{value:"content",className:"space-y-6",children:s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsxs(Gt,{className:"flex items-center justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx(Ka,{className:"w-5 h-5"}),"Edit Content"]}),s.jsxs(J,{variant:"secondary",children:[l.reduce((x,M)=>x+M.wordCount,0).toLocaleString()," total words"]})]}),s.jsx(vs,{children:"Review and edit each chapter's content"})]}),s.jsxs(ge,{className:"space-y-4",children:[s.jsx(Ws,{className:"h-[500px] pr-4",children:s.jsx("div",{className:"space-y-4",children:l.map((x,M)=>s.jsxs(O,{children:[s.jsx(Je,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsxs(J,{variant:"outline",className:"mb-2",children:["Chapter ",M+1]}),s.jsx(Gt,{className:"text-lg",children:x.title})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{size:"sm",variant:"outline",onClick:()=>T(x.id),children:s.jsx(wn,{className:"w-4 h-4"})}),s.jsx(C,{size:"sm",variant:"outline",onClick:()=>j(y===x.id?null:x.id),children:s.jsx(Ka,{className:"w-4 h-4"})})]})]})}),s.jsx(ge,{children:y===x.id?s.jsxs("div",{className:"space-y-3",children:[s.jsx(kt,{value:x.content,onChange:X=>z(x.id,X.target.value),rows:15,className:"font-mono text-sm"}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("span",{className:"text-sm text-muted-foreground",children:[x.wordCount.toLocaleString()," words"]}),s.jsxs(C,{size:"sm",onClick:()=>{j(null),$.success("Changes saved")},children:[s.jsx(kd,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsx("p",{className:"text-sm text-muted-foreground line-clamp-3",children:x.content}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[x.wordCount.toLocaleString()," words"]})]})})]},x.id))})}),s.jsx(ss,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(C,{variant:"outline",onClick:()=>n("outline"),className:"flex-1",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Back to Outline"]}),s.jsxs(C,{onClick:()=>n("cover"),className:"flex-1",children:["Continue to Cover",s.jsx(Gr,{className:"w-4 h-4 ml-2"})]})]})]})]})}),s.jsx(Ge,{value:"cover",className:"space-y-6",children:s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsxs(Gt,{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"w-5 h-5"}),"Cover Art"]}),s.jsx(vs,{children:"Generate AI cover art for your ebook"})]}),s.jsxs(ge,{className:"space-y-4",children:[d?s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx("img",{src:d,alt:"Book Cover",className:"w-64 h-96 object-cover rounded-lg shadow-lg border"}),s.jsx("div",{className:"flex gap-2",children:s.jsxs(C,{variant:"outline",onClick:U,disabled:g,children:[g?s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(jd,{className:"w-4 h-4 mr-2"}),"Regenerate"]})})]}):s.jsxs("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[s.jsx("div",{className:"w-64 h-96 border-2 border-dashed rounded-lg flex items-center justify-center bg-muted/50",children:s.jsx(Xn,{className:"w-16 h-16 text-muted-foreground"})}),s.jsxs(C,{onClick:U,disabled:g,size:"lg",children:[g?s.jsx(Pe,{className:"w-4 h-4 mr-2 animate-spin"}):s.jsx(ve,{className:"w-4 h-4 mr-2"}),"Generate Cover Art"]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(C,{variant:"outline",onClick:()=>n("content"),className:"flex-1",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Back to Content"]}),d&&s.jsxs(C,{onClick:()=>n("export"),className:"flex-1",children:["Continue to Export",s.jsx(Gr,{className:"w-4 h-4 ml-2"})]})]})]})]})}),s.jsx(Ge,{value:"export",className:"space-y-6",children:s.jsxs(O,{children:[s.jsxs(Je,{children:[s.jsxs(Gt,{className:"flex items-center gap-2",children:[s.jsx(Jn,{className:"w-5 h-5"}),"Export Ebook"]}),s.jsx(vs,{children:"Download your completed ebook for Amazon KDP or other platforms"})]}),s.jsxs(ge,{className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(O,{className:"border-2",children:s.jsxs(ge,{className:"pt-6 text-center space-y-4",children:[s.jsx(ot,{className:"w-12 h-12 mx-auto text-primary"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"Microsoft Word"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Export as .DOCX"})]}),s.jsxs(C,{onClick:()=>V("docx"),className:"w-full",children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Export DOCX"]})]})}),s.jsx(O,{className:"border-2",children:s.jsxs(ge,{className:"pt-6 text-center space-y-4",children:[s.jsx(ot,{className:"w-12 h-12 mx-auto text-primary"}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold",children:"PDF Document"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Export as .PDF"})]}),s.jsxs(C,{onClick:()=>V("pdf"),className:"w-full",children:[s.jsx(Jn,{className:"w-4 h-4 mr-2"}),"Export PDF"]})]})})]}),s.jsxs(O,{className:"bg-muted/50",children:[s.jsx(Je,{children:s.jsx(Gt,{className:"text-base",children:"Book Summary"})}),s.jsxs(ge,{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Title:"}),s.jsx("span",{className:"font-medium",children:r.title})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Genre:"}),s.jsx("span",{className:"font-medium",children:r.genre==="Other"?r.customGenre:r.genre})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Chapters:"}),s.jsx("span",{className:"font-medium",children:l.length})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Words:"}),s.jsx("span",{className:"font-medium",children:l.reduce((x,M)=>x+M.wordCount,0).toLocaleString()})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Est. Pages:"}),s.jsx("span",{className:"font-medium",children:Math.round(l.reduce((x,M)=>x+M.wordCount,0)/250)})]})]})]}),s.jsx(ss,{}),s.jsxs(C,{variant:"outline",onClick:()=>n("cover"),className:"w-full",children:[s.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Back to Cover"]})]})]})})]}),s.jsx(Et,{open:_!==null,onOpenChange:()=>T(null),children:s.jsxs(Tt,{className:"max-w-3xl max-h-[80vh]",children:[s.jsxs(zt,{children:[s.jsx(Ut,{children:l.find(x=>x.id===_)?.title}),s.jsxs(Ht,{children:[l.find(x=>x.id===_)?.wordCount.toLocaleString()," words"]})]}),s.jsx(Ws,{className:"h-[60vh] pr-4",children:s.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none",children:l.find(x=>x.id===_)?.content.split(`
`).map((x,M)=>s.jsx("p",{children:x},M))})})]})})]})}function ks({className:e="",showText:t=!0}){return t?s.jsxs("svg",{viewBox:"0 0 200 60",className:e,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"hubGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",style:{stopColor:"#10b981",stopOpacity:1}}),s.jsx("stop",{offset:"100%",style:{stopColor:"#14b8a6",stopOpacity:1}})]})}),s.jsx("text",{x:"10",y:"42",fontFamily:"Arial, sans-serif",fontSize:"40",fontWeight:"bold",fill:"url(#hubGradient)",letterSpacing:"-1",children:"Pub"}),s.jsx("rect",{x:"84",y:"4",width:"90",height:"46",rx:"8",fill:"url(#hubGradient)"}),s.jsx("text",{x:"129",y:"39",fontFamily:"Arial, sans-serif",fontSize:"40",fontWeight:"bold",fill:"white",textAnchor:"middle",letterSpacing:"-1",children:"hub"})]}):s.jsxs("svg",{viewBox:"0 0 100 100",className:e,xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("defs",{children:s.jsxs("linearGradient",{id:"logoGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[s.jsx("stop",{offset:"0%",style:{stopColor:"#10b981",stopOpacity:1}}),s.jsx("stop",{offset:"100%",style:{stopColor:"#14b8a6",stopOpacity:1}})]})}),s.jsx("rect",{x:"10",y:"25",width:"80",height:"50",rx:"8",fill:"url(#logoGradient)"}),s.jsx("text",{x:"50",y:"63",fontFamily:"Arial, sans-serif",fontSize:"36",fontWeight:"bold",fill:"white",textAnchor:"middle",children:"Ph"})]})}function Oi({...e}){return s.jsx(Ep,{"data-slot":"dropdown-menu",...e})}function Li({...e}){return s.jsx(Tp,{"data-slot":"dropdown-menu-trigger",...e})}function Fi({className:e,sideOffset:t=4,...n}){return s.jsx(Cp,{children:s.jsx(Ip,{"data-slot":"dropdown-menu-content",sideOffset:t,className:G("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function bt({className:e,inset:t,variant:n="default",...r}){return s.jsx(Pp,{"data-slot":"dropdown-menu-item","data-inset":t,"data-variant":n,className:G("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r})}function Ix({className:e,inset:t,...n}){return s.jsx(Ap,{"data-slot":"dropdown-menu-label","data-inset":t,className:G("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function pn({className:e,...t}){return s.jsx(Rp,{"data-slot":"dropdown-menu-separator",className:G("bg-border -mx-1 my-1 h-px",e),...t})}function Ax(){const[e,t]=v.useState([]),[n,r]=v.useState(!0),{currentProject:a}=At(),i=["twitter","instagram","linkedin","facebook","youtube","tiktok","pinterest","reddit","blog"];v.useEffect(()=>{a&&o()},[a?.id]),v.useEffect(()=>{if(!a)return;const c=async()=>{sessionStorage.getItem("oauth_just_completed")==="true"&&(console.log("OAuth just completed, refreshing connected platforms..."),setTimeout(()=>{o()},500))};c();const d=()=>{c()},m=setInterval(()=>{c()},1e3);window.addEventListener("focus",d);const u=setTimeout(()=>{clearInterval(m)},1e4);return()=>{window.removeEventListener("focus",d),clearInterval(m),clearTimeout(u)}},[a]);const o=async()=>{if(a)try{r(!0),console.log("Loading connected platforms for project:",a.id);const{connections:c}=await ir.getAll(a.id);if(console.log("Received connections from API:",c),c&&c.length>0){const d=c.filter(m=>m.connected===!0).map(m=>m.platform);console.log("Connected platforms found:",d),t(d)}else console.log("No connected platforms found"),t([])}catch(c){console.error("Failed to load connected platforms:",c),t([])}finally{r(!1)}},l=e.length<i.length;return{connectedPlatforms:e,loading:n,hasUnconnectedPlatforms:l,refresh:o}}function Rx({currentView:e,selectedPlatform:t,onPlatformChange:n,onNavigate:r,onOpenAccountSettings:a,onOpenCommandPalette:i,onOpenAIChat:o}){const[l,c]=v.useState(""),{user:d,signout:m,profilePicture:u}=Ln(),{connectedPlatforms:h,hasUnconnectedPlatforms:p}=Ax(),f=y=>{y.key==="Enter"&&(o(l),c(""))},b=async()=>{try{await m()}catch(y){console.error("Sign out error:",y)}},w=()=>(d?.user_metadata?.name||d?.email||"User").split(" ").map(j=>j[0]).join("").toUpperCase().slice(0,2),N=[{id:"all",label:"ALL"},...[{id:"all",label:"ALL"},{id:"twitter",label:"Twitter"},{id:"instagram",label:"Instagram"},{id:"linkedin",label:"LinkedIn"},{id:"facebook",label:"Facebook"},{id:"youtube",label:"YouTube"},{id:"tiktok",label:"TikTok"},{id:"pinterest",label:"Pinterest"},{id:"reddit",label:"Reddit"},{id:"blog",label:"Blog"}].filter(y=>y.id!=="all"&&h.includes(y.id)).map(y=>({id:y.id,label:y.label}))];v.useEffect(()=>{t!=="all"&&!h.includes(t)&&n("all")},[h,t,n]);const E=()=>{r("project-settings","connections")},A=e==="project-overview"||e==="calendar"||e==="inbox"||e==="analytics"||e==="library"||e==="trending";return s.jsx("header",{className:"border-b border-border/50 bg-black/20 backdrop-blur-xl sticky top-0 z-10",children:A?s.jsxs("div",{className:"pl-0 pr-6 overflow-x-auto h-[53px] flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(nn,{value:t,onValueChange:n,children:s.jsx(rn,{className:"w-full justify-start h-auto p-0 bg-transparent border-0",children:N.map(y=>s.jsx(De,{value:y.id,className:"flex items-center gap-2 px-4 h-[53px] data-[state=active]:border-b-2 data-[state=active]:border-emerald-500 data-[state=active]:bg-gradient-to-br data-[state=active]:from-emerald-500/80 data-[state=active]:to-teal-500/50 data-[state=active]:text-white rounded-none data-[state=active]:shadow-none whitespace-nowrap",children:y.id==="all"?s.jsx("span",{children:y.label}):s.jsxs(s.Fragment,{children:[s.jsx(pe,{platform:y.id,size:18,className:"w-[18px] h-[18px]"}),s.jsx("span",{className:"hidden sm:inline",children:y.label})]})},y.id))})}),p&&s.jsxs("button",{onClick:E,className:"flex items-center gap-2 px-4 h-[53px] text-muted-foreground hover:text-foreground hover:bg-accent/50 transition-colors whitespace-nowrap border-b-2 border-transparent",title:h.length===0?"Connect your first platform to get started":"Connect more platforms",children:[s.jsx(Qt,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Connect Platform"})]}),h.length===0&&s.jsx("div",{className:"px-4 h-[53px] flex items-center",children:s.jsx("span",{className:"text-xs text-muted-foreground",children:"No platforms connected yet"})})]}),s.jsx("div",{className:"flex-1 max-w-md mx-4",children:s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"flex items-center gap-2 h-9 px-3 rounded-lg border border-border/50 bg-card/50 focus-within:bg-card focus-within:border-emerald-500/50 transition-all",children:[s.jsx(ve,{className:"w-4 h-4 text-emerald-500 group-focus-within:text-emerald-400 transition-colors flex-shrink-0"}),s.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),onKeyDown:f,placeholder:"Ask PubHub...",className:"flex-1 bg-transparent border-0 outline-none text-sm text-foreground placeholder:text-muted-foreground"}),s.jsxs("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground flex-shrink-0",children:[s.jsx("span",{className:"text-xs",children:""}),"K"]})]})})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Oi,{children:[s.jsx(Li,{asChild:!0,children:s.jsxs(C,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9 relative",children:[s.jsxs(Nt,{className:"w-8 h-8",children:[u&&s.jsx(Hs,{src:u,alt:"Profile"}),s.jsx(St,{children:w()})]}),s.jsx(J,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]})}),s.jsxs(Fi,{align:"end",children:[s.jsxs("div",{className:"px-2 py-1.5",children:[s.jsx("p",{className:"text-sm",children:d?.user_metadata?.name||"User"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d?.email})]}),s.jsx(pn,{}),s.jsxs(bt,{onClick:()=>a("profile"),children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Profile"]}),s.jsxs(bt,{onClick:()=>a("shortcuts"),children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Shortcuts"]}),s.jsxs(bt,{onClick:()=>a("notifications"),children:[s.jsx(kn,{className:"w-4 h-4 mr-2"}),"Notifications",s.jsx(J,{variant:"destructive",className:"ml-auto h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]}),s.jsxs(bt,{onClick:()=>a("preferences"),children:[s.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Preferences"]}),s.jsx(pn,{}),s.jsxs(bt,{className:"text-destructive",onClick:b,children:[s.jsx(jc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})]}):s.jsxs("div",{className:"px-6 h-[53px] flex items-center justify-between gap-4",children:[s.jsx("div",{className:"flex-1 max-w-md",children:s.jsx("div",{className:"relative group",children:s.jsxs("div",{className:"flex items-center gap-2 h-9 px-3 rounded-lg border border-border/50 bg-card/50 focus-within:bg-card focus-within:border-emerald-500/50 transition-all",children:[s.jsx(ve,{className:"w-4 h-4 text-emerald-500 group-focus-within:text-emerald-400 transition-colors flex-shrink-0"}),s.jsx("input",{type:"text",value:l,onChange:y=>c(y.target.value),onKeyDown:f,placeholder:"Ask PubHub...",className:"flex-1 bg-transparent border-0 outline-none text-sm text-foreground placeholder:text-muted-foreground"}),s.jsxs("kbd",{className:"hidden sm:inline-flex h-5 select-none items-center gap-1 rounded border bg-muted px-1.5 font-mono text-[10px] font-medium text-muted-foreground flex-shrink-0",children:[s.jsx("span",{className:"text-xs",children:""}),"K"]})]})})}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsxs(Oi,{children:[s.jsx(Li,{asChild:!0,children:s.jsxs(C,{variant:"ghost",size:"icon",className:"rounded-full h-9 w-9 relative",children:[s.jsxs(Nt,{className:"w-8 h-8",children:[u&&s.jsx(Hs,{src:u,alt:"Profile"}),s.jsx(St,{children:w()})]}),s.jsx(J,{variant:"destructive",className:"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]})}),s.jsxs(Fi,{align:"end",children:[s.jsxs("div",{className:"px-2 py-1.5",children:[s.jsx("p",{className:"text-sm",children:d?.user_metadata?.name||"User"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:d?.email})]}),s.jsx(pn,{}),s.jsxs(bt,{onClick:()=>a("profile"),children:[s.jsx(ia,{className:"w-4 h-4 mr-2"}),"Profile"]}),s.jsxs(bt,{onClick:()=>a("shortcuts"),children:[s.jsx(Ei,{className:"w-4 h-4 mr-2"}),"Shortcuts"]}),s.jsxs(bt,{onClick:()=>a("notifications"),children:[s.jsx(kn,{className:"w-4 h-4 mr-2"}),"Notifications",s.jsx(J,{variant:"destructive",className:"ml-auto h-5 w-5 flex items-center justify-center p-0 text-xs",children:"3"})]}),s.jsxs(bt,{onClick:()=>a("preferences"),children:[s.jsx(Ti,{className:"w-4 h-4 mr-2"}),"Preferences"]}),s.jsx(pn,{}),s.jsxs(bt,{className:"text-destructive",onClick:b,children:[s.jsx(jc,{className:"w-4 h-4 mr-2"}),"Sign out"]})]})]})})]})})}function Px({className:e,...t}){return s.jsx(tn,{"data-slot":"command",className:G("bg-popover text-popover-foreground flex h-full w-full flex-col overflow-hidden rounded-md",e),...t})}function Dx({title:e="Command Palette",description:t="Search for a command to run...",children:n,...r}){return s.jsxs(Et,{...r,children:[s.jsxs(zt,{className:"sr-only",children:[s.jsx(Ut,{children:e}),s.jsx(Ht,{children:t})]}),s.jsx(Tt,{className:"overflow-hidden p-0",children:s.jsx(Px,{className:"[&_[cmdk-group-heading]]:text-muted-foreground **:data-[slot=command-input-wrapper]:h-12 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group]]:px-2 [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:n})})]})}function Mx({className:e,...t}){return s.jsxs("div",{"data-slot":"command-input-wrapper",className:"flex h-9 items-center gap-2 border-b px-3",children:[s.jsx(jn,{className:"size-4 shrink-0 opacity-50"}),s.jsx(tn.Input,{"data-slot":"command-input",className:G("placeholder:text-muted-foreground flex h-10 w-full rounded-md bg-transparent py-3 text-sm outline-hidden disabled:cursor-not-allowed disabled:opacity-50",e),...t})]})}function Ox({className:e,...t}){return s.jsx(tn.List,{"data-slot":"command-list",className:G("max-h-[300px] scroll-py-1 overflow-x-hidden overflow-y-auto",e),...t})}function Lx({...e}){return s.jsx(tn.Empty,{"data-slot":"command-empty",className:"py-6 text-center text-sm",...e})}function ti({className:e,...t}){return s.jsx(tn.Group,{"data-slot":"command-group",className:G("text-foreground [&_[cmdk-group-heading]]:text-muted-foreground overflow-hidden p-1 [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium",e),...t})}function Rc({className:e,...t}){return s.jsx(tn.Separator,{"data-slot":"command-separator",className:G("bg-border -mx-1 h-px",e),...t})}function si({className:e,...t}){return s.jsx(tn.Item,{"data-slot":"command-item",className:G("data-[selected=true]:bg-accent data-[selected=true]:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled=true]:pointer-events-none data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Fx({open:e,onOpenChange:t,onNavigate:n,onPlatformSelect:r,onOpenSettings:a}){const i=[{id:"project-overview",label:"Project Overview",icon:Td,shortcut:"H"},{id:"compose",label:"Compose",icon:Ci,shortcut:"N"},{id:"inbox",label:"Inbox",icon:ca,shortcut:"I"},{id:"calendar",label:"Calendar",icon:Ks,shortcut:"C"},{id:"trending",label:"Trending",icon:tt,shortcut:"T"},{id:"analytics",label:"Analytics",icon:go,shortcut:"A"},{id:"library",label:"Remix",icon:xo,shortcut:"M"},{id:"ebooks",label:"Ebook Generator",icon:Zn,shortcut:"E"},{id:"notifications",label:"Notifications",icon:kn,shortcut:"B"},{id:"project-settings",label:"Project Settings",icon:_s,shortcut:"S"}],o=[{id:"twitter",label:"Twitter"},{id:"instagram",label:"Instagram"},{id:"linkedin",label:"LinkedIn"},{id:"facebook",label:"Facebook"},{id:"youtube",label:"YouTube"},{id:"tiktok",label:"TikTok"},{id:"pinterest",label:"Pinterest"},{id:"reddit",label:"Reddit"},{id:"blog",label:"Blog"}],l=c=>{c(),t(!1)};return s.jsxs(Dx,{open:e,onOpenChange:t,children:[s.jsx(Mx,{placeholder:"Quick navigation (K)..."}),s.jsxs(Ox,{children:[s.jsx(Lx,{children:"No results found."}),s.jsx(ti,{heading:"Navigation",children:i.map(c=>s.jsxs(si,{onSelect:()=>l(()=>n(c.id)),children:[s.jsx(c.icon,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:c.label}),c.shortcut&&s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:c.shortcut})]},c.id))}),s.jsx(Rc,{}),s.jsx(ti,{heading:"Platforms",children:o.map(c=>s.jsxs(si,{onSelect:()=>l(()=>r(c.id)),children:[s.jsx(pe,{platform:c.id,className:"mr-2 h-4 w-4",size:16}),s.jsx("span",{children:c.label})]},c.id))}),s.jsx(Rc,{}),s.jsx(ti,{heading:"Actions",children:s.jsxs(si,{onSelect:()=>l(()=>a()),children:[s.jsx(_s,{className:"mr-2 h-4 w-4"}),s.jsx("span",{children:"Settings"}),s.jsx("span",{className:"ml-auto text-xs text-muted-foreground",children:","})]})})]})]})}function $x({open:e,onOpenChange:t,theme:n,onThemeChange:r}){return s.jsx(Ad,{open:e,onOpenChange:t,children:s.jsxs(Pd,{children:[s.jsxs(Dd,{className:"pt-6",children:[s.jsx(Md,{children:"Settings"}),s.jsx(Od,{children:"Customize your PubHub experience"})]}),s.jsxs("div",{className:"space-y-6 mt-6",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{children:"Appearance"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs(C,{variant:"outline",onClick:()=>r("light"),className:`h-auto flex-col gap-2 p-4 ${n==="light"?"border-emerald-500 bg-emerald-500/10 text-emerald-400":""}`,children:[s.jsx(tf,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Light"})]}),s.jsxs(C,{variant:"outline",onClick:()=>r("dark"),className:`h-auto flex-col gap-2 p-4 ${n==="dark"?"border-emerald-500 bg-emerald-500/10 text-emerald-400":""}`,children:[s.jsx(sf,{className:"w-5 h-5"}),s.jsx("span",{className:"text-sm",children:"Dark"})]})]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{children:"Account"}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Name"}),s.jsx("span",{children:"John Doe"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Username"}),s.jsx("span",{children:"@johndoe"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Email"}),s.jsx("span",{children:"john@example.com"})]})]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{children:"Preferences"}),s.jsx("div",{className:"text-sm text-muted-foreground",children:"More settings coming soon..."})]}),s.jsx(ss,{}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ee,{children:"About"}),s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Version"}),s.jsx("span",{children:"1.0.0"})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Build"}),s.jsx("span",{children:"2025.01.06"})]})]})]})]})]})})}function Bx({open:e,onOpenChange:t,currentView:n,selectedPlatform:r,initialQuery:a="",autoSubmit:i=!1}){const[o,l]=v.useState([]),[c,d]=v.useState(""),[m,u]=v.useState(!1),[h,p]=v.useState(!1),f=v.useRef(null);v.useEffect(()=>{e&&o.length===0&&(l([{id:"welcome",role:"assistant",content:"Hi! I'm PubHub AI. I can help you with questions about your content, analytics, scheduling, and more. What would you like to know?",timestamp:new Date}]),a&&d(a),p(!1))},[e,a,o.length]),v.useEffect(()=>{if(e&&i&&a&&o.length>0&&!h&&!m){p(!0);const E={id:Date.now().toString(),role:"user",content:a,timestamp:new Date};l(A=>[...A,E]),d(""),u(!0),setTimeout(()=>{const A=Pc(a,n,r),y={id:(Date.now()+1).toString(),role:"assistant",content:A,timestamp:new Date};l(j=>[...j,y]),u(!1)},1e3+Math.random()*1e3)}},[e,i,a,o.length,h,m,n,r]),v.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[o]);const b=async E=>{if(E.preventDefault(),!c.trim()||m)return;const A={id:Date.now().toString(),role:"user",content:c.trim(),timestamp:new Date};l(y=>[...y,A]),d(""),u(!0),setTimeout(()=>{const y=Pc(A.content,n,r),j={id:(Date.now()+1).toString(),role:"assistant",content:y,timestamp:new Date};l(_=>[..._,j]),u(!1)},1e3+Math.random()*1e3)},w=()=>{l([]),d("")},g=E=>{d(E)},N=["What's my engagement rate this week?","When should I post on Instagram?","Show me my best performing content","Help me come up with content ideas"];return s.jsx(Et,{open:e,onOpenChange:t,children:s.jsxs(Tt,{className:"sm:max-w-2xl h-[85vh] max-h-[700px] flex flex-col p-0 gap-0",children:[s.jsx(zt,{className:"px-6 py-4 border-b border-border/50 bg-gradient-to-r from-emerald-500/10 to-teal-600/10",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-teal-600 flex items-center justify-center",children:s.jsx(ve,{className:"w-5 h-5 text-white"})}),s.jsxs("div",{children:[s.jsx(Ut,{children:"Ask PubHub"}),s.jsx(Ht,{children:"Your AI-powered content assistant"})]})]}),o.length>1&&s.jsx(C,{variant:"ghost",size:"sm",onClick:w,className:"text-xs",children:"Clear Chat"})]})}),s.jsx(Ws,{className:"flex-1 min-h-0 px-6 py-4",children:s.jsxs("div",{className:"space-y-4",children:[o.length===1&&s.jsxs("div",{className:"space-y-2 pb-4",children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Try asking:"}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:N.map((E,A)=>s.jsx("button",{onClick:()=>g(E),className:"text-left text-sm px-3 py-2 rounded-lg border border-border/50 bg-card/50 hover:bg-card hover:border-emerald-500/50 transition-colors",children:E},A))})]}),o.map(E=>s.jsxs("div",{className:G("flex gap-3",E.role==="user"?"justify-end":"justify-start"),children:[E.role==="assistant"&&s.jsx(Nt,{className:"w-8 h-8 mt-1",children:s.jsx(St,{className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white",children:s.jsx(ve,{className:"w-4 h-4"})})}),s.jsxs("div",{className:G("rounded-2xl px-4 py-3 max-w-[80%]",E.role==="user"?"bg-gradient-to-r from-emerald-500 to-teal-600 text-white":"bg-card border border-border/50"),children:[s.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:E.content}),s.jsx("p",{className:G("text-xs mt-1",E.role==="user"?"text-emerald-100":"text-muted-foreground"),children:E.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),E.role==="user"&&s.jsx(Nt,{className:"w-8 h-8 mt-1",children:s.jsx(St,{children:"JD"})})]},E.id)),m&&s.jsxs("div",{className:"flex gap-3 justify-start",children:[s.jsx(Nt,{className:"w-8 h-8 mt-1",children:s.jsx(St,{className:"bg-gradient-to-br from-emerald-500 to-teal-600 text-white",children:s.jsx(ve,{className:"w-4 h-4"})})}),s.jsx("div",{className:"rounded-2xl px-4 py-3 bg-card border border-border/50",children:s.jsx(Pe,{className:"w-4 h-4 animate-spin text-emerald-500"})})]}),s.jsx("div",{ref:f})]})}),s.jsxs("div",{className:"px-6 py-4 border-t border-border/50 bg-card/50",children:[s.jsxs("form",{onSubmit:b,className:"flex gap-2",children:[s.jsx(ke,{value:c,onChange:E=>d(E.target.value),placeholder:"Ask me anything about your content...",className:"flex-1",disabled:m,autoFocus:!0}),s.jsx(C,{type:"submit",disabled:!c.trim()||m,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:s.jsx(wd,{className:"w-4 h-4"})})]}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Currently viewing: ",n==="ai"?`${r} insights`:n]})]})]})})}function Pc(e,t,n){const r=e.toLowerCase();return r.includes("post")&&r.includes("composting")?"Based on your content history, your last post about composting was 12 days ago on Instagram. It received 342 likes and 28 comments. Would you like me to help you create a new composting-related post?":r.includes("engagement")||r.includes("analytics")?"Your average engagement rate across all platforms this month is 4.8%, which is 0.7% higher than last month. Twitter is performing best at 6.2%, followed by Instagram at 5.1%. Would you like a detailed breakdown by platform?":r.includes("schedule")||r.includes("when")?`Based on your audience analytics, the best times to post this week are:

 Twitter: 9 AM and 5 PM EST
 Instagram: 11 AM and 7 PM EST
 LinkedIn: 8 AM and 12 PM EST

Would you like me to schedule a post for one of these optimal times?`:r.includes("idea")||r.includes("content")||r.includes("suggestion")?`Here are some content suggestions tailored to your audience:

 **Trending Topics:**
1. "Top 5 Productivity Tips for 2025" - How-to format (high engagement potential)
2. "Behind-the-Scenes: A Day in the Life" - Authentic storytelling (builds connection)
3. "Ask Me Anything" - Interactive Q&A session (boosts engagement by 60%)

 **Platform-Specific Ideas:**
 Twitter: Thread on industry insights or personal journey
 Instagram: Carousel post with actionable tips + eye-catching visuals
 LinkedIn: Professional case study or thought leadership piece
 TikTok/Reels: Quick tutorial or trending challenge

 **Based on Your Best Performing Content:**
Your tutorial-style posts get 45% more engagement. Consider creating educational content with step-by-step breakdowns.

Would you like me to help you develop any of these ideas further?`:r.includes("hashtag")?`For ${n} posts about sustainability, I recommend:

#SustainableLiving #EcoFriendly #ZeroWaste #GreenLiving #Composting

These hashtags have generated 35% more reach in your previous posts. Want me to add them to your next post?`:t==="compose"?`I see you're working on creating content. I can help you with:

 Generating post ideas
 Suggesting optimal posting times
 Creating engaging captions
 Recommending hashtags
 Checking content performance predictions

What would you like help with?`:t==="calendar"?"Your content calendar shows you have 8 posts scheduled for this week. You're posting most frequently on Monday and Wednesday. I notice a gap on Friday - would you like me to suggest content to fill that slot?":t==="inbox"?"You have 15 unread messages across all platforms. 3 of them mention potential collaboration opportunities. Would you like me to help you draft responses or prioritize which ones to respond to first?":`I'm here to help! I can assist you with:

 Finding specific posts and content
 Analyzing your performance metrics
 Suggesting content ideas and hashtags
 Scheduling posts at optimal times
 Answering questions about your audience
 Drafting engaging captions

What would you like to know more about?`}function zx({open:e,onOpenChange:t}){const[n,r]=v.useState(""),[a,i]=v.useState(""),[o,l]=v.useState(!1),{createProject:c,setCurrentProject:d}=At(),m=async u=>{if(u.preventDefault(),!n.trim()){$.error("Please enter a project name");return}l(!0);try{const h=await c(n,a);$.success("Project created successfully!"),await d(h),r(""),i(""),t(!1)}catch(h){$.error(h.message||"Failed to create project")}finally{l(!1)}};return s.jsx(Et,{open:e,onOpenChange:t,children:s.jsx(Tt,{className:"sm:max-w-[500px]",children:s.jsxs("form",{onSubmit:m,children:[s.jsxs(zt,{children:[s.jsx(Ut,{children:"Create New Project"}),s.jsx(Ht,{children:"Create a new workspace to organize your social media campaigns and content. Each project can have its own set of connected accounts."})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"name",children:"Project Name"}),s.jsx(ke,{id:"name",placeholder:"e.g., Brand Campaign 2024",value:n,onChange:u=>r(u.target.value),required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"description",children:"Description (Optional)"}),s.jsx(kt,{id:"description",placeholder:"Describe what this project is for...",value:a,onChange:u=>i(u.target.value),rows:3})]})]}),s.jsxs(vo,{children:[s.jsx(C,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:o,children:"Cancel"}),s.jsx(C,{type:"submit",disabled:o,children:o?"Creating...":"Create Project"})]})]})})})}function Dc({logo:e,name:t}){return e?s.jsx("img",{src:e,alt:t,className:"w-4 h-4 flex-shrink-0 object-contain rounded"}):s.jsx("div",{className:"w-4 h-4 flex-shrink-0",children:s.jsx(ks,{className:"w-full h-full"})})}function Ux(){const{currentProject:e,projects:t,setCurrentProject:n}=At(),[r,a]=v.useState(!1),[i,o]=v.useState(!1),l=async c=>{await n(c),a(!1)};return s.jsxs(s.Fragment,{children:[s.jsxs(Oi,{open:r,onOpenChange:a,children:[s.jsx(Li,{asChild:!0,children:s.jsxs(C,{variant:"outline",role:"combobox","aria-expanded":r,className:"w-full justify-between h-10 px-3 bg-sidebar-accent/50 hover:bg-sidebar-accent border-sidebar-border group-data-[collapsible=icon]:w-10 group-data-[collapsible=icon]:px-0 group-data-[collapsible=icon]:justify-center group-hover/sidebar:w-full group-hover/sidebar:px-3 group-hover/sidebar:justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[s.jsx(Dc,{logo:e?.logo,name:e?.name||"Project"}),s.jsx("span",{className:"truncate group-data-[collapsible=icon]:hidden group-hover/sidebar:inline",children:e?.name||"Select project"})]}),s.jsx(nf,{className:"ml-2 h-4 w-4 shrink-0 opacity-50 group-data-[collapsible=icon]:hidden group-hover/sidebar:inline"})]})}),s.jsxs(Fi,{className:"w-[200px]",align:"start",children:[s.jsx(Ix,{children:"Projects"}),s.jsx(pn,{}),t.map(c=>s.jsxs(bt,{onSelect:()=>l(c),className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsx(Dc,{logo:c.logo,name:c.name}),s.jsx("span",{className:"truncate",children:c.name})]}),e?.id===c.id&&s.jsx(Xe,{className:"w-4 h-4 flex-shrink-0"})]},c.id)),s.jsx(pn,{}),s.jsxs(bt,{onSelect:()=>o(!0),children:[s.jsx(Qt,{className:"w-4 h-4 mr-2"}),s.jsx("span",{children:"Create Project"})]})]})]}),s.jsx(zx,{open:i,onOpenChange:o})]})}function Hx(){const[e,t]=v.useState(!0),[n,r]=v.useState(""),[a,i]=v.useState(""),[o,l]=v.useState(""),[c,d]=v.useState(""),[m,u]=v.useState(""),[h,p]=v.useState(!1),{signin:f,signup:b,signinWithGoogle:w,signinWithFacebook:g,signinWithTwitter:N}=Ln(),E=async j=>{if(j.preventDefault(),!n||!n.includes("@")){d("Please enter a valid email address.");return}if(!a){d("Please enter your password.");return}d(""),u(""),p(!0);try{await f(n.trim(),a)}catch(_){console.error("Sign in error:",_);const T=(_.message||"").toLowerCase();T.includes("invalid login credentials")||T.includes("invalid password")?d("Invalid email or password. If you don't have an account yet, please sign up."):T.includes("email not confirmed")?(u("Please check your email and click the confirmation link before signing in."),d("")):T.includes("user not found")||T.includes("no account")?d("No account found with this email. Please sign up first."):T.includes("too many requests")?d("Too many login attempts. Please wait a few minutes and try again."):d(_.message||"Failed to sign in. Please check your credentials.")}finally{p(!1)}},A=async j=>{if(j.preventDefault(),!n||!n.includes("@")){d("Please enter a valid email address.");return}if(!a||a.length<8){d("Password must be at least 8 characters long.");return}if(!o||o.trim().length===0){d("Please enter your name.");return}d(""),u(""),p(!0);try{await b(n.trim(),a,o.trim())}catch(_){console.error("Sign up error:",_);const T=(_.message||"").toLowerCase();T.includes("already")||T.includes("registered")||T.includes("exists")?(t(!1),i(""),d("This email is already registered. Please sign in below.")):T.includes("check your email")||T.includes("confirm")?(u("Account created! Please check your email to confirm your account before signing in."),t(!1),i("")):T.includes("password")?d(_.message):d(_.message||"Failed to sign up. Please try again.")}finally{p(!1)}},y=async j=>{d(""),u(""),p(!0);try{switch(j){case"google":await w();break;case"facebook":await g();break;case"twitter":await N();break}}catch(_){console.error(`${j} sign-in error:`,_),d(`Failed to sign in with ${j.charAt(0).toUpperCase()+j.slice(1)}. Please try again.`)}finally{p(!1)}};return s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(O,{className:"w-full max-w-md",children:[s.jsxs(Je,{className:"space-y-1 text-center",children:[s.jsx(ks,{className:"h-12 w-auto mx-auto mb-4"}),s.jsx(Gt,{className:"text-emerald-400",children:e?"Create Account":"Welcome Back"}),s.jsx(vs,{children:e?"Sign up to start managing your content":"Sign in to your account"}),!e&&s.jsxs($e,{className:"mt-4 border-emerald-500/50 bg-emerald-500/10 text-left",children:[s.jsx($t,{className:"h-4 w-4 text-emerald-400"}),s.jsxs(Be,{className:"text-sm text-muted-foreground",children:[s.jsx("strong",{className:"text-foreground",children:"First time here?"})," You need to create an account first."," ",s.jsx(C,{type:"button",variant:"link",className:"h-auto p-0 text-emerald-400 hover:text-emerald-300 underline",onClick:()=>{t(!0),d(""),u("")},children:"Click here to sign up"})]})]})]}),s.jsxs("form",{onSubmit:e?A:E,children:[s.jsxs(ge,{className:"space-y-4",children:[m&&s.jsxs($e,{className:"border-emerald-500/50 bg-emerald-500/10",children:[s.jsx($t,{className:"h-4 w-4 text-emerald-400"}),s.jsx(Be,{className:"text-foreground",children:m})]}),c&&s.jsxs($e,{variant:"destructive",children:[s.jsx($t,{className:"h-4 w-4"}),s.jsxs(Be,{children:[c,c.includes("No account found")&&!e&&s.jsx(C,{type:"button",variant:"link",className:"h-auto p-0 ml-1 text-destructive-foreground underline",onClick:()=>{t(!0),d(""),u("")},children:"Create an account instead?"})]})]}),e&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"name",children:"Full Name"}),s.jsx(ke,{id:"name",name:"name",type:"text",placeholder:"John Doe",value:o,onChange:j=>l(j.target.value),required:!0,minLength:2,autoComplete:"name",autoFocus:e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"email",children:"Email"}),s.jsx(ke,{id:"email",name:"email",type:"email",placeholder:"you@example.com",value:n,onChange:j=>r(j.target.value),required:!0,autoComplete:"email",autoFocus:!e})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ee,{htmlFor:"password",children:"Password"}),s.jsx(ke,{id:"password",name:"password",type:"password",placeholder:"",value:a,onChange:j=>i(j.target.value),required:!0,minLength:8,autoComplete:e?"new-password":"current-password"}),e&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Must be at least 8 characters long"})]})]}),s.jsxs(zf,{className:"flex flex-col space-y-4",children:[s.jsxs(C,{type:"submit",className:"w-full bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",disabled:h,children:[h&&s.jsx(Pe,{className:"mr-2 h-4 w-4 animate-spin"}),e?"Sign Up":"Sign In"]}),s.jsxs("div",{className:"w-full space-y-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx(ss,{className:"w-full"})}),s.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:s.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or continue with"})})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[s.jsx(C,{type:"button",variant:"outline",className:"w-full h-10",onClick:()=>y("google"),disabled:h,children:s.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]})}),s.jsx(C,{type:"button",variant:"outline",className:"w-full h-10",onClick:()=>y("facebook"),disabled:h,children:s.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"#1877F2",children:s.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),s.jsx(C,{type:"button",variant:"outline",className:"w-full h-10",onClick:()=>y("twitter"),disabled:h,children:s.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"#1DA1F2",children:s.jsx("path",{d:"M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"})})})]})]}),s.jsx(C,{type:"button",variant:"ghost",className:"w-full text-muted-foreground hover:text-foreground",onClick:()=>{t(!e),d(""),u(""),r(""),i(""),l("")},children:e?"Already have an account? Sign In":"Don't have an account? Sign Up"}),s.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["By ",e?"signing up":"signing in",", you agree to our"," ",s.jsx("a",{href:"/terms",className:"text-emerald-400 hover:text-emerald-300 underline underline-offset-2",target:"_blank",rel:"noopener noreferrer",children:"Terms of Service"})," ","and"," ",s.jsx("a",{href:"/privacy",className:"text-emerald-400 hover:text-emerald-300 underline underline-offset-2",target:"_blank",rel:"noopener noreferrer",children:"Privacy Policy"})]})]})]})]})})}function Wx({onGetStarted:e,onSignUp:t}){const[n]=v.useState("dark"),r=[{icon:Ks,title:"Smart Scheduling",description:"Plan and schedule content across all platforms with our visual calendar. Never miss the perfect posting time."},{icon:ca,title:"Unified Inbox",description:"Manage all your comments, messages, and mentions from every platform in one centralized inbox."},{icon:go,title:"Advanced Analytics",description:"Track performance metrics, engagement rates, and growth across all your connected platforms."},{icon:ve,title:"AI Assistant",description:"Get content ideas, optimal posting times, and engagement tips powered by advanced AI."},{icon:xo,title:"Content Remix",description:"Repurpose your best-performing content across different platforms with AI-powered transformations."},{icon:ot,title:"Template Library",description:"Save time with customizable templates for different content types and platforms."}],a=[{id:"instagram",name:"Instagram"},{id:"twitter",name:"Twitter"},{id:"facebook",name:"Facebook"},{id:"youtube",name:"YouTube"},{id:"linkedin",name:"LinkedIn"},{id:"tiktok",name:"TikTok"},{id:"pinterest",name:"Pinterest"},{id:"reddit",name:"Reddit"},{id:"blog",name:"Blog"}],i=[{icon:Js,title:"Save 10+ Hours Weekly",description:"Automate repetitive tasks and manage everything from one dashboard"},{icon:tt,title:"Boost Engagement",description:"Post at optimal times and respond faster to your audience"},{icon:aa,title:"Grow Your Reach",description:"Cross-post efficiently and maintain consistent presence across platforms"},{icon:Jt,title:"Work Smarter",description:"AI-powered insights help you create content that resonates"}],o=[{value:"10+",label:"Hours Saved Weekly"},{value:"9",label:"Platforms Supported"},{value:"50%",label:"Faster Response Time"},{value:"3x",label:"More Engagement"}];return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("nav",{className:"fixed top-0 left-0 right-0 z-50 backdrop-blur-lg bg-background/80 border-b border-border",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-4 flex items-center justify-between",children:[s.jsx(ks,{className:"h-12 w-auto"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(C,{onClick:e,variant:"outline",children:"Sign In"}),s.jsx(C,{onClick:t||e,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white",children:"Sign Up"})]})]})}),s.jsx("section",{className:"pt-32 pb-20 px-6",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"text-center max-w-4xl mx-auto",children:[s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-gradient-to-r from-emerald-500/10 to-teal-600/10 border border-emerald-500/20 mb-6",children:[s.jsx(ve,{className:"w-4 h-4 text-emerald-500"}),s.jsx("span",{className:"text-emerald-500",children:"The All-in-One Creator Platform"})]}),s.jsxs("h1",{className:"text-6xl mb-6 bg-gradient-to-r from-emerald-400 to-teal-500 bg-clip-text text-transparent",children:["Publish Everywhere,",s.jsx("br",{}),"Manage from One Place"]}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-2xl mx-auto",children:"PubHub helps content creators publish, schedule, and manage their content across 9+ social platforms with AI-powered insights and unified analytics."}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-12",children:[s.jsxs(C,{onClick:e,size:"lg",className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white h-12 px-8",children:["Get Started Free",s.jsx(yn,{className:"w-4 h-4 ml-2"})]}),s.jsx(C,{variant:"outline",size:"lg",className:"h-12 px-8",children:"Watch Demo"})]}),s.jsxs("div",{className:"flex items-center justify-center gap-4 flex-wrap",children:[s.jsx("span",{className:"text-muted-foreground mr-2",children:"Supported Platforms:"}),a.map(l=>s.jsx("div",{className:"flex items-center gap-2",children:s.jsx(pe,{platform:l.id,size:"md"})},l.id))]})]})})}),s.jsx("section",{className:"py-12 px-6 border-y border-border",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:o.map((l,c)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-4xl mb-2 bg-gradient-to-r from-emerald-400 to-teal-500 bg-clip-text text-transparent",children:l.value}),s.jsx("div",{className:"text-muted-foreground",children:l.label})]},c))})})}),s.jsx("section",{className:"py-20 px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl mb-4",children:"Everything You Need to Succeed"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Powerful features designed to help content creators save time and grow their audience"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((l,c)=>s.jsxs(O,{className:"p-6 bg-card/50 backdrop-blur border-border hover:bg-card/70 transition-colors",children:[s.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-r from-emerald-500/10 to-teal-600/10 border border-emerald-500/20 flex items-center justify-center mb-4",children:s.jsx(l.icon,{className:"w-6 h-6 text-emerald-500"})}),s.jsx("h3",{className:"text-xl mb-2",children:l.title}),s.jsx("p",{className:"text-muted-foreground",children:l.description})]},c))})]})}),s.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-emerald-500/5 to-teal-600/5",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl mb-4",children:"Why Creators Choose PubHub"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Join thousands of creators who are working smarter, not harder"})]}),s.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:i.map((l,c)=>s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 flex items-center justify-center mx-auto mb-4",children:s.jsx(l.icon,{className:"w-8 h-8 text-white"})}),s.jsx("h3",{className:"text-xl mb-2",children:l.title}),s.jsx("p",{className:"text-muted-foreground",children:l.description})]},c))})]})}),s.jsx("section",{className:"py-20 px-6",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-4xl mb-4",children:"Simple Workflow, Powerful Results"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"From creation to publishing in just a few clicks"})]}),s.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[{step:"01",title:"Create Content",description:"Write once or use AI to generate ideas"},{step:"02",title:"Customize",description:"Adapt for each platform with templates"},{step:"03",title:"Schedule",description:"Pick optimal times or post immediately"},{step:"04",title:"Analyze",description:"Track performance and optimize"}].map((l,c)=>s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"text-6xl mb-4 bg-gradient-to-r from-emerald-500/20 to-teal-600/20 bg-clip-text text-transparent",children:l.step}),s.jsx("h3",{className:"text-xl mb-2",children:l.title}),s.jsx("p",{className:"text-muted-foreground",children:l.description}),c<3&&s.jsx(yn,{className:"hidden md:block absolute top-12 -right-8 w-6 h-6 text-muted-foreground/30"})]},c))})]})}),s.jsx("section",{className:"py-20 px-6 bg-gradient-to-br from-emerald-500/5 to-teal-600/5",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsx("div",{className:"text-center mb-12",children:s.jsx("h2",{className:"text-4xl mb-4",children:"Trusted by Content Creators"})}),s.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{quote:"PubHub cut my content management time in half. The unified inbox is a game-changer!",author:"Sarah Johnson",role:"Lifestyle Blogger"},{quote:"Finally, a tool that understands multi-platform creators. The AI suggestions are incredibly helpful.",author:"Mike Chen",role:"Tech YouTuber"},{quote:"The analytics dashboard gives me insights I never had before. My engagement has tripled!",author:"Emma Davis",role:"Instagram Influencer"}].map((l,c)=>s.jsxs(O,{className:"p-6 bg-card/50 backdrop-blur border-border",children:[s.jsxs("div",{className:"mb-4 text-muted-foreground italic",children:['"',l.quote,'"']}),s.jsxs("div",{children:[s.jsx("div",{children:l.author}),s.jsx("div",{className:"text-muted-foreground",children:l.role})]})]},c))})]})}),s.jsx("section",{className:"py-20 px-6",children:s.jsx("div",{className:"max-w-4xl mx-auto text-center",children:s.jsxs("div",{className:"p-12 rounded-2xl bg-gradient-to-r from-emerald-500/10 to-teal-600/10 border border-emerald-500/20",children:[s.jsx("h2",{className:"text-4xl mb-4",children:"Ready to Level Up Your Content Game?"}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8",children:"Join PubHub today and start managing all your social media from one powerful dashboard"}),s.jsxs(C,{onClick:e,size:"lg",className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white h-14 px-10",children:["Start Your Free Trial",s.jsx(yn,{className:"w-5 h-5 ml-2"})]}),s.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6 text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5 text-emerald-500"}),s.jsx("span",{children:"No credit card required"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(He,{className:"w-5 h-5 text-emerald-500"}),s.jsx("span",{children:"Free forever plan"})]})]})]})})}),s.jsx("footer",{className:"py-12 px-6 border-t border-border",children:s.jsx("div",{className:"max-w-7xl mx-auto",children:s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ks,{className:"h-8 w-auto"}),s.jsx("span",{className:"text-muted-foreground",children:" 2025 PubHub. All rights reserved."})]}),s.jsxs("div",{className:"flex items-center gap-6 text-muted-foreground",children:[s.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Privacy"}),s.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Terms"}),s.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Support"}),s.jsx("a",{href:"#",className:"hover:text-foreground transition-colors",children:"Contact"})]})]})})})]})}var qx=(e,t,n,r,a,i,o,l)=>{let c=document.documentElement,d=["light","dark"];function m(p){(Array.isArray(e)?e:[e]).forEach(f=>{let b=f==="class",w=b&&i?a.map(g=>i[g]||g):a;b?(c.classList.remove(...w),c.classList.add(i&&i[p]?i[p]:p)):c.setAttribute(f,p)}),u(p)}function u(p){l&&d.includes(p)&&(c.style.colorScheme=p)}function h(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)m(r);else try{let p=localStorage.getItem(t)||n,f=o&&p==="system"?h():p;m(f)}catch{}},Gx=v.createContext(void 0),Yx={setTheme:e=>{},themes:[]},Vx=()=>{var e;return(e=v.useContext(Gx))!=null?e:Yx};v.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:a,defaultTheme:i,value:o,themes:l,nonce:c,scriptProps:d})=>{let m=JSON.stringify([n,t,i,e,l,o,r,a]).slice(1,-1);return v.createElement("script",{...d,suppressHydrationWarning:!0,nonce:typeof window>"u"?c:"",dangerouslySetInnerHTML:{__html:`(${qx.toString()})(${m})`}})});const Kx=({...e})=>{const{theme:t="system"}=Vx();return s.jsx(jg,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})},Mc=[{id:"1",platform:"twitter",author:"@SarahTechVoice",authorImage:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=100&h=100&fit=crop",content:`Just shipped a new feature that our users have been requesting for months. The key? Actually listening to feedback and iterating quickly. 

#ProductDevelopment #StartupLife`,engagement:{likes:2847,comments:183,retweets:891,views:45200},timestamp:"2h ago",niche:"Tech & Startups",trendScore:98},{id:"2",platform:"instagram",author:"creative_studio_co",authorImage:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=100&h=100&fit=crop",content:"Behind the scenes of our latest brand photoshoot  Swipe to see the final results!",image:"https://images.unsplash.com/photo-1492691527719-9d1e07e534b4?w=600&h=600&fit=crop",engagement:{likes:15234,comments:421,shares:892},timestamp:"4h ago",niche:"Creative & Design",trendScore:95},{id:"3",platform:"linkedin",author:"Marcus Chen",authorImage:"https://images.unsplash.com/photo-1500648767791-00dcc994a43e?w=100&h=100&fit=crop",content:`After 5 years of building in public, here are the 3 things I wish I knew on day one:

1. Your network is your net worth
2. Consistency beats perfection
3. Share your failures, not just wins

What would you add to this list?`,engagement:{likes:3421,comments:287,shares:654},timestamp:"6h ago",niche:"Business & Career",trendScore:92},{id:"4",platform:"tiktok",author:"fitness_with_emma",authorImage:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=100&h=100&fit=crop",content:"15-min morning routine that changed my life  No equipment needed!",engagement:{likes:89234,comments:1204,shares:4521,views:124e4},timestamp:"8h ago",niche:"Health & Fitness",trendScore:97},{id:"5",platform:"youtube",author:"TechReview Hub",authorImage:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=100&h=100&fit=crop",content:"M3 MacBook Pro vs M2: Is the upgrade worth it? Full comparison + benchmarks",image:"https://images.unsplash.com/photo-1517336714731-489689fd1ca8?w=600&h=400&fit=crop",engagement:{likes:12453,comments:892,views:342e3},timestamp:"12h ago",niche:"Tech Reviews",trendScore:94},{id:"6",platform:"pinterest",author:"HomeDesignDaily",authorImage:"https://images.unsplash.com/photo-1534528741775-53994a69daeb?w=100&h=100&fit=crop",content:"Scandinavian minimalist bedroom ideas for 2024",image:"https://images.unsplash.com/photo-1556020685-ae41abfc9365?w=600&h=800&fit=crop",engagement:{likes:8921,shares:3421},timestamp:"1d ago",niche:"Home & Interior",trendScore:89},{id:"7",platform:"reddit",author:"u/developer_insights",authorImage:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=100&h=100&fit=crop",content:"I analyzed 10,000 job postings to find the most in-demand programming skills in 2024. Results surprised me.",engagement:{likes:4521,comments:687},timestamp:"18h ago",niche:"Programming",trendScore:91},{id:"8",platform:"facebook",author:"Local Foodie Adventures",authorImage:"https://images.unsplash.com/photo-1489424731084-a5d8b219a5bb?w=100&h=100&fit=crop",content:"Found this hidden gem in downtown! The pasta is INCREDIBLE  Who wants to join me next time?",image:"https://images.unsplash.com/photo-1621996346565-e3dbc646d9a9?w=600&h=600&fit=crop",engagement:{likes:1842,comments:234,shares:412},timestamp:"10h ago",niche:"Food & Dining",trendScore:86}];function Jx({selectedPlatform:e}){const n=[...e==="all"?Mc:Mc.filter(o=>o.platform===e)].sort((o,l)=>l.trendScore-o.trendScore),r=(o,l)=>o==="twitter"||o==="reddit"?Ss:o==="linkedin"||o==="facebook"?Ed:Ss,a=o=>o>=1e6?(o/1e6).toFixed(1)+"M":o>=1e3?(o/1e3).toFixed(1)+"K":o.toString(),i=o=>{const l=[],{engagement:c,platform:d}=o;if(c.views&&l.push({icon:wn,value:c.views,label:"views",color:"text-blue-400"}),c.likes){const m=r(d);l.push({icon:m,value:c.likes,label:d==="linkedin"?"reactions":"likes",color:"text-pink-400"})}return c.retweets&&l.push({icon:rf,value:c.retweets,label:"retweets",color:"text-green-400"}),c.comments&&l.push({icon:fo,value:c.comments,label:"comments",color:"text-purple-400"}),c.shares&&!c.retweets&&l.push({icon:af,value:c.shares,label:"shares",color:"text-orange-400"}),l};return n.length===0?s.jsxs(O,{className:"p-8 text-center",children:[s.jsx(tt,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground opacity-50"}),s.jsx("h3",{className:"mb-2 text-muted-foreground",children:"No trending posts"}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["No trending posts found for ",e==="all"?"any platform":e]})]}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(tt,{className:"w-5 h-5 text-orange-500"}),s.jsx("h2",{className:"text-xl",children:"Trending in Your Niche"})]}),s.jsxs(J,{variant:"outline",className:"gap-1",children:[s.jsx(tt,{className:"w-3 h-3"}),n.length," ",n.length===1?"post":"posts"]})]}),s.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:n.map(o=>{const l=i(o);return s.jsxs(O,{className:"p-4 hover:border-primary/50 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[s.jsxs(Nt,{className:"w-10 h-10 flex-shrink-0",children:[s.jsx(Hs,{src:o.authorImage,alt:o.author}),s.jsx(St,{children:o.author[0]})]}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"truncate",children:o.author}),s.jsx(pe,{platform:o.platform,className:"w-4 h-4 flex-shrink-0"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:o.timestamp})]})]}),s.jsxs(J,{variant:"outline",className:"ml-2 flex-shrink-0 gap-1 bg-gradient-to-r from-orange-500/10 to-red-500/10 border-orange-500/20",children:[s.jsx(tt,{className:"w-3 h-3"}),o.trendScore]})]}),s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-sm line-clamp-3 mb-2",children:o.content}),o.image&&s.jsx("div",{className:"rounded-lg overflow-hidden mt-2",children:s.jsx(yo,{src:o.image,alt:"Post content",className:"w-full h-48 object-cover"})})]}),s.jsx(J,{variant:"secondary",className:"mb-3 text-xs",children:o.niche}),s.jsx("div",{className:"flex items-center gap-4 pt-3 border-t border-border",children:l.map((c,d)=>{const m=c.icon;return s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(m,{className:`w-4 h-4 ${c.color}`}),s.jsx("span",{className:"text-sm",children:a(c.value)})]},d)})}),s.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t border-border",children:[s.jsx(C,{variant:"outline",size:"sm",className:"flex-1",children:"View Post"}),s.jsx(C,{variant:"outline",size:"sm",className:"flex-1",children:"Analyze"})]})]},o.id)})})]})}function Xx({selectedPlatform:e}){return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"mb-2",children:"Trending Content"}),s.jsx("p",{className:"text-muted-foreground",children:"Discover top-performing posts in your niche across social platforms"})]}),s.jsx(Jx,{selectedPlatform:e})]})}function Qx(){const[e,t]=v.useState("processing"),[n,r]=v.useState("Processing OAuth callback..."),[a,i]=v.useState("");v.useEffect(()=>{o()},[]);const o=async()=>{try{const c=new URLSearchParams(window.location.search),d=c.get("code"),m=c.get("state"),u=c.get("error"),h=c.get("error_description");let p=c.get("platform");if(!p){const j=window.location.pathname.match(/\/api\/oauth\/callback\/([^/]+)/);p=j?j[1]:null}const f=sessionStorage.getItem("oauth_state"),b=sessionStorage.getItem("oauth_platform")||p,w=sessionStorage.getItem("oauth_project_id");if(console.log("OAuth Callback Debug:",{code:d?"present":"missing",state:m?"present":"missing",platform:p||b,storedState:f,url:window.location.href}),u)throw new Error(h||u);if(!d||!m)throw new Error("Missing required OAuth parameters (code or state)");if(!b)throw new Error("Missing platform information. Please try connecting again.");if(m!==f)throw new Error("Invalid OAuth state - possible CSRF attack");i(b),r(`Connecting your ${b} account...`);const{data:{session:g},error:N}=await Ke.auth.getSession();if(N||!g?.access_token)throw new Error("Not authenticated. Please sign in first.");const E=g.access_token;Yt(E);const A=it();(!A||A!==E)&&(console.warn("Token not properly set, retrying..."),localStorage.setItem("pubhub_auth_token",E));const y=await Pi.callback(d,m,b);t("success"),r(`Successfully connected ${y.username||"your account"}!`),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_platform"),sessionStorage.removeItem("oauth_project_id"),sessionStorage.setItem("oauth_just_completed","true"),sessionStorage.setItem("oauth_completed_platform",b),setTimeout(()=>{window.location.href="/"},2e3)}catch(c){console.error("OAuth callback error:",c),t("error"),r(c.message||"Failed to connect platform"),sessionStorage.removeItem("oauth_state"),sessionStorage.removeItem("oauth_platform"),sessionStorage.removeItem("oauth_project_id")}},l=()=>{sessionStorage.removeItem("oauth_just_completed"),sessionStorage.removeItem("oauth_completed_platform"),window.location.href="/"};return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 to-black p-4",children:s.jsxs(O,{className:"max-w-md w-full p-8 text-center space-y-6",children:[e==="processing"&&s.jsxs(s.Fragment,{children:[s.jsx(Pe,{className:"w-16 h-16 mx-auto text-emerald-500 animate-spin"}),s.jsx("h2",{className:"text-xl",children:"Connecting Platform"}),s.jsx("p",{className:"text-muted-foreground",children:n})]}),e==="success"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-emerald-500/20 rounded-full flex items-center justify-center",children:s.jsx(He,{className:"w-10 h-10 text-emerald-500"})}),s.jsx("h2",{className:"text-xl",children:"Success!"}),s.jsx("p",{className:"text-muted-foreground",children:n}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Redirecting to dashboard..."})]}),e==="error"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"w-16 h-16 mx-auto bg-red-500/20 rounded-full flex items-center justify-center",children:s.jsx(Vt,{className:"w-10 h-10 text-red-500"})}),s.jsx("h2",{className:"text-xl",children:"Connection Failed"}),s.jsx("p",{className:"text-muted-foreground",children:n}),s.jsx(C,{onClick:l,variant:"outline",className:"w-full",children:"Return to Dashboard"})]})]})})}function Zx(){const[e,t]=v.useState("loading"),[n,r]=v.useState("");return v.useEffect(()=>{(async()=>{try{const{data:i,error:o}=await Ke.auth.getSession();if(o){console.error("Auth callback error:",o),r(o.message),t("error");return}if(i.session)t("success"),setTimeout(()=>{window.location.href="/"},2e3);else{const l=new URLSearchParams(window.location.search),c=new URLSearchParams(window.location.hash.substring(1)),d=l.get("error")||c.get("error"),m=l.get("error_description")||c.get("error_description");if(d){r(m||d),t("error");return}const u=c.get("access_token"),h=c.get("refresh_token");if(u&&h){const{error:p}=await Ke.auth.setSession({access_token:u,refresh_token:h});p?(console.error("Set session error:",p),r(p.message),t("error")):(t("success"),setTimeout(()=>{window.location.href="/"},2e3))}else r("No session found. Please try signing in again."),t("error")}}catch(i){console.error("Auth callback error:",i),r(i.message||"An error occurred during authentication."),t("error")}})()},[]),s.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:s.jsxs(O,{className:"w-full max-w-md",children:[s.jsxs(Je,{className:"space-y-1 text-center",children:[s.jsx(ks,{className:"h-12 w-auto mx-auto mb-4"}),s.jsxs(Gt,{className:"text-emerald-400",children:[e==="loading"&&"Completing Sign In...",e==="success"&&"Welcome to PubHub!",e==="error"&&"Sign In Failed"]}),s.jsxs(vs,{children:[e==="loading"&&"Please wait while we complete your authentication.",e==="success"&&"You have been successfully signed in. Redirecting to dashboard...",e==="error"&&"There was an issue with your sign-in. Please try again."]})]}),s.jsxs(ge,{className:"flex justify-center",children:[e==="loading"&&s.jsx(Pe,{className:"h-8 w-8 animate-spin text-emerald-400"}),e==="success"&&s.jsx(Si,{className:"h-8 w-8 text-emerald-400"}),e==="error"&&s.jsxs("div",{className:"text-center space-y-2",children:[s.jsx(Vt,{className:"h-8 w-8 text-red-500 mx-auto"}),n&&s.jsx("p",{className:"text-sm text-red-600",children:n}),s.jsx("button",{onClick:()=>window.location.href="/auth",className:"text-sm text-emerald-400 hover:text-emerald-300 underline",children:"Return to Sign In"})]})]})]})})}const ni=[{id:"1",name:"Sarah Tech",handle:"@sarahtech",platform:"twitter",avatar:"https://images.unsplash.com/photo-1494790108377-be9c29b29330?w=400&h=400&fit=crop&q=80",followers:125e3,avgEngagement:4.8,growthRate:12.5,topContent:"10 AI tools that will change your workflow",isRising:!0,verified:!0,niche:"AI & Technology",lastActive:"2 hours ago",contentFrequency:"3-5 posts/day"},{id:"2",name:"Mike Marketing",handle:"@mikemarketing",platform:"twitter",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=400&h=400&fit=crop&q=80",followers:89e3,avgEngagement:3.2,growthRate:8.3,topContent:"The complete guide to content marketing in 2025",isRising:!1,verified:!0,niche:"Digital Marketing",lastActive:"5 hours ago",contentFrequency:"2-3 posts/day"},{id:"3",name:"Emily Creative",handle:"@emilycreative",platform:"instagram",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=400&h=400&fit=crop&q=80",followers:245e3,avgEngagement:7.2,growthRate:15.8,topContent:"Morning routine for creative minds",isRising:!0,verified:!0,niche:"Lifestyle & Design",lastActive:"1 hour ago",contentFrequency:"Daily posts + Stories"},{id:"4",name:"Design Hub",handle:"@designhub",platform:"instagram",avatar:"https://images.unsplash.com/photo-1519345182560-3f2917c472ef?w=400&h=400&fit=crop&q=80",followers:18e4,avgEngagement:5.5,growthRate:10.2,topContent:"UI/UX trends that matter",isRising:!1,verified:!1,niche:"Design",lastActive:"3 hours ago",contentFrequency:"4-5 posts/week"},{id:"5",name:"Alex Business",handle:"alex-business",platform:"linkedin",avatar:"https://images.unsplash.com/photo-1556157382-97eda2d62296?w=400&h=400&fit=crop&q=80",followers:78e3,avgEngagement:2.8,growthRate:6.5,topContent:"Leadership lessons from startup failures",isRising:!1,verified:!1,niche:"Business Strategy",lastActive:"1 day ago",contentFrequency:"2-3 posts/week"},{id:"6",name:"Rachel Leadership",handle:"rachel-leadership",platform:"linkedin",avatar:"https://images.unsplash.com/photo-1573496359142-b8d87734a5a2?w=400&h=400&fit=crop&q=80",followers:92e3,avgEngagement:3.5,growthRate:9.1,topContent:"Building high-performance teams remotely",isRising:!0,verified:!0,niche:"Leadership",lastActive:"6 hours ago",contentFrequency:"Daily articles"},{id:"7",name:"TechReviewer Pro",handle:"@techreviewerpro",platform:"youtube",avatar:"https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=400&h=400&fit=crop&q=80",followers:52e4,avgEngagement:8.9,growthRate:18.3,topContent:"iPhone 16 Pro Max - The Truth",isRising:!0,verified:!0,niche:"Tech Reviews",lastActive:"12 hours ago",contentFrequency:"2 videos/week"},{id:"8",name:"Learn With Lisa",handle:"@learnwithlisa",platform:"youtube",avatar:"https://images.unsplash.com/photo-1580489944761-15a19d654956?w=400&h=400&fit=crop&q=80",followers:34e4,avgEngagement:6.7,growthRate:12.8,topContent:"Master React in 30 Days",isRising:!1,verified:!0,niche:"Education",lastActive:"2 days ago",contentFrequency:"Weekly tutorials"},{id:"9",name:"QuickTips Daily",handle:"@quicktipsdaily",platform:"tiktok",avatar:"https://images.unsplash.com/photo-1524504388940-b1c1722653e1?w=400&h=400&fit=crop&q=80",followers:89e4,avgEngagement:12.4,growthRate:28.5,topContent:"Life hacks you didn't know you needed",isRising:!0,verified:!0,niche:"Lifestyle",lastActive:"30 minutes ago",contentFrequency:"3-4 videos/day"},{id:"10",name:"Comedy Central",handle:"@comedycentral",platform:"tiktok",avatar:"https://images.unsplash.com/photo-1539571696357-5a69c17a67c6?w=400&h=400&fit=crop&q=80",followers:12e5,avgEngagement:15.8,growthRate:32.1,topContent:"When your code finally works",isRising:!0,verified:!0,niche:"Comedy",lastActive:"1 hour ago",contentFrequency:"Multiple daily"},{id:"11",name:"Community Connect",handle:"communityconnect",platform:"facebook",avatar:"https://images.unsplash.com/photo-1560250097-0b93528c311a?w=400&h=400&fit=crop&q=80",followers:156e3,avgEngagement:3.9,growthRate:5.2,topContent:"Building stronger local communities",isRising:!1,verified:!1,niche:"Community",lastActive:"4 hours ago",contentFrequency:"Daily updates"},{id:"12",name:"DIY Dreams",handle:"@diydreams",platform:"pinterest",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=400&h=400&fit=crop&q=80",followers:42e4,avgEngagement:9.2,growthRate:14.7,topContent:"30 DIY home decor ideas",isRising:!0,verified:!0,niche:"DIY & Crafts",lastActive:"5 hours ago",contentFrequency:"10+ pins/day"},{id:"13",name:"TechInsights",handle:"u/techinsights",platform:"reddit",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=400&h=400&fit=crop&q=80",followers:67e3,avgEngagement:4.1,growthRate:7.8,topContent:"Why this programming language is dying",isRising:!1,verified:!1,niche:"Technology",lastActive:"8 hours ago",contentFrequency:"Weekly posts"},{id:"14",name:"The Content Lab",handle:"thecontentlab.com",platform:"blog",avatar:"https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=400&h=400&fit=crop&q=80",followers:45e3,avgEngagement:2.3,growthRate:4.5,topContent:"SEO strategies that actually work in 2025",isRising:!1,verified:!1,niche:"Content Marketing",lastActive:"3 days ago",contentFrequency:"2-3 articles/week"}];function e0({selectedPlatform:e}){const[t,n]=v.useState("grid"),[r,a]=v.useState("all"),o=(()=>{let p=e==="all"?ni:ni.filter(f=>f.platform===e);return r!=="all"&&(p=p.filter(f=>f.niche===r)),p.sort((f,b)=>b.followers-f.followers)})(),l=p=>p>=1e6?`${(p/1e6).toFixed(1)}M`:p>=1e3?`${(p/1e3).toFixed(1)}K`:p.toString(),c=p=>p>=10?"text-green-500":p>=5?"text-yellow-500":"text-muted-foreground",d=Array.from(new Set(ni.map(p=>p.niche))),m=o.reduce((p,f)=>p+f.followers,0)/o.length||0,u=o.reduce((p,f)=>p+f.avgEngagement,0)/o.length||0,h=o[0];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx(Ii,{className:"w-6 h-6 text-yellow-500"}),s.jsx("h1",{className:"text-emerald-400",children:"Competition Watch"})]}),s.jsx("p",{className:"text-muted-foreground",children:"Track and analyze top content creators in your niche across all platforms"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsx(O,{className:"bg-gradient-to-br from-blue-500/10 to-cyan-500/10 border-blue-500/20",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Competitors"}),s.jsx("p",{className:"text-2xl font-bold",children:o.length})]}),s.jsx(aa,{className:"w-8 h-8 text-blue-400 opacity-50"})]})})}),s.jsx(O,{className:"bg-gradient-to-br from-green-500/10 to-emerald-500/10 border-green-500/20",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Followers"}),s.jsx("p",{className:"text-2xl font-bold",children:l(m)})]}),s.jsx(of,{className:"w-8 h-8 text-green-400 opacity-50"})]})})}),s.jsx(O,{className:"bg-gradient-to-br from-yellow-500/10 to-orange-500/10 border-yellow-500/20",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Engagement"}),s.jsxs("p",{className:"text-2xl font-bold",children:[u.toFixed(1),"%"]})]}),s.jsx(Ss,{className:"w-8 h-8 text-yellow-400 opacity-50"})]})})}),s.jsx(O,{className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border-purple-500/20",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Rising Stars"}),s.jsx("p",{className:"text-2xl font-bold",children:o.filter(p=>p.isRising).length})]}),s.jsx(tt,{className:"w-8 h-8 text-purple-400 opacity-50"})]})})})]}),h&&s.jsx(O,{className:"bg-gradient-to-r from-yellow-500/10 via-amber-500/10 to-orange-500/10 border-yellow-500/30",children:s.jsx(ge,{className:"p-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(Nt,{className:"h-16 w-16",children:[s.jsx(Hs,{src:h.avatar,alt:h.name}),s.jsx(St,{children:h.name[0]})]}),s.jsx(Ii,{className:"absolute -top-2 -right-2 w-6 h-6 text-yellow-500"})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h3",{className:"text-lg font-semibold",children:" Top Competitor"}),s.jsxs(J,{variant:"secondary",className:"bg-yellow-500/20 text-yellow-500",children:["#",1," in ",e==="all"?"All Platforms":e]})]}),s.jsx("p",{className:"text-lg",children:h.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[h.handle,"  ",l(h.followers)," followers"]}),s.jsxs("p",{className:"text-sm mt-1",children:['Latest: "',h.topContent,'"']})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(wn,{className:"w-4 h-4 mr-1"}),"Analyze"]}),s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(ws,{className:"w-4 h-4 mr-1"}),"View Profile"]})]})]})})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("div",{className:"flex items-center gap-4",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(cf,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("select",{value:r,onChange:p=>a(p.target.value),className:"bg-transparent border border-border rounded-md px-3 py-1 text-sm",children:[s.jsx("option",{value:"all",children:"All Niches"}),d.map(p=>s.jsx("option",{value:p,children:p},p))]})]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(C,{variant:t==="grid"?"default":"outline",size:"sm",onClick:()=>n("grid"),children:"Grid View"}),s.jsx(C,{variant:t==="list"?"default":"outline",size:"sm",onClick:()=>n("list"),children:"List View"})]})]}),o.length===0?s.jsxs($e,{children:[s.jsx($t,{className:"w-4 h-4"}),s.jsxs(Be,{children:["No competitors found for ",e==="all"?"any platform":e,r!=="all"&&` in ${r} niche`,"."]})]}):t==="grid"?s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map((p,f)=>s.jsx(O,{className:"hover:border-primary/50 transition-colors",children:s.jsxs(ge,{className:"p-6",children:[s.jsxs("div",{className:"flex items-start justify-between mb-4",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(Nt,{className:"h-12 w-12",children:[s.jsx(Hs,{src:p.avatar,alt:p.name}),s.jsx(St,{children:p.name[0]})]}),s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-background rounded-full p-0.5",children:s.jsx(pe,{platform:p.platform,className:"w-4 h-4"})})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-semibold",children:p.name}),p.verified&&s.jsx(_i,{className:"w-3 h-3 text-blue-400 fill-blue-400"}),p.isRising&&s.jsx(J,{variant:"secondary",className:"h-5 px-1.5 bg-green-500/20 text-green-500",children:s.jsx(tt,{className:"w-3 h-3"})})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:p.handle})]})]}),s.jsxs(J,{variant:"outline",className:"text-xs",children:["#",f+1]})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Followers"}),s.jsx("span",{className:"font-medium",children:l(p.followers)})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Engagement"}),s.jsxs("span",{className:`font-medium ${c(p.avgEngagement)}`,children:[p.avgEngagement,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Growth"}),s.jsxs("span",{className:"font-medium text-purple-500",children:["+",p.growthRate,"%"]})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Niche"}),s.jsx(J,{variant:"secondary",className:"text-xs",children:p.niche})]})]}),s.jsxs("div",{className:"mt-4 pt-4 border-t",children:[s.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Top Content:"}),s.jsxs("p",{className:"text-sm line-clamp-2",children:['"',p.topContent,'"']})]}),s.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:p.lastActive}),s.jsx("span",{children:p.contentFrequency})]}),s.jsxs("div",{className:"mt-4 flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",className:"flex-1",children:[s.jsx(wn,{className:"w-3 h-3 mr-1"}),"Analyze"]}),s.jsxs(C,{variant:"outline",size:"sm",className:"flex-1",children:[s.jsx(ws,{className:"w-3 h-3 mr-1"}),"View"]})]})]})},p.id))}):s.jsx("div",{className:"space-y-2",children:o.map((p,f)=>s.jsx(O,{className:"hover:border-primary/50 transition-colors",children:s.jsx(ge,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(J,{variant:"outline",className:"text-xs",children:["#",f+1]}),s.jsxs("div",{className:"relative",children:[s.jsxs(Nt,{className:"h-10 w-10",children:[s.jsx(Hs,{src:p.avatar,alt:p.name}),s.jsx(St,{children:p.name[0]})]}),s.jsx("div",{className:"absolute -bottom-1 -right-1 bg-background rounded-full p-0.5",children:s.jsx(pe,{platform:p.platform,className:"w-3 h-3"})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("p",{className:"font-medium",children:p.name}),p.verified&&s.jsx(_i,{className:"w-3 h-3 text-blue-400 fill-blue-400"}),p.isRising&&s.jsx(J,{variant:"secondary",className:"h-5 px-1.5 bg-green-500/20 text-green-500",children:"Rising"})]}),s.jsx("p",{className:"text-sm text-muted-foreground",children:p.handle})]})]}),s.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"font-medium",children:l(p.followers)}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Followers"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:`font-medium ${c(p.avgEngagement)}`,children:[p.avgEngagement,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Engagement"})]}),s.jsxs("div",{className:"text-center",children:[s.jsxs("p",{className:"font-medium text-purple-500",children:["+",p.growthRate,"%"]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Growth"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(C,{variant:"outline",size:"sm",children:[s.jsx(wn,{className:"w-3 h-3 mr-1"}),"Analyze"]}),s.jsx(C,{variant:"outline",size:"sm",children:s.jsx(ws,{className:"w-3 h-3"})})]})]})})},p.id))})]})}function t0({onNavigate:e}){const t=()=>{e?e("project-overview"):window.location.href="/"};return s.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center p-4 text-center",children:[s.jsx(ks,{className:"h-16 w-auto mb-8 opacity-50"}),s.jsx("h1",{className:"text-9xl font-bold text-emerald-500 mb-4",children:"404"}),s.jsx("h2",{className:"text-3xl font-semibold mb-2",children:"Page Not Found"}),s.jsx("p",{className:"text-muted-foreground max-w-md mb-8",children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you may have mistyped the URL."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs(C,{onClick:t,className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700",children:[s.jsx(lf,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),s.jsxs(C,{variant:"outline",onClick:()=>window.history.back(),children:[s.jsx(df,{className:"w-4 h-4 mr-2"}),"Go Back"]})]}),s.jsxs("div",{className:"mt-12 text-sm text-muted-foreground",children:[s.jsx("p",{children:"Need help?"}),s.jsx("a",{href:"mailto:support@pubhub.dev",className:"text-emerald-500 hover:text-emerald-400 underline underline-offset-2",children:"Contact Support"})]})]})}function s0(){const[e,t]=v.useState("project-overview"),[n,r]=v.useState("all"),[a,i]=v.useState("unread"),[o,l]=v.useState("details"),[c,d]=v.useState("profile"),[m,u]=v.useState(!1),[h,p]=v.useState(!1),[f,b]=v.useState(!1),[w,g]=v.useState("dark"),[N,E]=v.useState(!1),[A,y]=v.useState(!1),[j,_]=v.useState(!1),[T,k]=v.useState(""),[S,D]=v.useState(!1),[F,q]=v.useState(null),[te,I]=v.useState(null),[P,R]=v.useState(!0),{user:z,loading:U,isAuthenticated:V}=Ln();v.useEffect(()=>{w==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.title="PubHub - Creator Platform";const Y=document.querySelector("link[rel*='icon']")||document.createElement("link");Y.type="image/svg+xml",Y.rel="icon",Y.href="/public/favicon.svg",document.head.appendChild(Y)},[w]),v.useEffect(()=>{const Y=B=>{B.key==="k"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),_(!0)),B.key==="k"&&(B.metaKey||B.ctrlKey)&&B.shiftKey&&(B.preventDefault(),y(!0)),B.key===","&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),E(!0)),B.key==="n"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),t("compose")),B.key==="h"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),t("project-overview")),B.key==="i"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),t("inbox")),B.key==="c"&&(B.metaKey||B.ctrlKey)&&!B.shiftKey&&B.target===document.body&&(B.preventDefault(),t("calendar")),B.key==="a"&&(B.metaKey||B.ctrlKey)&&B.target===document.body&&(B.preventDefault(),t("analytics")),B.key==="m"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),t("library")),B.key==="b"&&(B.metaKey||B.ctrlKey)&&(B.preventDefault(),t("notifications")),B.key==="e"&&(B.metaKey||B.ctrlKey)&&B.target===document.body&&(B.preventDefault(),t("ebooks")),B.key==="t"&&(B.metaKey||B.ctrlKey)&&B.target===document.body&&(B.preventDefault(),t("trending")),B.key==="s"&&(B.metaKey||B.ctrlKey)&&B.target===document.body&&(B.preventDefault(),t("project-settings"))};return document.addEventListener("keydown",Y),()=>document.removeEventListener("keydown",Y)},[]);const ne=[{id:"project-overview",label:"Project Overview",icon:Td},{id:"compose",label:"Compose",icon:Ci},{id:"inbox",label:"Inbox",icon:ca},{id:"calendar",label:"Calendar",icon:Ks},{id:"trending",label:"Trending",icon:tt},{id:"competition",label:"Competition Watch",icon:Ii},{id:"analytics",label:"Analytics",icon:go},{id:"library",label:"Remix",icon:xo},{id:"ebooks",label:"Ebooks",icon:Zn},{id:"project-settings",label:"Project Settings",icon:_s}],re=(Y,B)=>{t(Y),Y==="inbox"?(p(!0),B&&typeof B=="string"&&["all","unread","comments","messages"].includes(B)&&i(B)):Y==="project-settings"&&(b(!0),B&&typeof B=="string"&&l(B))},K=Y=>{i(Y),t("inbox")},x=Y=>{l(Y),t("project-settings")},M=Y=>{Y&&d(Y),u(!0)},X=Y=>{r(Y)},le=Y=>{I(Y),t("compose")},Q=()=>{switch(e){case"project-overview":return s.jsx(Tg,{selectedPlatform:n,onNavigate:Y=>t(Y),onOpenAIChat:(Y,B)=>{Y&&k(Y),B!==void 0&&D(B),_(!0)}});case"compose":return s.jsx(Lg,{transformedContent:F,remixContent:te,onContentUsed:()=>{q(null),I(null)}});case"inbox":return s.jsx(Fg,{inboxView:a,selectedPlatform:n});case"calendar":return s.jsx(Zg,{selectedPlatform:n});case"analytics":return s.jsx(tx,{selectedPlatform:n});case"library":return s.jsx(vx,{selectedPlatform:n,onRemix:le});case"notifications":return s.jsx(jx,{onOpenSettings:()=>{M("notifications")}});case"ebooks":return s.jsx(Cx,{});case"trending":return s.jsx(Xx,{selectedPlatform:n});case"competition":return s.jsx(e0,{selectedPlatform:n});case"project-settings":return s.jsx(yx,{initialTab:o});default:return s.jsx(t0,{onNavigate:re})}};if(v.useEffect(()=>{sessionStorage.getItem("oauth_just_completed")==="true"&&V&&!U&&(t("project-settings"),l("connections"),b(!0))},[V,U]),U)return s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ks,{className:"h-16 w-auto mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(window.location.pathname==="/oauth/callback"||window.location.pathname.startsWith("/api/oauth/callback")){const B=!!new URL(window.location.href).searchParams.get("platform"),ft=!!sessionStorage.getItem("oauth_state"),Ms=window.location.pathname.startsWith("/api/oauth/callback");return B||ft||Ms?s.jsx(Qx,{}):s.jsx(Zx,{})}return V?s.jsx(Mf,{defaultOpen:!1,children:s.jsxs("div",{className:"flex min-h-screen w-full",children:[s.jsxs(Of,{collapsible:"icon",className:"fixed left-0 top-0 h-screen z-20",children:[s.jsx(Lf,{className:"border-b border-sidebar-border px-4 h-[53px] flex items-center justify-center group-hover/sidebar:justify-start",children:s.jsx(ks,{className:"h-12 w-auto group-data-[collapsible=icon]:h-8 group-hover/sidebar:h-12"})}),s.jsxs(Ff,{className:"px-3 pt-3 overflow-hidden flex flex-col",children:[s.jsx("div",{className:"pb-3",children:s.jsx(Ux,{})}),s.jsx($f,{className:"gap-0.5 flex-1",children:ne.map(Y=>Y.id==="inbox"?s.jsx(_c,{open:h,onOpenChange:p,className:"group/collapsible",children:s.jsxs(Xa,{children:[s.jsx(kc,{asChild:!0,children:s.jsxs(Qa,{onClick:()=>re(Y.id),isActive:e===Y.id,className:"w-full",tooltip:Y.label,children:[s.jsx(Y.icon,{className:"w-4 h-4"}),s.jsx("span",{children:Y.label}),s.jsx(na,{className:"ml-auto w-4 h-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-180 group-data-[collapsible=icon]:hidden group-hover/sidebar:inline"})]})}),s.jsx(Ec,{children:s.jsxs(Sc,{children:[s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="inbox"&&a==="all",children:s.jsxs("button",{onClick:()=>K("all"),children:[s.jsx(ca,{className:"w-4 h-4"}),s.jsx("span",{children:"All"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="inbox"&&a==="unread",children:s.jsxs("button",{onClick:()=>K("unread"),children:[s.jsx(Sd,{className:"w-4 h-4"}),s.jsx("span",{children:"Unread"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="inbox"&&a==="comments",children:s.jsxs("button",{onClick:()=>K("comments"),children:[s.jsx(vn,{className:"w-4 h-4"}),s.jsx("span",{children:"Comments"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="inbox"&&a==="messages",children:s.jsxs("button",{onClick:()=>K("messages"),children:[s.jsx(fo,{className:"w-4 h-4"}),s.jsx("span",{children:"Messages"})]})})})]})})]})},Y.id):Y.id==="project-settings"?s.jsx(_c,{open:f,onOpenChange:b,className:"group/collapsible",children:s.jsxs(Xa,{children:[s.jsx(kc,{asChild:!0,children:s.jsxs(Qa,{onClick:()=>re(Y.id),isActive:e===Y.id,className:"w-full",tooltip:Y.label,children:[s.jsx(Y.icon,{className:"w-4 h-4"}),s.jsx("span",{children:Y.label}),s.jsx(na,{className:"ml-auto w-4 h-4 transition-transform duration-200 group-data-[state=open]/collapsible:rotate-180 group-data-[collapsible=icon]:hidden group-hover/sidebar:inline"})]})}),s.jsx(Ec,{children:s.jsxs(Sc,{children:[s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="project-settings"&&o==="details",children:s.jsxs("button",{onClick:()=>x("details"),children:[s.jsx(_s,{className:"w-4 h-4"}),s.jsx("span",{children:"Details"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="project-settings"&&o==="connections",children:s.jsxs("button",{onClick:()=>x("connections"),children:[s.jsx(Us,{className:"w-4 h-4"}),s.jsx("span",{children:"Connections"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="project-settings"&&o==="automation",children:s.jsxs("button",{onClick:()=>x("automation"),children:[s.jsx(po,{className:"w-4 h-4"}),s.jsx("span",{children:"Automation"})]})})}),s.jsx(ps,{children:s.jsx(fs,{asChild:!0,isActive:e==="project-settings"&&o==="templates",children:s.jsxs("button",{onClick:()=>x("templates"),children:[s.jsx(ot,{className:"w-4 h-4"}),s.jsx("span",{children:"Templates"})]})})})]})})]})},Y.id):s.jsx(Xa,{children:s.jsxs(Qa,{onClick:()=>re(Y.id),isActive:e===Y.id,className:"w-full",tooltip:Y.label,children:[s.jsx(Y.icon,{className:"w-4 h-4"}),s.jsx("span",{children:Y.label})]})},Y.id))}),s.jsx("div",{className:"px-1 pt-3 pb-3 mt-auto",children:s.jsxs("button",{onClick:()=>re("compose"),className:"w-full h-10 px-4 rounded-lg bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white transition-all flex items-center justify-center gap-2 group-data-[collapsible=icon]:w-10 group-data-[collapsible=icon]:px-0 group-hover/sidebar:w-full group-hover/sidebar:px-4",children:[s.jsx(Ci,{className:"w-4 h-4"}),s.jsx("span",{className:"group-data-[collapsible=icon]:hidden group-hover/sidebar:inline",children:"Create Post"})]})})]})]}),s.jsxs("main",{className:"flex-1 flex flex-col min-w-0",children:[s.jsx(Rx,{currentView:e,selectedPlatform:n,onPlatformChange:X,onNavigate:re,onOpenAccountSettings:M,onOpenCommandPalette:()=>y(!0),onOpenAIChat:Y=>{_(!0)}}),s.jsx("div",{className:"flex-1 px-6 py-6 overflow-auto",children:Q()})]}),s.jsx(Bx,{open:j,onOpenChange:Y=>{_(Y),Y||(k(""),D(!1))},currentView:e,selectedPlatform:n,initialQuery:T,autoSubmit:S}),s.jsx(Fx,{open:A,onOpenChange:y,onNavigate:re,onPlatformSelect:X,onOpenSettings:()=>E(!0)}),s.jsx($x,{open:N,onOpenChange:E,theme:w,onThemeChange:g}),s.jsx(Et,{open:m,onOpenChange:u,children:s.jsx(Tt,{className:"max-w-4xl h-[80vh] p-0",children:s.jsx(nx,{initialTab:c,onClose:()=>u(!1)})})}),s.jsx(Kx,{})]})}):P?s.jsx(Wx,{onGetStarted:()=>R(!1),onSignUp:()=>R(!1)}):s.jsx(Hx,{})}function n0(){return s.jsx(Ng,{children:s.jsx(Sg,{children:s.jsx(s0,{})})})}const Z=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,je=globalThis,qs="10.22.0";function an(){return Pa(je),je}function Pa(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||qs,t[qs]=t[qs]||{}}function Fn(e,t,n=je){const r=n.__SENTRY__=n.__SENTRY__||{},a=r[qs]=r[qs]||{};return a[e]||(a[e]=t())}const r0=["debug","info","warn","error","log","assert","trace"],a0="Sentry Logger ",da={};function on(e){if(!("console"in je))return e();const t=je.console,n={},r=Object.keys(da);r.forEach(a=>{const i=da[a];n[a]=t[a],t[a]=i});try{return e()}finally{r.forEach(a=>{t[a]=n[a]})}}function i0(){wo().enabled=!0}function o0(){wo().enabled=!1}function Yd(){return wo().enabled}function c0(...e){jo("log",...e)}function l0(...e){jo("warn",...e)}function d0(...e){jo("error",...e)}function jo(e,...t){Z&&Yd()&&on(()=>{je.console[e](`${a0}[${e}]:`,...t)})}function wo(){return Z?Fn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const H={enable:i0,disable:o0,isEnabled:Yd,log:c0,warn:l0,error:d0},Vd=50,Xs="?",Oc=/\(error: (.*)\)/,Lc=/captureMessage|captureException/;function Kd(...e){const t=e.sort((n,r)=>n[0]-r[0]).map(n=>n[1]);return(n,r=0,a=0)=>{const i=[],o=n.split(`
`);for(let l=r;l<o.length;l++){let c=o[l];c.length>1024&&(c=c.slice(0,1024));const d=Oc.test(c)?c.replace(Oc,"$1"):c;if(!d.match(/\S*Error: /)){for(const m of t){const u=m(d);if(u){i.push(u);break}}if(i.length>=Vd+a)break}}return m0(i.slice(a))}}function u0(e){return Array.isArray(e)?Kd(...e):e}function m0(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Dr(t).function||"")&&t.pop(),t.reverse(),Lc.test(Dr(t).function||"")&&(t.pop(),Lc.test(Dr(t).function||"")&&t.pop()),t.slice(0,Vd).map(n=>({...n,filename:n.filename||Dr(t).filename,function:n.function||Xs}))}function Dr(e){return e[e.length-1]||{}}const ri="<anonymous>";function cs(e){try{return!e||typeof e!="function"?ri:e.name||ri}catch{return ri}}function Fc(e){const t=e.exception;if(t){const n=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&n.push(...r.stacktrace.frames)}),n}catch{return}}}const Vr={},$c={};function As(e,t){Vr[e]=Vr[e]||[],Vr[e].push(t)}function Rs(e,t){if(!$c[e]){$c[e]=!0;try{t()}catch(n){Z&&H.error(`Error while instrumenting ${e}`,n)}}}function _t(e,t){const n=e&&Vr[e];if(n)for(const r of n)try{r(t)}catch(a){Z&&H.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${cs(r)}
Error:`,a)}}let ai=null;function Jd(e){const t="error";As(t,e),Rs(t,h0)}function h0(){ai=je.onerror,je.onerror=function(e,t,n,r,a){return _t("error",{column:r,error:a,line:n,msg:e,url:t}),ai?ai.apply(this,arguments):!1},je.onerror.__SENTRY_INSTRUMENTED__=!0}let ii=null;function Xd(e){const t="unhandledrejection";As(t,e),Rs(t,p0)}function p0(){ii=je.onunhandledrejection,je.onunhandledrejection=function(e){return _t("unhandledrejection",e),ii?ii.apply(this,arguments):!0},je.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const Qd=Object.prototype.toString;function No(e){switch(Qd.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return ls(e,Error)}}function $n(e,t){return Qd.call(e)===`[object ${t}]`}function Zd(e){return $n(e,"ErrorEvent")}function Bc(e){return $n(e,"DOMError")}function f0(e){return $n(e,"DOMException")}function rs(e){return $n(e,"String")}function So(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function Tn(e){return e===null||So(e)||typeof e!="object"&&typeof e!="function"}function or(e){return $n(e,"Object")}function Da(e){return typeof Event<"u"&&ls(e,Event)}function g0(e){return typeof Element<"u"&&ls(e,Element)}function x0(e){return $n(e,"RegExp")}function Bn(e){return!!(e?.then&&typeof e.then=="function")}function b0(e){return or(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function ls(e,t){try{return e instanceof t}catch{return!1}}function eu(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function tu(e){return typeof Request<"u"&&ls(e,Request)}const _o=je,y0=80;function Ct(e,t={}){if(!e)return"<unknown>";try{let n=e;const r=5,a=[];let i=0,o=0;const l=" > ",c=l.length;let d;const m=Array.isArray(t)?t:t.keyAttrs,u=!Array.isArray(t)&&t.maxStringLength||y0;for(;n&&i++<r&&(d=v0(n,m),!(d==="html"||i>1&&o+a.length*c+d.length>=u));)a.push(d),o+=d.length,n=n.parentNode;return a.reverse().join(l)}catch{return"<unknown>"}}function v0(e,t){const n=e,r=[];if(!n?.tagName)return"";if(_o.HTMLElement&&n instanceof HTMLElement&&n.dataset){if(n.dataset.sentryComponent)return n.dataset.sentryComponent;if(n.dataset.sentryElement)return n.dataset.sentryElement}r.push(n.tagName.toLowerCase());const a=t?.length?t.filter(o=>n.getAttribute(o)).map(o=>[o,n.getAttribute(o)]):null;if(a?.length)a.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{n.id&&r.push(`#${n.id}`);const o=n.className;if(o&&rs(o)){const l=o.split(/\s+/);for(const c of l)r.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const l=n.getAttribute(o);l&&r.push(`[${o}="${l}"]`)}return r.join("")}function zn(){try{return _o.document.location.href}catch{return""}}function su(e){if(!_o.HTMLElement)return null;let t=e;const n=5;for(let r=0;r<n;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function ua(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function zc(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const a=e[r];try{eu(a)?n.push("[VueViewModel]"):n.push(String(a))}catch{n.push("[value cannot be serialized]")}}return n.join(t)}function Kr(e,t,n=!1){return rs(e)?x0(t)?t.test(e):rs(t)?n?e===t:e.includes(t):!1:!1}function as(e,t=[],n=!1){return t.some(r=>Kr(e,r,n))}function ct(e,t,n){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const a=n(r);typeof a=="function"&&nu(a,r);try{e[t]=a}catch{Z&&H.log(`Failed to replace method "${t}" in object`,e)}}function pt(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch{Z&&H.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function nu(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,pt(e,"__sentry_original__",t)}catch{}}function ko(e){return e.__sentry_original__}function ru(e){if(No(e))return{message:e.message,name:e.name,stack:e.stack,...Hc(e)};if(Da(e)){const t={type:e.type,target:Uc(e.target),currentTarget:Uc(e.currentTarget),...Hc(e)};return typeof CustomEvent<"u"&&ls(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function Uc(e){try{return g0(e)?Ct(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function Hc(e){if(typeof e=="object"&&e!==null){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}else return{}}function j0(e,t=40){const n=Object.keys(ru(e));n.sort();const r=n[0];if(!r)return"[object has no keys]";if(r.length>=t)return ua(r,t);for(let a=n.length;a>0;a--){const i=n.slice(0,a).join(", ");if(!(i.length>t))return a===n.length?i:ua(i,t)}return""}function w0(){const e=je;return e.crypto||e.msCrypto}let oi;function N0(){return Math.random()*16}function ht(e=w0()){try{if(e?.randomUUID)return e.randomUUID().replace(/-/g,"")}catch{}return oi||(oi="10000000100040008000"+1e11),oi.replace(/[018]/g,t=>(t^(N0()&15)>>t/4).toString(16))}function au(e){return e.exception?.values?.[0]}function $s(e){const{message:t,event_id:n}=e;if(t)return t;const r=au(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||n||"<unknown>":n||"<unknown>"}function $i(e,t,n){const r=e.exception=e.exception||{},a=r.values=r.values||[],i=a[0]=a[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Cn(e,t){const n=au(e);if(!n)return;const r={type:"generic",handled:!0},a=n.mechanism;if(n.mechanism={...r,...a,...t},t&&"data"in t){const i={...a?.data,...t.data};n.mechanism.data=i}}function Wc(e){if(S0(e))return!0;try{pt(e,"__sentry_captured__",!0)}catch{}return!1}function S0(e){try{return e.__sentry_captured__}catch{}}const iu=1e3;function cn(){return Date.now()/iu}function _0(){const{performance:e}=je;if(!e?.now||!e.timeOrigin)return cn;const t=e.timeOrigin;return()=>(t+e.now())/iu}let qc;function Ye(){return(qc??(qc=_0()))()}let ci;function k0(){const{performance:e}=je;if(!e?.now)return[void 0,"none"];const t=3600*1e3,n=e.now(),r=Date.now(),a=e.timeOrigin?Math.abs(e.timeOrigin+n-r):t,i=a<t,o=e.timing?.navigationStart,c=typeof o=="number"?Math.abs(o+n-r):t,d=c<t;return i||d?a<=c?[e.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[r,"dateNow"]}function lt(){return ci||(ci=k0()),ci[0]}function E0(e){const t=Ye(),n={sid:ht(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>C0(n)};return e&&In(n,e),n}function In(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ye(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:ht()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const n=e.timestamp-e.started;e.duration=n>=0?n:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function T0(e,t){let n={};e.status==="ok"&&(n={status:"exited"}),In(e,n)}function C0(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function xr(e,t,n=2){if(!t||typeof t!="object"||n<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const a in t)Object.prototype.hasOwnProperty.call(t,a)&&(r[a]=xr(r[a],t[a],n-1));return r}function ds(){return ht()}function is(){return ht().substring(16)}const Bi="_sentrySpan";function An(e,t){t?pt(e,Bi,t):delete e[Bi]}function ma(e){return e[Bi]}const I0=100;class Zt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:ds(),sampleRand:Math.random()}}clone(){const t=new Zt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,An(t,ma(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&In(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,n){return this._tags={...this._tags,[t]:n},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,n){return this._extra={...this._extra,[t]:n},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,n){return n===null?delete this._contexts[t]:this._contexts[t]=n,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const n=typeof t=="function"?t(this):t,r=n instanceof Zt?n.getScopeData():or(n)?t:void 0,{tags:a,extra:i,user:o,contexts:l,level:c,fingerprint:d=[],propagationContext:m}=r||{};return this._tags={...this._tags,...a},this._extra={...this._extra,...i},this._contexts={...this._contexts,...l},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),d.length&&(this._fingerprint=d),m&&(this._propagationContext=m),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,An(this,void 0),this._attachments=[],this.setPropagationContext({traceId:ds(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,n){const r=typeof n=="number"?n:I0;if(r<=0)return this;const a={timestamp:cn(),...t,message:t.message?ua(t.message,2048):t.message};return this._breadcrumbs.push(a),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),this._client?.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ma(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=xr(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,n){const r=n?.event_id||ht();if(!this._client)return Z&&H.warn("No client configured on scope - will not capture exception!"),r;const a=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:a,...n,event_id:r},this),r}captureMessage(t,n,r){const a=r?.event_id||ht();if(!this._client)return Z&&H.warn("No client configured on scope - will not capture message!"),a;const i=new Error(t);return this._client.captureMessage(t,n,{originalException:t,syntheticException:i,...r,event_id:a},this),a}captureEvent(t,n){const r=n?.event_id||ht();return this._client?(this._client.captureEvent(t,{...n,event_id:r},this),r):(Z&&H.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function A0(){return Fn("defaultCurrentScope",()=>new Zt)}function R0(){return Fn("defaultIsolationScope",()=>new Zt)}class P0{constructor(t,n){let r;t?r=t:r=new Zt;let a;n?a=n:a=new Zt,this._stack=[{scope:r}],this._isolationScope=a}withScope(t){const n=this._pushScope();let r;try{r=t(n)}catch(a){throw this._popScope(),a}return Bn(r)?r.then(a=>(this._popScope(),a),a=>{throw this._popScope(),a}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Rn(){const e=an(),t=Pa(e);return t.stack=t.stack||new P0(A0(),R0())}function D0(e){return Rn().withScope(e)}function M0(e,t){const n=Rn();return n.withScope(()=>(n.getStackTop().scope=e,t(e)))}function Gc(e){return Rn().withScope(()=>e(Rn().getIsolationScope()))}function O0(){return{withIsolationScope:Gc,withScope:D0,withSetScope:M0,withSetIsolationScope:(e,t)=>Gc(t),getCurrentScope:()=>Rn().getScope(),getIsolationScope:()=>Rn().getIsolationScope()}}function Un(e){const t=Pa(e);return t.acs?t.acs:O0()}function Te(){const e=an();return Un(e).getCurrentScope()}function es(){const e=an();return Un(e).getIsolationScope()}function L0(){return Fn("globalScope",()=>new Zt)}function Ma(...e){const t=an(),n=Un(t);if(e.length===2){const[r,a]=e;return r?n.withSetScope(r,a):n.withScope(a)}return n.withScope(e[0])}function be(){return Te().getClient()}function F0(e){const t=e.getPropagationContext(),{traceId:n,parentSpanId:r,propagationSpanId:a}=t,i={trace_id:n,span_id:a||is()};return r&&(i.parent_span_id=r),i}const Ft="sentry.source",Eo="sentry.sample_rate",ou="sentry.previous_trace_sample_rate",us="sentry.op",ze="sentry.origin",cr="sentry.idle_span_finish_reason",br="sentry.measurement_unit",yr="sentry.measurement_value",Yc="sentry.custom_span_name",To="sentry.profile_id",Hn="sentry.exclusive_time",$0="sentry.link.type",B0=0,cu=1,Fe=2;function z0(e){if(e<400&&e>=100)return{code:cu};if(e>=400&&e<500)switch(e){case 401:return{code:Fe,message:"unauthenticated"};case 403:return{code:Fe,message:"permission_denied"};case 404:return{code:Fe,message:"not_found"};case 409:return{code:Fe,message:"already_exists"};case 413:return{code:Fe,message:"failed_precondition"};case 429:return{code:Fe,message:"resource_exhausted"};case 499:return{code:Fe,message:"cancelled"};default:return{code:Fe,message:"invalid_argument"}}if(e>=500&&e<600)switch(e){case 501:return{code:Fe,message:"unimplemented"};case 503:return{code:Fe,message:"unavailable"};case 504:return{code:Fe,message:"deadline_exceeded"};default:return{code:Fe,message:"internal_error"}}return{code:Fe,message:"unknown_error"}}function lu(e,t){e.setAttribute("http.response.status_code",t);const n=z0(t);n.message!=="unknown_error"&&e.setStatus(n)}const du="_sentryScope",uu="_sentryIsolationScope";function U0(e){try{const t=je.WeakRef;if(typeof t=="function")return new t(e)}catch{}return e}function H0(e){if(e){if(typeof e=="object"&&"deref"in e&&typeof e.deref=="function")try{return e.deref()}catch{return}return e}}function W0(e,t,n){e&&(pt(e,uu,U0(n)),pt(e,du,t))}function ha(e){const t=e;return{scope:t[du],isolationScope:H0(t[uu])}}const Co="sentry-",q0=/^sentry-/,G0=8192;function mu(e){const t=V0(e);if(!t)return;const n=Object.entries(t).reduce((r,[a,i])=>{if(a.match(q0)){const o=a.slice(Co.length);r[o]=i}return r},{});if(Object.keys(n).length>0)return n}function Y0(e){if(!e)return;const t=Object.entries(e).reduce((n,[r,a])=>(a&&(n[`${Co}${r}`]=a),n),{});return K0(t)}function V0(e){if(!(!e||!rs(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,n)=>{const r=Vc(n);return Object.entries(r).forEach(([a,i])=>{t[a]=i}),t},{}):Vc(e)}function Vc(e){return e.split(",").map(t=>{const n=t.indexOf("=");if(n===-1)return[];const r=t.slice(0,n),a=t.slice(n+1);return[r,a].map(i=>{try{return decodeURIComponent(i.trim())}catch{return}})}).reduce((t,[n,r])=>(n&&r&&(t[n]=r),t),{})}function K0(e){if(Object.keys(e).length!==0)return Object.entries(e).reduce((t,[n,r],a)=>{const i=`${encodeURIComponent(n)}=${encodeURIComponent(r)}`,o=a===0?i:`${t},${i}`;return o.length>G0?(Z&&H.warn(`Not adding key: ${n} with val: ${r} to baggage header due to exceeding baggage size limits.`),t):o},"")}const J0=/^o(\d+)\./,X0=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Q0(e){return e==="http"||e==="https"}function Wn(e,t=!1){const{host:n,path:r,pass:a,port:i,projectId:o,protocol:l,publicKey:c}=e;return`${l}://${c}${t&&a?`:${a}`:""}@${n}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function Z0(e){const t=X0.exec(e);if(!t){on(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[n,r,a="",i="",o="",l=""]=t.slice(1);let c="",d=l;const m=d.split("/");if(m.length>1&&(c=m.slice(0,-1).join("/"),d=m.pop()),d){const u=d.match(/^\d+/);u&&(d=u[0])}return hu({host:i,pass:a,path:c,projectId:d,port:o,protocol:n,publicKey:r})}function hu(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function eb(e){if(!Z)return!0;const{port:t,projectId:n,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(H.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:n.match(/^\d+$/)?Q0(r)?t&&isNaN(parseInt(t,10))?(H.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(H.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(H.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),!1)}function tb(e){return e.match(J0)?.[1]}function sb(e){const t=e.getOptions(),{host:n}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):n&&(r=tb(n)),r}function nb(e){const t=typeof e=="string"?Z0(e):hu(e);if(!(!t||!eb(t)))return t}function Qs(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const pu=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function rb(e){if(!e)return;const t=e.match(pu);if(!t)return;let n;return t[3]==="1"?n=!0:t[3]==="0"&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}function ab(e,t){const n=rb(e),r=mu(t);if(!n?.traceId)return{traceId:ds(),sampleRand:Math.random()};const a=ib(n,r);r&&(r.sample_rand=a.toString());const{traceId:i,parentSpanId:o,parentSampled:l}=n;return{traceId:i,parentSpanId:o,sampled:l,dsc:r||{},sampleRand:a}}function fu(e=ds(),t=is(),n){let r="";return n!==void 0&&(r=n?"-1":"-0"),`${e}-${t}${r}`}function gu(e=ds(),t=is(),n){return`00-${e}-${t}-${n?"01":"00"}`}function ib(e,t){const n=Qs(t?.sample_rand);if(n!==void 0)return n;const r=Qs(t?.sample_rate);return r&&e?.parentSampled!==void 0?e.parentSampled?Math.random()*r:r+Math.random()*(1-r):Math.random()}const xu=0,Io=1;let Kc=!1;function ob(e){const{spanId:t,traceId:n}=e.spanContext(),{data:r,op:a,parent_span_id:i,status:o,origin:l,links:c}=we(e);return{parent_span_id:i,span_id:t,trace_id:n,data:r,op:a,status:o,origin:l,links:c}}function cb(e){const{spanId:t,traceId:n,isRemote:r}=e.spanContext(),a=r?t:we(e).parent_span_id,i=ha(e).scope,o=r?i?.getPropagationContext().propagationSpanId||is():t;return{parent_span_id:a,span_id:o,trace_id:n}}function lb(e){const{traceId:t,spanId:n}=e.spanContext(),r=Ps(e);return fu(t,n,r)}function db(e){const{traceId:t,spanId:n}=e.spanContext(),r=Ps(e);return gu(t,n,r)}function bu(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:n,traceFlags:r,...a},attributes:i})=>({span_id:t,trace_id:n,sampled:r===Io,attributes:i,...a}))}function Gs(e){return typeof e=="number"?Jc(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Jc(e.getTime()):Ye()}function Jc(e){return e>9999999999?e/1e3:e}function we(e){if(mb(e))return e.getSpanJSON();const{spanId:t,traceId:n}=e.spanContext();if(ub(e)){const{attributes:r,startTime:a,name:i,endTime:o,status:l,links:c}=e,d="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?e.parentSpanContext?.spanId:void 0;return{span_id:t,trace_id:n,data:r,description:i,parent_span_id:d,start_timestamp:Gs(a),timestamp:Gs(o)||void 0,status:yu(l),op:r[us],origin:r[ze],links:bu(c)}}return{span_id:t,trace_id:n,start_timestamp:0,data:{}}}function ub(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function mb(e){return typeof e.getSpanJSON=="function"}function Ps(e){const{traceFlags:t}=e.spanContext();return t===Io}function yu(e){if(!(!e||e.code===B0))return e.code===cu?"ok":e.message||"unknown_error"}const Ys="_sentryChildSpans",zi="_sentryRootSpan";function vu(e,t){const n=e[zi]||e;pt(t,zi,n),e[Ys]?e[Ys].add(t):pt(e,Ys,new Set([t]))}function hb(e,t){e[Ys]&&e[Ys].delete(t)}function Jr(e){const t=new Set;function n(r){if(!t.has(r)&&Ps(r)){t.add(r);const a=r[Ys]?Array.from(r[Ys]):[];for(const i of a)n(i)}}return n(e),Array.from(t)}function Ze(e){return e[zi]||e}function nt(){const e=an(),t=Un(e);return t.getActiveSpan?t.getActiveSpan():ma(Te())}function Ui(){Kc||(on(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly or use `ignoreSpans`.")}),Kc=!0)}let Xc=!1;function pb(){if(Xc)return;function e(){const t=nt(),n=t&&Ze(t);if(n){const r="internal_error";Z&&H.log(`[Tracing] Root span: ${r} -> Global error occurred`),n.setStatus({code:Fe,message:r})}}e.tag="sentry_tracingErrorCallback",Xc=!0,Jd(e),Xd(e)}function Bt(e){if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||be()?.getOptions();return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}function Qc(e){H.log(`Ignoring span ${e.op} - ${e.description} because it matches \`ignoreSpans\`.`)}function pa(e,t){if(!t?.length||!e.description)return!1;for(const n of t){if(gb(n)){if(Kr(e.description,n))return Z&&Qc(e),!0;continue}if(!n.name&&!n.op)continue;const r=n.name?Kr(e.description,n.name):!0,a=n.op?e.op&&Kr(e.op,n.op):!0;if(r&&a)return Z&&Qc(e),!0}return!1}function fb(e,t){const n=t.parent_span_id,r=t.span_id;if(n)for(const a of e)a.parent_span_id===r&&(a.parent_span_id=n)}function gb(e){return typeof e=="string"||e instanceof RegExp}const Ao="production",ju="_frozenDsc";function Xr(e,t){pt(e,ju,t)}function wu(e,t){const n=t.getOptions(),{publicKey:r}=t.getDsn()||{},a={environment:n.environment||Ao,release:n.release,public_key:r,trace_id:e,org_id:sb(t)};return t.emit("createDsc",a),a}function Nu(e,t){const n=t.getPropagationContext();return n.dsc||wu(n.traceId,e)}function ms(e){const t=be();if(!t)return{};const n=Ze(e),r=we(n),a=r.data,i=n.spanContext().traceState,o=i?.get("sentry.sample_rate")??a[Eo]??a[ou];function l(f){return(typeof o=="number"||typeof o=="string")&&(f.sample_rate=`${o}`),f}const c=n[ju];if(c)return l(c);const d=i?.get("sentry.dsc"),m=d&&mu(d);if(m)return l(m);const u=wu(e.spanContext().traceId,t),h=a[Ft],p=r.description;return h!=="url"&&p&&(u.transaction=p),Bt()&&(u.sampled=String(Ps(n)),u.sample_rand=i?.get("sentry.sample_rand")??ha(n).scope?.getPropagationContext().sampleRand.toString()),l(u),t.emit("createDsc",u,n),u}class Es{constructor(t={}){this._traceId=t.traceId||ds(),this._spanId=t.spanId||is()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:xu}}end(t){}setAttribute(t,n){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,n,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,n){}}function Mt(e,t=100,n=1/0){try{return Hi("",e,t,n)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Su(e,t=3,n=100*1024){const r=Mt(e,t);return vb(r)>n?Su(e,t-1,n):r}function Hi(e,t,n=1/0,r=1/0,a=jb()){const[i,o]=a;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const l=xb(e,t);if(!l.startsWith("[object "))return l;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:n;if(c===0)return l.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const p=d.toJSON();return Hi("",p,c-1,r,a)}catch{}const m=Array.isArray(t)?[]:{};let u=0;const h=ru(t);for(const p in h){if(!Object.prototype.hasOwnProperty.call(h,p))continue;if(u>=r){m[p]="[MaxProperties ~]";break}const f=h[p];m[p]=Hi(p,f,c-1,r,a),u++}return o(t),m}function xb(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(eu(t))return"[VueViewModel]";if(b0(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${cs(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const n=bb(t);return/^HTML(\w*)Element$/.test(n)?`[HTMLElement: ${n}]`:`[object ${n}]`}catch(n){return`**non-serializable** (${n})`}}function bb(e){const t=Object.getPrototypeOf(e);return t?.constructor?t.constructor.name:"null prototype"}function yb(e){return~-encodeURI(e).split(/%..|./).length}function vb(e){return yb(JSON.stringify(e))}function jb(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function n(r){e.delete(r)}return[t,n]}function Ds(e,t=[]){return[e,t]}function wb(e,t){const[n,r]=e;return[n,[...r,t]]}function Zc(e,t){const n=e[1];for(const r of n){const a=r[0].type;if(t(r,a))return!0}return!1}function Wi(e){const t=Pa(je);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Nb(e){const[t,n]=e;let r=JSON.stringify(t);function a(i){typeof r=="string"?r=typeof i=="string"?r+i:[Wi(r),i]:r.push(typeof i=="string"?Wi(i):i)}for(const i of n){const[o,l]=i;if(a(`
${JSON.stringify(o)}
`),typeof l=="string"||l instanceof Uint8Array)a(l);else{let c;try{c=JSON.stringify(l)}catch{c=JSON.stringify(Mt(l))}a(c)}}return typeof r=="string"?r:Sb(r)}function Sb(e){const t=e.reduce((a,i)=>a+i.length,0),n=new Uint8Array(t);let r=0;for(const a of e)n.set(a,r),r+=a.length;return n}function _b(e){return[{type:"span"},e]}function kb(e){const t=typeof e.data=="string"?Wi(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Eb={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item",metric:"metric",trace_metric:"metric"};function el(e){return Eb[e]}function Ro(e){if(!e?.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function _u(e,t,n,r){const a=e.sdkProcessingMetadata?.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!n&&r&&{dsn:Wn(r)},...a&&{trace:a}}}function Tb(e,t){if(!t)return e;const n=e.sdk||{};return e.sdk={...n,name:n.name||t.name,version:n.version||t.version,integrations:[...e.sdk?.integrations||[],...t.integrations||[]],packages:[...e.sdk?.packages||[],...t.packages||[]],settings:e.sdk?.settings||t.settings?{...e.sdk?.settings,...t.settings}:void 0},e}function Cb(e,t,n,r){const a=Ro(n),i={sent_at:new Date().toISOString(),...a&&{sdk:a},...!!r&&t&&{dsn:Wn(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return Ds(i,[o])}function Ib(e,t,n,r){const a=Ro(n),i=e.type&&e.type!=="replay_event"?e.type:"event";Tb(e,n?.sdk);const o=_u(e,a,r,t);return delete e.sdkProcessingMetadata,Ds(o,[[{type:i},e]])}function Ab(e,t){function n(p){return!!p.trace_id&&!!p.public_key}const r=ms(e[0]),a=t?.getDsn(),i=t?.getOptions().tunnel,o={sent_at:new Date().toISOString(),...n(r)&&{trace:r},...!!i&&a&&{dsn:Wn(a)}},{beforeSendSpan:l,ignoreSpans:c}=t?.getOptions()||{},d=c?.length?e.filter(p=>!pa(we(p),c)):e,m=e.length-d.length;m&&t?.recordDroppedEvent("before_send","span",m);const u=l?p=>{const f=we(p),b=l(f);return b||(Ui(),f)}:we,h=[];for(const p of d){const f=u(p);f&&h.push(_b(f))}return Ds(o,h)}function Rb(e){if(!Z)return;const{description:t="< unknown name >",op:n="< unknown op >",parent_span_id:r}=we(e),{spanId:a}=e.spanContext(),i=Ps(e),o=Ze(e),l=o===e,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${l?"root ":""}span`,d=[`op: ${n}`,`name: ${t}`,`ID: ${a}`];if(r&&d.push(`parent ID: ${r}`),!l){const{op:m,description:u}=we(o);d.push(`root ID: ${o.spanContext().spanId}`),m&&d.push(`root op: ${m}`),u&&d.push(`root description: ${u}`)}H.log(`${c}
  ${d.join(`
  `)}`)}function Pb(e){if(!Z)return;const{description:t="< unknown name >",op:n="< unknown op >"}=we(e),{spanId:r}=e.spanContext(),i=Ze(e)===e,o=`[Tracing] Finishing "${n}" ${i?"root ":""}span "${t}" with ID ${r}`;H.log(o)}function Db(e,t,n,r=nt()){const a=r&&Ze(r);a&&(Z&&H.log(`[Measurement] Setting measurement on root span: ${e} = ${t} ${n}`),a.addEvent(e,{[yr]:t,[br]:n}))}function tl(e){if(!e||e.length===0)return;const t={};return e.forEach(n=>{const r=n.attributes||{},a=r[br],i=r[yr];typeof a=="string"&&typeof i=="number"&&(t[n.name]={value:i,unit:a})}),t}const sl=1e3;class Oa{constructor(t={}){this._traceId=t.traceId||ds(),this._spanId=t.spanId||is(),this._startTime=t.startTimestamp||Ye(),this._links=t.links,this._attributes={},this.setAttributes({[ze]:"manual",[us]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,n){}spanContext(){const{_spanId:t,_traceId:n,_sampled:r}=this;return{spanId:t,traceId:n,traceFlags:r?Io:xu}}setAttribute(t,n){return n===void 0?delete this._attributes[t]:this._attributes[t]=n,this}setAttributes(t){return Object.keys(t).forEach(n=>this.setAttribute(n,t[n])),this}updateStartTime(t){this._startTime=Gs(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(Ft,"custom"),this}end(t){this._endTime||(this._endTime=Gs(t),Pb(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[us],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:yu(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[ze],profile_id:this._attributes[To],exclusive_time:this._attributes[Hn],measurements:tl(this._events),is_segment:this._isStandaloneSpan&&Ze(this)===this||void 0,segment_id:this._isStandaloneSpan?Ze(this).spanContext().spanId:void 0,links:bu(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,n,r){Z&&H.log("[Tracing] Adding an event to span:",t);const a=nl(n)?n:r||Ye(),i=nl(n)?{}:n||{},o={name:t,time:Gs(a),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=be();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===Ze(this)))return;if(this._isStandaloneSpan){this._sampled?Ob(Ab([this],t)):(Z&&H.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(ha(this).scope||Te()).captureEvent(r)}_convertSpanToTransaction(){if(!rl(we(this)))return;this._name||(Z&&H.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:n}=ha(this),r=t?.getScopeData().sdkProcessingMetadata?.normalizedRequest;if(this._sampled!==!0)return;const i=Jr(this).filter(m=>m!==this&&!Mb(m)).map(m=>we(m)).filter(rl),o=this._attributes[Ft];delete this._attributes[Yc],i.forEach(m=>{delete m.data[Yc]});const l={contexts:{trace:ob(this)},spans:i.length>sl?i.sort((m,u)=>m.start_timestamp-u.start_timestamp).slice(0,sl):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:n,dynamicSamplingContext:ms(this)},request:r,...o&&{transaction_info:{source:o}}},c=tl(this._events);return c&&Object.keys(c).length&&(Z&&H.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),l.measurements=c),l}}function nl(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function rl(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function Mb(e){return e instanceof Oa&&e.isStandaloneSpan()}function Ob(e){const t=be();if(!t)return;const n=e[1];if(!n||n.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function Lb(e,t,n=()=>{},r=()=>{}){let a;try{a=e()}catch(i){throw t(i),n(),i}return Fb(a,t,n,r)}function Fb(e,t,n,r){return Bn(e)?e.then(a=>(n(),r(a),a),a=>{throw t(a),n(),a}):(n(),r(e),e)}function $b(e,t,n){if(!Bt(e))return[!1];let r,a;typeof e.tracesSampler=="function"?(a=e.tracesSampler({...t,inheritOrSampleWith:l=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):l}),r=!0):t.parentSampled!==void 0?a=t.parentSampled:typeof e.tracesSampleRate<"u"&&(a=e.tracesSampleRate,r=!0);const i=Qs(a);if(i===void 0)return Z&&H.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(a)} of type ${JSON.stringify(typeof a)}.`),[!1];if(!i)return Z&&H.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=n<i;return o||Z&&H.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(a)})`),[o,i,r]}const ku="__SENTRY_SUPPRESS_TRACING__";function Bb(e,t){const n=Do();if(n.startSpan)return n.startSpan(e,t);const r=Tu(e),{forceTransaction:a,parentSpan:i,scope:o}=e,l=o?.clone();return Ma(l,()=>Ub(i)(()=>{const d=Te(),m=Cu(d,i),h=e.onlyIfParent&&!m?new Es:Eu({parentSpan:m,spanArguments:r,forceTransaction:a,scope:d});return An(d,h),Lb(()=>t(h),()=>{const{status:p}=we(h);h.isRecording()&&(!p||p==="ok")&&h.setStatus({code:Fe,message:"internal_error"})},()=>{h.end()})}))}function qn(e){const t=Do();if(t.startInactiveSpan)return t.startInactiveSpan(e);const n=Tu(e),{forceTransaction:r,parentSpan:a}=e;return(e.scope?o=>Ma(e.scope,o):a!==void 0?o=>Po(a,o):o=>o())(()=>{const o=Te(),l=Cu(o,a);return e.onlyIfParent&&!l?new Es:Eu({parentSpan:l,spanArguments:n,forceTransaction:r,scope:o})})}function Po(e,t){const n=Do();return n.withActiveSpan?n.withActiveSpan(e,t):Ma(r=>(An(r,e||void 0),t(r)))}function Eu({parentSpan:e,spanArguments:t,forceTransaction:n,scope:r}){if(!Bt()){const o=new Es;if(n||!e){const l={sampled:"false",sample_rate:"0",transaction:t.name,...ms(o)};Xr(o,l)}return o}const a=es();let i;if(e&&!n)i=zb(e,r,t),vu(e,i);else if(e){const o=ms(e),{traceId:l,spanId:c}=e.spanContext(),d=Ps(e);i=al({traceId:l,parentSpanId:c,...t},r,d),Xr(i,o)}else{const{traceId:o,dsc:l,parentSpanId:c,sampled:d}={...a.getPropagationContext(),...r.getPropagationContext()};i=al({traceId:o,parentSpanId:c,...t},r,d),l&&Xr(i,l)}return Rb(i),W0(i,r,a),i}function Tu(e){const n={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...n};return r.startTimestamp=Gs(e.startTime),delete r.startTime,r}return n}function Do(){const e=an();return Un(e)}function al(e,t,n){const r=be(),a=r?.getOptions()||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:n};r?.emit("beforeSampling",o,{decision:!1});const l=o.parentSampled??n,c=o.spanAttributes,d=t.getPropagationContext(),[m,u,h]=t.getScopeData().sdkProcessingMetadata[ku]?[!1]:$b(a,{name:i,parentSampled:l,attributes:c,parentSampleRate:Qs(d.dsc?.sample_rate)},d.sampleRand),p=new Oa({...e,attributes:{[Ft]:"custom",[Eo]:u!==void 0&&h?u:void 0,...c},sampled:m});return!m&&r&&(Z&&H.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",p),p}function zb(e,t,n){const{spanId:r,traceId:a}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[ku]?!1:Ps(e),o=i?new Oa({...n,parentSpanId:r,traceId:a,sampled:i}):new Es({traceId:a});vu(e,o);const l=be();return l&&(l.emit("spanStart",o),n.endTimestamp&&l.emit("spanEnd",o)),o}function Cu(e,t){if(t)return t;if(t===null)return;const n=ma(e);if(!n)return;const r=be();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?Ze(n):n}function Ub(e){return e!==void 0?t=>Po(e,t):t=>t()}const Qr={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},Hb="heartbeatFailed",Wb="idleTimeout",qb="finalTimeout",Gb="externalFinish";function Iu(e,t={}){const n=new Map;let r=!1,a,i=Gb,o=!t.disableAutoFinish;const l=[],{idleTimeout:c=Qr.idleTimeout,finalTimeout:d=Qr.finalTimeout,childSpanTimeout:m=Qr.childSpanTimeout,beforeSpanEnd:u,trimIdleSpanEndTimestamp:h=!0}=t,p=be();if(!p||!Bt()){const _=new Es,T={sample_rate:"0",sampled:"false",...ms(_)};return Xr(_,T),_}const f=Te(),b=nt(),w=Yb(e);w.end=new Proxy(w.end,{apply(_,T,k){if(u&&u(w),T instanceof Es)return;const[S,...D]=k,F=S||Ye(),q=Gs(F),te=Jr(w).filter(V=>V!==w),I=we(w);if(!te.length||!h)return j(q),Reflect.apply(_,T,[q,...D]);const P=p.getOptions().ignoreSpans,R=te?.reduce((V,ne)=>{const re=we(ne);return!re.timestamp||P&&pa(re,P)?V:V?Math.max(V,re.timestamp):re.timestamp},void 0),z=I.start_timestamp,U=Math.min(z?z+d/1e3:1/0,Math.max(z||-1/0,Math.min(q,R||1/0)));return j(U),Reflect.apply(_,T,[U,...D])}});function g(){a&&(clearTimeout(a),a=void 0)}function N(_){g(),a=setTimeout(()=>{!r&&n.size===0&&o&&(i=Wb,w.end(_))},c)}function E(_){a=setTimeout(()=>{!r&&o&&(i=Hb,w.end(_))},m)}function A(_){g(),n.set(_,!0);const T=Ye();E(T+m/1e3)}function y(_){if(n.has(_)&&n.delete(_),n.size===0){const T=Ye();N(T+c/1e3)}}function j(_){r=!0,n.clear(),l.forEach(q=>q()),An(f,b);const T=we(w),{start_timestamp:k}=T;if(!k)return;T.data[cr]||w.setAttribute(cr,i),H.log(`[Tracing] Idle span "${T.op}" finished`);const D=Jr(w).filter(q=>q!==w);let F=0;D.forEach(q=>{q.isRecording()&&(q.setStatus({code:Fe,message:"cancelled"}),q.end(_),Z&&H.log("[Tracing] Cancelling span since span ended early",JSON.stringify(q,void 0,2)));const te=we(q),{timestamp:I=0,start_timestamp:P=0}=te,R=P<=_,z=(d+c)/1e3,U=I-P<=z;if(Z){const V=JSON.stringify(q,void 0,2);R?U||H.log("[Tracing] Discarding span since it finished after idle span final timeout",V):H.log("[Tracing] Discarding span since it happened after idle span was finished",V)}(!U||!R)&&(hb(w,q),F++)}),F>0&&w.setAttribute("sentry.idle_span_discarded_spans",F)}return l.push(p.on("spanStart",_=>{if(r||_===w||we(_).timestamp||_ instanceof Oa&&_.isStandaloneSpan())return;Jr(w).includes(_)&&A(_.spanContext().spanId)})),l.push(p.on("spanEnd",_=>{r||y(_.spanContext().spanId)})),l.push(p.on("idleSpanEnableAutoFinish",_=>{_===w&&(o=!0,N(),n.size&&E())})),t.disableAutoFinish||N(),setTimeout(()=>{r||(w.setStatus({code:Fe,message:"deadline_exceeded"}),i=qb,w.end())},d),w}function Yb(e){const t=qn(e);return An(Te(),t),Z&&H.log("[Tracing] Started span is an idle span"),t}const li=0,il=1,ol=2;function La(e){return new lr(t=>{t(e)})}function Mo(e){return new lr((t,n)=>{n(e)})}class lr{constructor(t){this._state=li,this._handlers=[],this._runExecutor(t)}then(t,n){return new lr((r,a)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){a(o)}},i=>{if(!n)a(i);else try{r(n(i))}catch(o){a(o)}}]),this._executeHandlers()})}catch(t){return this.then(n=>n,t)}finally(t){return new lr((n,r)=>{let a,i;return this.then(o=>{i=!1,a=o,t&&t()},o=>{i=!0,a=o,t&&t()}).then(()=>{if(i){r(a);return}n(a)})})}_executeHandlers(){if(this._state===li)return;const t=this._handlers.slice();this._handlers=[],t.forEach(n=>{n[0]||(this._state===il&&n[1](this._value),this._state===ol&&n[2](this._value),n[0]=!0)})}_runExecutor(t){const n=(i,o)=>{if(this._state===li){if(Bn(o)){o.then(r,a);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{n(il,i)},a=i=>{n(ol,i)};try{t(r,a)}catch(i){a(i)}}}function Vb(e,t,n,r=0){try{const a=qi(t,n,e,r);return Bn(a)?a:La(a)}catch(a){return Mo(a)}}function qi(e,t,n,r){const a=n[r];if(!e||!a)return e;const i=a({...e},t);return Z&&i===null&&H.log(`Event processor "${a.id||"?"}" dropped event`),Bn(i)?i.then(o=>qi(o,t,n,r+1)):qi(i,t,n,r+1)}function Kb(e,t){const{fingerprint:n,span:r,breadcrumbs:a,sdkProcessingMetadata:i}=t;Jb(e,t),r&&Zb(e,r),ey(e,n),Xb(e,a),Qb(e,i)}function cl(e,t){const{extra:n,tags:r,user:a,contexts:i,level:o,sdkProcessingMetadata:l,breadcrumbs:c,fingerprint:d,eventProcessors:m,attachments:u,propagationContext:h,transactionName:p,span:f}=t;Mr(e,"extra",n),Mr(e,"tags",r),Mr(e,"user",a),Mr(e,"contexts",i),e.sdkProcessingMetadata=xr(e.sdkProcessingMetadata,l,2),o&&(e.level=o),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),m.length&&(e.eventProcessors=[...e.eventProcessors,...m]),u.length&&(e.attachments=[...e.attachments,...u]),e.propagationContext={...e.propagationContext,...h}}function Mr(e,t,n){e[t]=xr(e[t],n,1)}function Jb(e,t){const{extra:n,tags:r,user:a,contexts:i,level:o,transactionName:l}=t;Object.keys(n).length&&(e.extra={...n,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(a).length&&(e.user={...a,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),l&&e.type!=="transaction"&&(e.transaction=l)}function Xb(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}function Qb(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function Zb(e,t){e.contexts={trace:cb(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:ms(t),...e.sdkProcessingMetadata};const n=Ze(t),r=we(n).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function ey(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Fs,ll,dl,gs;function ty(e){const t=je._sentryDebugIds,n=je._debugIds;if(!t&&!n)return{};const r=t?Object.keys(t):[],a=n?Object.keys(n):[];if(gs&&r.length===ll&&a.length===dl)return gs;ll=r.length,dl=a.length,gs={},Fs||(Fs={});const i=(o,l)=>{for(const c of o){const d=l[c],m=Fs?.[c];if(m&&gs&&d)gs[m[0]]=d,Fs&&(Fs[c]=[m[0],d]);else if(d){const u=e(c);for(let h=u.length-1;h>=0;h--){const f=u[h]?.filename;if(f&&gs&&Fs){gs[f]=d,Fs[c]=[f,d];break}}}}};return t&&i(r,t),n&&i(a,n),gs}function Au(e,t,n,r,a,i){const{normalizeDepth:o=3,normalizeMaxBreadth:l=1e3}=e,c={...t,event_id:t.event_id||n.event_id||ht(),timestamp:t.timestamp||cn()},d=n.integrations||e.integrations.map(w=>w.name);sy(c,e),ay(c,d),a&&a.emit("applyFrameMetadata",t),t.type===void 0&&ny(c,e.stackParser);const m=oy(r,n.captureContext);n.mechanism&&Cn(c,n.mechanism);const u=a?a.getEventProcessors():[],h=L0().getScopeData();if(i){const w=i.getScopeData();cl(h,w)}if(m){const w=m.getScopeData();cl(h,w)}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),Kb(c,h);const f=[...u,...h.eventProcessors];return Vb(f,c,n).then(w=>(w&&ry(w),typeof o=="number"&&o>0?iy(w,o,l):w))}function sy(e,t){const{environment:n,release:r,dist:a,maxValueLength:i=250}=t;e.environment=e.environment||n||Ao,!e.release&&r&&(e.release=r),!e.dist&&a&&(e.dist=a);const o=e.request;o?.url&&(o.url=ua(o.url,i))}function ny(e,t){const n=ty(t);e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(a=>{a.filename&&(a.debug_id=n[a.filename])})})}function ry(e){const t={};if(e.exception?.values?.forEach(r=>{r.stacktrace?.frames?.forEach(a=>{a.debug_id&&(a.abs_path?t[a.abs_path]=a.debug_id:a.filename&&(t[a.filename]=a.debug_id),delete a.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.entries(t).forEach(([r,a])=>{n.push({type:"sourcemap",code_file:r,debug_id:a})})}function ay(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function iy(e,t,n){if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(a=>({...a,...a.data&&{data:Mt(a.data,t,n)}}))},...e.user&&{user:Mt(e.user,t,n)},...e.contexts&&{contexts:Mt(e.contexts,t,n)},...e.extra&&{extra:Mt(e.extra,t,n)}};return e.contexts?.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=Mt(e.contexts.trace.data,t,n))),e.spans&&(r.spans=e.spans.map(a=>({...a,...a.data&&{data:Mt(a.data,t,n)}}))),e.contexts?.flags&&r.contexts&&(r.contexts.flags=Mt(e.contexts.flags,3,n)),r}function oy(e,t){if(!t)return e;const n=e?e.clone():new Zt;return n.update(t),n}function cy(e){if(e)return ly(e)?{captureContext:e}:uy(e)?{captureContext:e}:e}function ly(e){return e instanceof Zt||typeof e=="function"}const dy=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function uy(e){return Object.keys(e).some(t=>dy.includes(t))}function Ru(e,t){return Te().captureException(e,cy(t))}function Pu(e,t){return Te().captureEvent(e,t)}function Du(e,t){es().setContext(e,t)}function my(){const e=be();return e?.getOptions().enabled!==!1&&!!e?.getTransport()}function hy(e){es().addEventProcessor(e)}function ul(e){const t=es(),n=Te(),{userAgent:r}=je.navigator||{},a=E0({user:n.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return i?.status==="ok"&&In(i,{status:"exited"}),Mu(),t.setSession(a),a}function Mu(){const e=es(),n=Te().getSession()||e.getSession();n&&T0(n),Ou(),e.setSession()}function Ou(){const e=es(),t=be(),n=e.getSession();n&&t&&t.captureSession(n)}function ml(e=!1){if(e){Mu();return}Ou()}const py="7";function fy(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function gy(e){return`${fy(e)}${e.projectId}/envelope/`}function xy(e,t){const n={sentry_version:py};return e.publicKey&&(n.sentry_key=e.publicKey),t&&(n.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(n).toString()}function by(e,t,n){return t||`${gy(e)}?${xy(e,n)}`}const hl=[];function yy(e){const t={};return e.forEach(n=>{const{name:r}=n,a=t[r];a&&!a.isDefaultInstance&&n.isDefaultInstance||(t[r]=n)}),Object.values(t)}function vy(e){const t=e.defaultIntegrations||[],n=e.integrations;t.forEach(a=>{a.isDefaultInstance=!0});let r;if(Array.isArray(n))r=[...t,...n];else if(typeof n=="function"){const a=n(t);r=Array.isArray(a)?a:[a]}else r=t;return yy(r)}function jy(e,t){const n={};return t.forEach(r=>{r&&Lu(e,r,n)}),n}function pl(e,t){for(const n of t)n?.afterAllSetup&&n.afterAllSetup(e)}function Lu(e,t,n){if(n[t.name]){Z&&H.log(`Integration skipped because it was already installed: ${t.name}`);return}if(n[t.name]=t,hl.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),hl.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(a,i)=>r(a,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),a=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(a)}Z&&H.log(`Integration installed: ${t.name}`)}function wy(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Ny(e,t,n,r){const a={};return t?.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(a.dsn=Wn(r)),Ds(a,[wy(e)])}function Fu(e,t){const n=t??Sy(e)??[];if(n.length===0)return;const r=e.getOptions(),a=Ny(n,r._metadata,r.tunnel,e.getDsn());$u().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(a)}function Sy(e){return $u().get(e)}function $u(){return Fn("clientToLogBufferMap",()=>new WeakMap)}function _y(e){return[{type:"trace_metric",item_count:e.length,content_type:"application/vnd.sentry.items.trace-metric+json"},{items:e}]}function ky(e,t,n,r){const a={};return t?.sdk&&(a.sdk={name:t.sdk.name,version:t.sdk.version}),n&&r&&(a.dsn=Wn(r)),Ds(a,[_y(e)])}function Bu(e,t){const n=t??Ey(e)??[];if(n.length===0)return;const r=e.getOptions(),a=ky(n,r._metadata,r.tunnel,e.getDsn());zu().set(e,[]),e.emit("flushMetrics"),e.sendEnvelope(a)}function Ey(e){return zu().get(e)}function zu(){return Fn("clientToMetricBufferMap",()=>new WeakMap)}function Ty(e,t,n){const r=[{type:"client_report"},{timestamp:cn(),discarded_events:e}];return Ds(t?{dsn:t}:{},[r])}function Uu(e){const t=[];e.message&&t.push(e.message);try{const n=e.exception.values[e.exception.values.length-1];n?.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`))}catch{}return t}function Cy(e){const{trace_id:t,parent_span_id:n,span_id:r,status:a,origin:i,data:o,op:l}=e.contexts?.trace??{};return{data:o??{},description:e.transaction,op:l,parent_span_id:n,span_id:r??"",start_timestamp:e.start_timestamp??0,status:a,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o?.[To],exclusive_time:o?.[Hn],measurements:e.measurements,is_segment:!0}}function Iy(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[To]:e.profile_id},...e.exclusive_time&&{[Hn]:e.exclusive_time}}}},measurements:e.measurements}}const fl="Not capturing exception because it's already been captured.",gl="Discarded session because of missing or non-string release",Hu=Symbol.for("SentryInternalError"),Wu=Symbol.for("SentryDoNotSendEventError"),Ay=5e3;function Zr(e){return{message:e,[Hu]:!0}}function di(e){return{message:e,[Wu]:!0}}function xl(e){return!!e&&typeof e=="object"&&Hu in e}function bl(e){return!!e&&typeof e=="object"&&Wu in e}function yl(e,t,n,r,a){let i=0,o;e.on(n,()=>{i=0,clearTimeout(o)}),e.on(t,l=>{i+=r(l),i>=8e5?a(e):(clearTimeout(o),o=setTimeout(()=>{a(e)},Ay))}),e.on("flush",()=>{a(e)})}class Ry{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=nb(t.dsn):Z&&H.warn("No DSN provided, client will not send events."),this._dsn){const n=by(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:n})}this._options.enableLogs&&yl(this,"afterCaptureLog","flushLogs",Oy,Fu),this._options._experiments?.enableMetrics&&yl(this,"afterCaptureMetric","flushMetrics",My,Bu)}captureException(t,n,r){const a=ht();if(Wc(t))return Z&&H.log(fl),a;const i={event_id:a,...n};return this._process(this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(t,n,r,a){const i={event_id:ht(),...r},o=So(t)?t:String(t),l=Tn(t)?this.eventFromMessage(o,n,i):this.eventFromException(t,i);return this._process(l.then(c=>this._captureEvent(c,i,a))),i.event_id}captureEvent(t,n,r){const a=ht();if(n?.originalException&&Wc(n.originalException))return Z&&H.log(fl),a;const i={event_id:a,...n},o=t.sdkProcessingMetadata||{},l=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,l||r,c)),i.event_id}captureSession(t){this.sendSession(t),In(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}async flush(t){const n=this._transport;if(!n)return!0;this.emit("flush");const r=await this._isClientDoneProcessing(t),a=await n.flush(t);return r&&a}async close(t){const n=await this.flush(t);return this.getOptions().enabled=!1,this.emit("close"),n}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const n=this._integrations[t.name];Lu(this,t,this._integrations),n||pl(this,[t])}sendEvent(t,n={}){this.emit("beforeSendEvent",t,n);let r=Ib(t,this._dsn,this._options._metadata,this._options.tunnel);for(const a of n.attachments||[])r=wb(r,kb(a));this.sendEnvelope(r).then(a=>this.emit("afterSendEvent",t,a))}sendSession(t){const{release:n,environment:r=Ao}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!n){Z&&H.warn(gl);return}i.release=i.release||n,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!n){Z&&H.warn(gl);return}t.release=t.release||n,t.environment=t.environment||r}this.emit("beforeSendSession",t);const a=Cb(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(a)}recordDroppedEvent(t,n,r=1){if(this._options.sendClientReports){const a=`${t}:${n}`;Z&&H.log(`Recording outcome: "${a}"${r>1?` (${r} times)`:""}`),this._outcomes[a]=(this._outcomes[a]||0)+r}}on(t,n){const r=this._hooks[t]=this._hooks[t]||new Set,a=(...i)=>n(...i);return r.add(a),()=>{r.delete(a)}}emit(t,...n){const r=this._hooks[t];r&&r.forEach(a=>a(...n))}async sendEnvelope(t){if(this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport)try{return await this._transport.send(t)}catch(n){return Z&&H.error("Error while sending envelope:",n),{}}return Z&&H.error("Transport disabled"),{}}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=jy(this,t),pl(this,t)}_updateSessionFromEvent(t,n){let r=n.level==="fatal",a=!1;const i=n.exception?.values;if(i){a=!0;for(const c of i)if(c.mechanism?.handled===!1){r=!0;break}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(In(t,{...r&&{status:"crashed"},errors:t.errors||Number(a||r)}),this.captureSession(t))}async _isClientDoneProcessing(t){let n=0;for(;!t||n<t;){if(await new Promise(r=>setTimeout(r,1)),!this._numProcessing)return!0;n++}return!1}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,n,r,a){const i=this.getOptions(),o=Object.keys(this._integrations);return!n.integrations&&o?.length&&(n.integrations=o),this.emit("preprocessEvent",t,n),t.type||a.setLastEventId(t.event_id||n.event_id),Au(i,t,n,r,this,a).then(l=>{if(l===null)return l;this.emit("postprocessEvent",l,n),l.contexts={trace:F0(r),...l.contexts};const c=Nu(this,r);return l.sdkProcessingMetadata={dynamicSamplingContext:c,...l.sdkProcessingMetadata},l})}_captureEvent(t,n={},r=Te(),a=es()){return Z&&Gi(t)&&H.log(`Captured error event \`${Uu(t)[0]||"<unknown>"}\``),this._processEvent(t,n,r,a).then(i=>i.event_id,i=>{Z&&(bl(i)?H.log(i.message):xl(i)?H.warn(i.message):H.warn(i))})}_processEvent(t,n,r,a){const i=this.getOptions(),{sampleRate:o}=i,l=qu(t),c=Gi(t),d=t.type||"error",m=`before send for type \`${d}\``,u=typeof o>"u"?void 0:Qs(o);if(c&&typeof u=="number"&&Math.random()>u)return this.recordDroppedEvent("sample_rate","error"),Mo(di(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const h=d==="replay_event"?"replay":d;return this._prepareEvent(t,n,r,a).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",h),di("An event processor returned `null`, will not send event.");if(n.data&&n.data.__sentry__===!0)return p;const b=Dy(this,i,p,n);return Py(b,m)}).then(p=>{if(p===null){if(this.recordDroppedEvent("before_send",h),l){const g=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",g)}throw di(`${m} returned \`null\`, will not send event.`)}const f=r.getSession()||a.getSession();if(c&&f&&this._updateSessionFromEvent(f,p),l){const w=p.sdkProcessingMetadata?.spanCountBeforeProcessing||0,g=p.spans?p.spans.length:0,N=w-g;N>0&&this.recordDroppedEvent("before_send","span",N)}const b=p.transaction_info;if(l&&b&&p.transaction!==t.transaction){const w="custom";p.transaction_info={...b,source:w}}return this.sendEvent(p,n),p}).then(null,p=>{throw bl(p)||xl(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),Zr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(t){this._numProcessing++,t.then(n=>(this._numProcessing--,n),n=>(this._numProcessing--,n))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([n,r])=>{const[a,i]=n.split(":");return{reason:a,category:i,quantity:r}})}_flushOutcomes(){Z&&H.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){Z&&H.log("No outcomes to send");return}if(!this._dsn){Z&&H.log("No dsn provided, will not send outcomes");return}Z&&H.log("Sending outcomes:",t);const n=Ty(t,this._options.tunnel&&Wn(this._dsn));this.sendEnvelope(n)}}function Py(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Bn(e))return e.then(r=>{if(!or(r)&&r!==null)throw Zr(n);return r},r=>{throw Zr(`${t} rejected with ${r}`)});if(!or(e)&&e!==null)throw Zr(n);return e}function Dy(e,t,n,r){const{beforeSend:a,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:l}=t;let c=n;if(Gi(c)&&a)return a(c,r);if(qu(c)){if(o||l){const d=Cy(c);if(l?.length&&pa(d,l))return null;if(o){const m=o(d);m?c=xr(n,Iy(m)):Ui()}if(c.spans){const m=[],u=c.spans;for(const p of u){if(l?.length&&pa(p,l)){fb(u,p);continue}if(o){const f=o(p);f?m.push(f):(Ui(),m.push(p))}else m.push(p)}const h=c.spans.length-m.length;h&&e.recordDroppedEvent("before_send","span",h),c.spans=m}}if(i){if(c.spans){const d=c.spans.length;c.sdkProcessingMetadata={...n.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return i(c,r)}}return c}function Gi(e){return e.type===void 0}function qu(e){return e.type==="transaction"}function My(e){let t=0;return e.name&&(t+=e.name.length*2),typeof e.value=="string"?t+=e.value.length*2:t+=8,t+Gu(e.attributes)}function Oy(e){let t=0;return e.message&&(t+=e.message.length*2),t+Gu(e.attributes)}function Gu(e){if(!e)return 0;let t=0;return Object.values(e).forEach(n=>{Array.isArray(n)?t+=n.length*vl(n[0]):Tn(n)?t+=vl(n):t+=100}),t}function vl(e){return typeof e=="string"?e.length*2:typeof e=="number"?8:typeof e=="boolean"?4:0}function Ly(e,t){t.debug===!0&&(Z?H.enable():on(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Te().update(t.initialScope);const r=new e(t);return Fy(r),r.init(),r}function Fy(e){Te().setClient(e)}const Yu=Symbol.for("SentryBufferFullError");function $y(e=100){const t=new Set;function n(){return t.size<e}function r(o){t.delete(o)}function a(o){if(!n())return Mo(Yu);const l=o();return t.add(l),l.then(()=>r(l),()=>r(l)),l}function i(o){if(!t.size)return La(!0);const l=Promise.allSettled(Array.from(t)).then(()=>!0);if(!o)return l;const c=[l,new Promise(d=>setTimeout(()=>d(!1),o))];return Promise.race(c)}return{get $(){return Array.from(t)},add:a,drain:i}}const By=60*1e3;function zy(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return n*1e3;const r=Date.parse(`${e}`);return isNaN(r)?By:r-t}function Uy(e,t){return e[t]||e.all||0}function Vu(e,t,n=Date.now()){return Uy(e,t)>n}function Ku(e,{statusCode:t,headers:n},r=Date.now()){const a={...e},i=n?.["x-sentry-rate-limits"],o=n?.["retry-after"];if(i)for(const l of i.trim().split(",")){const[c,d,,,m]=l.split(":",5),u=parseInt(c,10),h=(isNaN(u)?60:u)*1e3;if(!d)a.all=r+h;else for(const p of d.split(";"))p==="metric_bucket"?(!m||m.split(";").includes("custom"))&&(a[p]=r+h):a[p]=r+h}else o?a.all=r+zy(o,r):t===429&&(a.all=r+60*1e3);return a}const Hy=64;function Wy(e,t,n=$y(e.bufferSize||Hy)){let r={};const a=o=>n.drain(o);function i(o){const l=[];if(Zc(o,(u,h)=>{const p=el(h);Vu(r,p)?e.recordDroppedEvent("ratelimit_backoff",p):l.push(u)}),l.length===0)return Promise.resolve({});const c=Ds(o[0],l),d=u=>{Zc(c,(h,p)=>{e.recordDroppedEvent(u,el(p))})},m=()=>t({body:Nb(c)}).then(u=>(u.statusCode!==void 0&&(u.statusCode<200||u.statusCode>=300)&&Z&&H.warn(`Sentry responded with status code ${u.statusCode} to sent event.`),r=Ku(r,u),u),u=>{throw d("network_error"),Z&&H.error("Encountered error running transport request:",u),u});return n.add(m).then(u=>u,u=>{if(u===Yu)return Z&&H.error("Skipped sending event because buffer is full."),d("queue_overflow"),Promise.resolve({});throw u})}return{send:i,flush:a}}const qy="thismessage:/";function Oo(e){return"isRelative"in e}function Lo(e,t){const n=e.indexOf("://")<=0&&e.indexOf("//")!==0,r=n?qy:void 0;try{if("canParse"in URL&&!URL.canParse(e,r))return;const a=new URL(e,r);return n?{isRelative:n,pathname:a.pathname,search:a.search,hash:a.hash}:a}catch{}}function Gy(e){if(Oo(e))return e.pathname;const t=new URL(e);return t.search="",t.hash="",["80","443"].includes(t.port)&&(t.port=""),t.password&&(t.password="%filtered%"),t.username&&(t.username="%filtered%"),t.toString()}function Vs(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:r,relative:t[5]+n+r}}function Yy(e){return e.split(/[?#]/,1)[0]}function Vy(e,t){const n=t?.getDsn(),r=t?.getOptions().tunnel;return Jy(e,n)||Ky(e,r)}function Ky(e,t){return t?jl(e)===jl(t):!1}function Jy(e,t){const n=Lo(e);return!n||Oo(n)?!1:t?n.host.includes(t.host)&&/(^|&|\?)sentry_key=/.test(n.search):!1}function jl(e){return e[e.length-1]==="/"?e.slice(0,-1):e}function Xy(e){"aggregates"in e?e.attrs?.ip_address===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function Ju(e,t,n=[t],r="npm"){const a=e._metadata||{};a.sdk||(a.sdk={name:`sentry.javascript.${t}`,packages:n.map(i=>({name:`${r}:@sentry/${i}`,version:qs})),version:qs}),e._metadata=a}function Xu(e={}){const t=e.client||be();if(!my()||!t)return{};const n=an(),r=Un(n);if(r.getTraceData)return r.getTraceData(e);const a=e.scope||Te(),i=e.span||nt(),o=i?lb(i):Qy(a),l=i?ms(i):Nu(t,a),c=Y0(l);if(!pu.test(o))return H.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const m={"sentry-trace":o,baggage:c};if(e.propagateTraceparent){const u=i?db(i):Zy(a);u&&(m.traceparent=u)}return m}function Qy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return fu(t,r,n)}function Zy(e){const{traceId:t,sampled:n,propagationSpanId:r}=e.getPropagationContext();return gu(t,r,n)}function ev(e,t,n){let r,a,i;const o=n?.maxWait?Math.max(n.maxWait,t):0,l=n?.setTimeoutImpl||setTimeout;function c(){return d(),r=e(),r}function d(){a!==void 0&&clearTimeout(a),i!==void 0&&clearTimeout(i),a=i=void 0}function m(){return a!==void 0||i!==void 0?c():r}function u(){return a&&clearTimeout(a),a=l(c,t),o&&i===void 0&&(i=l(c,o)),r}return u.cancel=d,u.flush=m,u}const tv=100;function Ts(e,t){const n=be(),r=es();if(!n)return;const{beforeBreadcrumb:a=null,maxBreadcrumbs:i=tv}=n.getOptions();if(i<=0)return;const l={timestamp:cn(),...e},c=a?on(()=>a(l,t)):l;c!==null&&(n.emit&&n.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,i))}let wl;const sv="FunctionToString",Nl=new WeakMap,nv=(()=>({name:sv,setupOnce(){wl=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=ko(this),n=Nl.has(be())&&t!==void 0?t:this;return wl.apply(n,e)}}catch{}},setup(e){Nl.set(e,!0)}})),rv=nv,av=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],iv="EventFilters",ov=(e={})=>{let t;return{name:iv,setup(n){const r=n.getOptions();t=Sl(e,r)},processEvent(n,r,a){if(!t){const i=a.getOptions();t=Sl(e,i)}return lv(n,t)?null:n}}},cv=((e={})=>({...ov(e),name:"InboundFilters"}));function Sl(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:av],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function lv(e,t){if(e.type){if(e.type==="transaction"&&uv(e,t.ignoreTransactions))return Z&&H.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${$s(e)}`),!0}else{if(dv(e,t.ignoreErrors))return Z&&H.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${$s(e)}`),!0;if(fv(e))return Z&&H.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${$s(e)}`),!0;if(mv(e,t.denyUrls))return Z&&H.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${$s(e)}.
Url: ${fa(e)}`),!0;if(!hv(e,t.allowUrls))return Z&&H.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${$s(e)}.
Url: ${fa(e)}`),!0}return!1}function dv(e,t){return t?.length?Uu(e).some(n=>as(n,t)):!1}function uv(e,t){if(!t?.length)return!1;const n=e.transaction;return n?as(n,t):!1}function mv(e,t){if(!t?.length)return!1;const n=fa(e);return n?as(n,t):!1}function hv(e,t){if(!t?.length)return!0;const n=fa(e);return n?as(n,t):!0}function pv(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&n.filename!=="<anonymous>"&&n.filename!=="[native code]")return n.filename||null}return null}function fa(e){try{const n=[...e.exception?.values??[]].reverse().find(r=>r.mechanism?.parent_id===void 0&&r.stacktrace?.frames?.length)?.stacktrace?.frames;return n?pv(n):null}catch{return Z&&H.error(`Cannot extract url for event ${$s(e)}`),null}}function fv(e){return e.exception?.values?.length?!e.message&&!e.exception.values.some(t=>t.stacktrace||t.type&&t.type!=="Error"||t.value):!1}function gv(e,t,n,r,a,i){if(!a.exception?.values||!i||!ls(i.originalException,Error))return;const o=a.exception.values.length>0?a.exception.values[a.exception.values.length-1]:void 0;o&&(a.exception.values=Yi(e,t,r,i.originalException,n,a.exception.values,o,0))}function Yi(e,t,n,r,a,i,o,l){if(i.length>=n+1)return i;let c=[...i];if(ls(r[a],Error)){_l(o,l);const d=e(t,r[a]),m=c.length;kl(d,a,m,l),c=Yi(e,t,n,r[a],a,[d,...c],d,m)}return Array.isArray(r.errors)&&r.errors.forEach((d,m)=>{if(ls(d,Error)){_l(o,l);const u=e(t,d),h=c.length;kl(u,`errors[${m}]`,h,l),c=Yi(e,t,n,d,a,[u,...c],u,h)}}),c}function _l(e,t){e.mechanism={handled:!0,type:"auto.core.linked_errors",...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function kl(e,t,n,r){e.mechanism={handled:!0,...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:r}}function xv(e){const t="console";As(t,e),Rs(t,bv)}function bv(){"console"in je&&r0.forEach(function(e){e in je.console&&ct(je.console,e,function(t){return da[e]=t,function(...n){_t("console",{args:n,level:e}),da[e]?.apply(je.console,n)}})})}function Qu(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const yv="Dedupe",vv=(()=>{let e;return{name:yv,processEvent(t){if(t.type)return t;try{if(wv(t,e))return Z&&H.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}}),jv=vv;function wv(e,t){return t?!!(Nv(e,t)||Sv(e,t)):!1}function Nv(e,t){const n=e.message,r=t.message;return!(!n&&!r||n&&!r||!n&&r||n!==r||!em(e,t)||!Zu(e,t))}function Sv(e,t){const n=El(t),r=El(e);return!(!n||!r||n.type!==r.type||n.value!==r.value||!em(e,t)||!Zu(e,t))}function Zu(e,t){let n=Fc(e),r=Fc(t);if(!n&&!r)return!0;if(n&&!r||!n&&r||(n=n,r=r,r.length!==n.length))return!1;for(let a=0;a<r.length;a++){const i=r[a],o=n[a];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function em(e,t){let n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return n.join("")===r.join("")}catch{return!1}}function El(e){return e.exception?.values?.[0]}function _v(e,t,n,r,a){if(!e.fetchData)return;const{method:i,url:o}=e.fetchData,l=Bt()&&t(o);if(e.endTimestamp&&l){const p=e.fetchData.__span;if(!p)return;const f=r[p];f&&(Tv(f,e),kv(f,e,a),delete r[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:d=!1}=typeof a=="object"?a:{spanOrigin:a},m=!!nt(),u=l&&m?qn(Iv(o,i,c)):new Es;if(e.fetchData.__span=u.spanContext().spanId,r[u.spanContext().spanId]=u,n(e.fetchData.url)){const p=e.args[0],f=e.args[1]||{},b=Ev(p,f,Bt()&&m?u:void 0,d);b&&(e.args[1]=f,f.headers=b)}const h=be();if(h){const p={input:e.args,response:e.response,startTimestamp:e.startTimestamp,endTimestamp:e.endTimestamp};h.emit("beforeOutgoingRequestSpan",u,p)}return u}function kv(e,t,n){(typeof n=="object"&&n!==null?n.onRequestSpanEnd:void 0)?.(e,{headers:t.response?.headers,error:t.error})}function Ev(e,t,n,r){const a=Xu({span:n,propagateTraceparent:r}),i=a["sentry-trace"],o=a.baggage,l=a.traceparent;if(!i)return;const c=t.headers||(tu(e)?e.headers:void 0);if(c)if(Cv(c)){const d=new Headers(c);if(d.get("sentry-trace")||d.set("sentry-trace",i),r&&l&&!d.get("traceparent")&&d.set("traceparent",l),o){const m=d.get("baggage");m?Or(m)||d.set("baggage",`${m},${o}`):d.set("baggage",o)}return d}else if(Array.isArray(c)){const d=[...c];c.find(u=>u[0]==="sentry-trace")||d.push(["sentry-trace",i]),r&&l&&!c.find(u=>u[0]==="traceparent")&&d.push(["traceparent",l]);const m=c.find(u=>u[0]==="baggage"&&Or(u[1]));return o&&!m&&d.push(["baggage",o]),d}else{const d="sentry-trace"in c?c["sentry-trace"]:void 0,m="traceparent"in c?c.traceparent:void 0,u="baggage"in c?c.baggage:void 0,h=u?Array.isArray(u)?[...u]:[u]:[],p=u&&(Array.isArray(u)?u.find(b=>Or(b)):Or(u));o&&!p&&h.push(o);const f={...c,"sentry-trace":d??i,baggage:h.length>0?h.join(","):void 0};return r&&l&&!m&&(f.traceparent=l),f}else return{...a}}function Tv(e,t){if(t.response){lu(e,t.response.status);const n=t.response?.headers?.get("content-length");if(n){const r=parseInt(n);r>0&&e.setAttribute("http.response_content_length",r)}}else t.error&&e.setStatus({code:Fe,message:"internal_error"});e.end()}function Or(e){return e.split(",").some(t=>t.trim().startsWith(Co))}function Cv(e){return typeof Headers<"u"&&ls(e,Headers)}function Iv(e,t,n){const r=Lo(e);return{name:r?`${t} ${Gy(r)}`:t,attributes:Av(e,r,t,n)}}function Av(e,t,n,r){const a={url:e,type:"fetch","http.method":n,[ze]:r,[us]:"http.client"};return t&&(Oo(t)||(a["http.url"]=t.href,a["server.address"]=t.host),t.search&&(a["http.query"]=t.search),t.hash&&(a["http.fragment"]=t.hash)),a}function tm(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const dr=je;function Rv(){return"history"in dr&&!!dr.history}function Pv(){if(!("fetch"in dr))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Vi(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Dv(){if(typeof EdgeRuntime=="string")return!0;if(!Pv())return!1;if(Vi(dr.fetch))return!0;let e=!1;const t=dr.document;if(t&&typeof t.createElement=="function")try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow?.fetch&&(e=Vi(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){Z&&H.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e}function sm(e,t){const n="fetch";As(n,e),Rs(n,()=>nm(void 0,t))}function Mv(e){const t="fetch-body-resolved";As(t,e),Rs(t,()=>nm(Lv))}function nm(e,t=!1){t&&!Dv()||ct(je,"fetch",function(n){return function(...r){const a=new Error,{method:i,url:o}=Fv(r),l={args:r,fetchData:{method:i,url:o},startTimestamp:Ye()*1e3,virtualError:a,headers:$v(r)};return e||_t("fetch",{...l}),n.apply(je,r).then(async c=>(e?e(c):_t("fetch",{...l,endTimestamp:Ye()*1e3,response:c}),c),c=>{if(_t("fetch",{...l,endTimestamp:Ye()*1e3,error:c}),No(c)&&c.stack===void 0&&(c.stack=a.stack,pt(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(l.fetchData.url);c.message=`${c.message} (${d.host})`}catch{}throw c})}})}async function Ov(e,t){if(e?.body){const n=e.body,r=n.getReader(),a=setTimeout(()=>{n.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{n.cancel().then(null,()=>{})},5e3);const{done:l}=await r.read();clearTimeout(o),l&&(t(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(a),r.releaseLock(),n.cancel().then(null,()=>{})}}function Lv(e){let t;try{t=e.clone()}catch{return}Ov(t,()=>{_t("fetch-body-resolved",{endTimestamp:Ye()*1e3,response:e})})}function Ki(e,t){return!!e&&typeof e=="object"&&!!e[t]}function Tl(e){return typeof e=="string"?e:e?Ki(e,"url")?e.url:e.toString?e.toString():"":""}function Fv(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[n,r]=e;return{url:Tl(n),method:Ki(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:Tl(t),method:Ki(t,"method")?String(t.method).toUpperCase():"GET"}}function $v(e){const[t,n]=e;try{if(typeof n=="object"&&n!==null&&"headers"in n&&n.headers)return new Headers(n.headers);if(tu(t))return new Headers(t.headers)}catch{}}function Bv(){return typeof __SENTRY_BROWSER_BUNDLE__<"u"&&!!__SENTRY_BROWSER_BUNDLE__}function zv(){return"npm"}function Uv(){return!Bv()&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]"}function Cl(){return typeof window<"u"&&(!Uv()||Hv())}function Hv(){return je.process?.type==="renderer"}const Ne=je;let Ji=0;function rm(){return Ji>0}function Wv(){Ji++,setTimeout(()=>{Ji--})}function Pn(e,t={}){function n(a){return typeof a=="function"}if(!n(e))return e;try{const a=e.__sentry_wrapped__;if(a)return typeof a=="function"?a:e;if(ko(e))return e}catch{return e}const r=function(...a){try{const i=a.map(o=>Pn(o,t));return e.apply(this,i)}catch(i){throw Wv(),Ma(o=>{o.addEventProcessor(l=>(t.mechanism&&($i(l,void 0),Cn(l,t.mechanism)),l.extra={...l.extra,arguments:a},l)),Ru(i)}),i}};try{for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(r[a]=e[a])}catch{}nu(r,e),pt(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Fo(){const e=zn(),{referrer:t}=Ne.document||{},{userAgent:n}=Ne.navigator||{},r={...t&&{Referer:t},...n&&{"User-Agent":n}};return{url:e,headers:r}}function $o(e,t){const n=Bo(e,t),r={type:Kv(t),value:Jv(t)};return n.length&&(r.stacktrace={frames:n}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function qv(e,t,n,r){const i=be()?.getOptions().normalizeDepth,o=tj(t),l={__serialized__:Su(t,i)};if(o)return{exception:{values:[$o(e,o)]},extra:l};const c={exception:{values:[{type:Da(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Zv(t,{isUnhandledRejection:r})}]},extra:l};if(n){const d=Bo(e,n);d.length&&(c.exception.values[0].stacktrace={frames:d})}return c}function ui(e,t){return{exception:{values:[$o(e,t)]}}}function Bo(e,t){const n=t.stacktrace||t.stack||"",r=Yv(t),a=Vv(t);try{return e(n,r,a)}catch{}return[]}const Gv=/Minified React error #\d+;/i;function Yv(e){return e&&Gv.test(e.message)?1:0}function Vv(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function am(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Kv(e){const t=e?.name;return!t&&am(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Jv(e){const t=e?.message;return am(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Xv(e,t,n,r){const a=n?.syntheticException||void 0,i=zo(e,t,a,r);return Cn(i),i.level="error",n?.event_id&&(i.event_id=n.event_id),La(i)}function Qv(e,t,n="info",r,a){const i=r?.syntheticException||void 0,o=Xi(e,t,i,a);return o.level=n,r?.event_id&&(o.event_id=r.event_id),La(o)}function zo(e,t,n,r,a){let i;if(Zd(t)&&t.error)return ui(e,t.error);if(Bc(t)||f0(t)){const o=t;if("stack"in t)i=ui(e,t);else{const l=o.name||(Bc(o)?"DOMError":"DOMException"),c=o.message?`${l}: ${o.message}`:l;i=Xi(e,c,n,r),$i(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return No(t)?ui(e,t):or(t)||Da(t)?(i=qv(e,t,n,a),Cn(i,{synthetic:!0}),i):(i=Xi(e,t,n,r),$i(i,`${t}`),Cn(i,{synthetic:!0}),i)}function Xi(e,t,n,r){const a={};if(r&&n){const i=Bo(e,n);i.length&&(a.exception={values:[{value:t,stacktrace:{frames:i}}]}),Cn(a,{synthetic:!0})}if(So(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return a.logentry={message:i,params:o},a}return a.message=t,a}function Zv(e,{isUnhandledRejection:t}){const n=j0(e),r=t?"promise rejection":"exception";return Zd(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Da(e)?`Event \`${ej(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${n}`}function ej(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function tj(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const n=e[t];if(n instanceof Error)return n}}class sj extends Ry{constructor(t){const n=nj(t),r=Ne.SENTRY_SDK_SOURCE||zv();Ju(n,"browser",["browser"],r),n._metadata?.sdk&&(n._metadata.sdk.settings={infer_ip:n.sendDefaultPii?"auto":"never",...n._metadata.sdk.settings}),super(n);const{sendDefaultPii:a,sendClientReports:i,enableLogs:o,_experiments:l}=this._options;Ne.document&&(i||o||l?.enableMetrics)&&Ne.document.addEventListener("visibilitychange",()=>{Ne.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&Fu(this),l?.enableMetrics&&Bu(this))}),a&&this.on("beforeSendSession",Xy)}eventFromException(t,n){return Xv(this._options.stackParser,t,n,this._options.attachStacktrace)}eventFromMessage(t,n="info",r){return Qv(this._options.stackParser,t,n,r,this._options.attachStacktrace)}_prepareEvent(t,n,r,a){return t.platform=t.platform||"javascript",super._prepareEvent(t,n,r,a)}}function nj(e){return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:Ne.SENTRY_RELEASE?.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Zs=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,me=je,rj=(e,t)=>e>t[1]?"poor":e>t[0]?"needs-improvement":"good",vr=(e,t,n,r)=>{let a,i;return o=>{t.value>=0&&(o||r)&&(i=t.value-(a??0),(i||a===void 0)&&(a=t.value,t.delta=i,t.rating=rj(t.value,n),e(t)))}},aj=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,jr=(e=!0)=>{const t=me.performance?.getEntriesByType?.("navigation")[0];if(!e||t&&t.responseStart>0&&t.responseStart<performance.now())return t},Gn=()=>jr()?.activationStart??0,wr=(e,t=-1)=>{const n=jr();let r="navigate";return n&&(me.document?.prerendering||Gn()>0?r="prerender":me.document?.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:e,value:t,rating:"good",delta:0,entries:[],id:aj(),navigationType:r}},mi=new WeakMap;function Uo(e,t){return mi.get(e)||mi.set(e,new t),mi.get(e)}class ga{constructor(){ga.prototype.__init.call(this),ga.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(t){if(t.hadRecentInput)return;const n=this._sessionEntries[0],r=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&n&&r&&t.startTime-r.startTime<1e3&&t.startTime-n.startTime<5e3?(this._sessionValue+=t.value,this._sessionEntries.push(t)):(this._sessionValue=t.value,this._sessionEntries=[t]),this._onAfterProcessingUnexpectedShift?.(t)}}const Yn=(e,t,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const r=new PerformanceObserver(a=>{Promise.resolve().then(()=>{t(a.getEntries())})});return r.observe({type:e,buffered:!0,...n}),r}}catch{}},Ho=e=>{let t=!1;return()=>{t||(e(),t=!0)}};let er=-1;const ij=()=>me.document?.visibilityState==="hidden"&&!me.document?.prerendering?0:1/0,xa=e=>{me.document.visibilityState==="hidden"&&er>-1&&(er=e.type==="visibilitychange"?e.timeStamp:0,cj())},oj=()=>{addEventListener("visibilitychange",xa,!0),addEventListener("prerenderingchange",xa,!0)},cj=()=>{removeEventListener("visibilitychange",xa,!0),removeEventListener("prerenderingchange",xa,!0)},Wo=()=>{if(me.document&&er<0){const e=Gn();er=(me.document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0]?.startTime)??ij(),oj()}return{get firstHiddenTime(){return er}}},Fa=e=>{me.document?.prerendering?addEventListener("prerenderingchange",()=>e(),!0):e()},lj=[1800,3e3],dj=(e,t={})=>{Fa(()=>{const n=Wo(),r=wr("FCP");let a;const o=Yn("paint",l=>{for(const c of l)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<n.firstHiddenTime&&(r.value=Math.max(c.startTime-Gn(),0),r.entries.push(c),a(!0)))});o&&(a=vr(e,r,lj,t.reportAllChanges))})},uj=[.1,.25],mj=(e,t={})=>{dj(Ho(()=>{const n=wr("CLS",0);let r;const a=Uo(t,ga),i=l=>{for(const c of l)a._processEntry(c);a._sessionValue>n.value&&(n.value=a._sessionValue,n.entries=a._sessionEntries,r())},o=Yn("layout-shift",i);o&&(r=vr(e,n,uj,t.reportAllChanges),me.document?.addEventListener("visibilitychange",()=>{me.document?.visibilityState==="hidden"&&(i(o.takeRecords()),r(!0))}),me?.setTimeout?.(r))}))};let im=0,hi=1/0,Lr=0;const hj=e=>{e.forEach(t=>{t.interactionId&&(hi=Math.min(hi,t.interactionId),Lr=Math.max(Lr,t.interactionId),im=Lr?(Lr-hi)/7+1:0)})};let Qi;const om=()=>Qi?im:performance.interactionCount||0,pj=()=>{"interactionCount"in performance||Qi||(Qi=Yn("event",hj,{type:"event",buffered:!0,durationThreshold:0}))},pi=10;let cm=0;const fj=()=>om()-cm;class ba{constructor(){ba.prototype.__init.call(this),ba.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){cm=om(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const t=Math.min(this._longestInteractionList.length-1,Math.floor(fj()/50));return this._longestInteractionList[t]}_processEntry(t){if(this._onBeforeProcessingEntry?.(t),!(t.interactionId||t.entryType==="first-input"))return;const n=this._longestInteractionList.at(-1);let r=this._longestInteractionMap.get(t.interactionId);if(r||this._longestInteractionList.length<pi||t.duration>n._latency){if(r?t.duration>r._latency?(r.entries=[t],r._latency=t.duration):t.duration===r._latency&&t.startTime===r.entries[0].startTime&&r.entries.push(t):(r={id:t.interactionId,entries:[t],_latency:t.duration},this._longestInteractionMap.set(r.id,r),this._longestInteractionList.push(r)),this._longestInteractionList.sort((a,i)=>i._latency-a._latency),this._longestInteractionList.length>pi){const a=this._longestInteractionList.splice(pi);for(const i of a)this._longestInteractionMap.delete(i.id)}this._onAfterProcessingINPCandidate?.(r)}}}const qo=e=>{const t=n=>{(n.type==="pagehide"||me.document?.visibilityState==="hidden")&&e(n)};me.document&&(addEventListener("visibilitychange",t,!0),addEventListener("pagehide",t,!0))},lm=e=>{const t=me.requestIdleCallback||me.setTimeout;me.document?.visibilityState==="hidden"?e():(e=Ho(e),t(e),qo(e))},gj=[200,500],xj=40,bj=(e,t={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Fa(()=>{pj();const n=wr("INP");let r;const a=Uo(t,ba),i=l=>{lm(()=>{for(const d of l)a._processEntry(d);const c=a._estimateP98LongestInteraction();c&&c._latency!==n.value&&(n.value=c._latency,n.entries=c.entries,r())})},o=Yn("event",i,{durationThreshold:t.durationThreshold??xj});r=vr(e,n,gj,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),qo(()=>{i(o.takeRecords()),r(!0)}))})};class yj{_processEntry(t){this._onBeforeProcessingEntry?.(t)}}const vj=[2500,4e3],jj=(e,t={})=>{Fa(()=>{const n=Wo(),r=wr("LCP");let a;const i=Uo(t,yj),o=c=>{t.reportAllChanges||(c=c.slice(-1));for(const d of c)i._processEntry(d),d.startTime<n.firstHiddenTime&&(r.value=Math.max(d.startTime-Gn(),0),r.entries=[d],a())},l=Yn("largest-contentful-paint",o);if(l){a=vr(e,r,vj,t.reportAllChanges);const c=Ho(()=>{o(l.takeRecords()),l.disconnect(),a(!0)});for(const d of["keydown","click","visibilitychange"])me.document&&addEventListener(d,()=>lm(c),{capture:!0,once:!0})}})},wj=[800,1800],Zi=e=>{me.document?.prerendering?Fa(()=>Zi(e)):me.document?.readyState!=="complete"?addEventListener("load",()=>Zi(e),!0):setTimeout(e)},Nj=(e,t={})=>{const n=wr("TTFB"),r=vr(e,n,wj,t.reportAllChanges);Zi(()=>{const a=jr();a&&(n.value=Math.max(a.responseStart-Gn(),0),n.entries=[a],r(!0))})},tr={},ya={};let dm,um,mm,hm;function Go(e,t=!1){return $a("cls",e,_j,dm,t)}function Yo(e,t=!1){return $a("lcp",e,kj,um,t)}function Sj(e){return $a("ttfb",e,Ej,mm)}function pm(e){return $a("inp",e,Tj,hm)}function en(e,t){return fm(e,t),ya[e]||(Cj(e),ya[e]=!0),gm(e,t)}function Nr(e,t){const n=tr[e];if(n?.length)for(const r of n)try{r(t)}catch(a){Zs&&H.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${cs(r)}
Error:`,a)}}function _j(){return mj(e=>{Nr("cls",{metric:e}),dm=e},{reportAllChanges:!0})}function kj(){return jj(e=>{Nr("lcp",{metric:e}),um=e},{reportAllChanges:!0})}function Ej(){return Nj(e=>{Nr("ttfb",{metric:e}),mm=e})}function Tj(){return bj(e=>{Nr("inp",{metric:e}),hm=e})}function $a(e,t,n,r,a=!1){fm(e,t);let i;return ya[e]||(i=n(),ya[e]=!0),r&&t({metric:r}),gm(e,t,a?i:void 0)}function Cj(e){const t={};e==="event"&&(t.durationThreshold=0),Yn(e,n=>{Nr(e,{entries:n})},t)}function fm(e,t){tr[e]=tr[e]||[],tr[e].push(t)}function gm(e,t,n){return()=>{n&&n();const r=tr[e];if(!r)return;const a=r.indexOf(t);a!==-1&&r.splice(a,1)}}function Ij(e){return"duration"in e}function fi(e){return typeof e=="number"&&isFinite(e)}function Cs(e,t,n,{...r}){const a=we(e).start_timestamp;return a&&a>t&&typeof e.updateStartTime=="function"&&e.updateStartTime(t),Po(e,()=>{const i=qn({startTime:t,...r});return i&&i.end(n),i})}function Vo(e){const t=be();if(!t)return;const{name:n,transaction:r,attributes:a,startTime:i}=e,{release:o,environment:l,sendDefaultPii:c}=t.getOptions(),m=t.getIntegrationByName("Replay")?.getReplayId(),u=Te(),h=u.getUser(),p=h!==void 0?h.email||h.id||h.ip_address:void 0;let f;try{f=u.getScopeData().contexts.profile.profile_id}catch{}const b={release:o,environment:l,user:p||void 0,profile_id:f||void 0,replay_id:m||void 0,transaction:r,"user_agent.original":me.navigator?.userAgent,"client.address":c?"{{auto}}":void 0,...a};return qn({name:n,attributes:b,startTime:i,experimental:{standalone:!0}})}function Sr(){return me.addEventListener&&me.performance}function Oe(e){return e/1e3}function Aj(e){let t="unknown",n="unknown",r="";for(const a of e){if(a==="/"){[t,n]=e.split("/");break}if(!isNaN(Number(a))){t=r==="h"?"http":r,n=e.split(r)[1];break}r+=a}return r===e&&(t=r),{name:t,version:n}}function xm(e){try{return PerformanceObserver.supportedEntryTypes.includes(e)}catch{return!1}}function bm(e,t){let n,r=!1;function a(l){!r&&n&&t(l,n),r=!0}qo(()=>{a("pagehide")});const i=e.on("beforeStartNavigationSpan",(l,c)=>{c?.isRedirect||(a("navigation"),i(),o())}),o=e.on("afterStartPageLoadSpan",l=>{n=l.spanContext().spanId,o()})}function Rj(e){let t=0,n;if(!xm("layout-shift"))return;const r=Go(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,n=i)},!0);bm(e,(a,i)=>{Pj(t,n,i,a),r()})}function Pj(e,t,n,r){Zs&&H.log(`Sending CLS span (${e})`);const a=t?Oe((lt()||0)+t.startTime):Ye(),i=Te().getScopeData().transactionName,o=t?Ct(t.sources[0]?.node):"Layout shift",l={[ze]:"auto.http.browser.cls",[us]:"ui.webvital.cls",[Hn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t?.sources&&t.sources.forEach((d,m)=>{l[`cls.source.${m+1}`]=Ct(d.node)});const c=Vo({name:o,transaction:i,attributes:l,startTime:a});c&&(c.addEvent("cls",{[br]:"",[yr]:e}),c.end(a))}function Dj(e){let t=0,n;if(!xm("largest-contentful-paint"))return;const r=Yo(({metric:a})=>{const i=a.entries[a.entries.length-1];i&&(t=a.value,n=i)},!0);bm(e,(a,i)=>{Mj(t,n,i,a),r()})}function Mj(e,t,n,r){Zs&&H.log(`Sending LCP span (${e})`);const a=Oe((lt()||0)+(t?.startTime||0)),i=Te().getScopeData().transactionName,o=t?Ct(t.element):"Largest contentful paint",l={[ze]:"auto.http.browser.lcp",[us]:"ui.webvital.lcp",[Hn]:0,"sentry.pageload.span_id":n,"sentry.report_event":r};t&&(t.element&&(l["lcp.element"]=Ct(t.element)),t.id&&(l["lcp.id"]=t.id),t.url&&(l["lcp.url"]=t.url.trim().slice(0,200)),t.loadTime!=null&&(l["lcp.loadTime"]=t.loadTime),t.renderTime!=null&&(l["lcp.renderTime"]=t.renderTime),t.size!=null&&(l["lcp.size"]=t.size));const c=Vo({name:o,transaction:i,attributes:l,startTime:a});c&&(c.addEvent("lcp",{[br]:"millisecond",[yr]:e}),c.end(a))}function xt(e){return e&&((lt()||performance.timeOrigin)+e)/1e3}function ym(e){const t={};if(e.nextHopProtocol!=null){const{name:n,version:r}=Aj(e.nextHopProtocol);t["network.protocol.version"]=r,t["network.protocol.name"]=n}return lt()||Sr()?.timeOrigin?Oj({...t,"http.request.redirect_start":xt(e.redirectStart),"http.request.redirect_end":xt(e.redirectEnd),"http.request.worker_start":xt(e.workerStart),"http.request.fetch_start":xt(e.fetchStart),"http.request.domain_lookup_start":xt(e.domainLookupStart),"http.request.domain_lookup_end":xt(e.domainLookupEnd),"http.request.connect_start":xt(e.connectStart),"http.request.secure_connection_start":xt(e.secureConnectionStart),"http.request.connection_end":xt(e.connectEnd),"http.request.request_start":xt(e.requestStart),"http.request.response_start":xt(e.responseStart),"http.request.response_end":xt(e.responseEnd),"http.request.time_to_first_byte":e.responseStart!=null?e.responseStart/1e3:void 0}):t}function Oj(e){return Object.fromEntries(Object.entries(e).filter(([,t])=>t!=null))}const Lj=2147483647;let Il=0,Ot={},rt,va;function Fj({recordClsStandaloneSpans:e,recordLcpStandaloneSpans:t,client:n}){const r=Sr();if(r&&lt()){r.mark&&me.performance.mark("sentry-tracing-init");const a=t?Dj(n):Hj(),i=Wj(),o=e?Rj(n):Uj();return()=>{a?.(),i(),o?.()}}return()=>{}}function $j(){en("longtask",({entries:e})=>{const t=nt();if(!t)return;const{op:n,start_timestamp:r}=we(t);for(const a of e){const i=Oe(lt()+a.startTime),o=Oe(a.duration);n==="navigation"&&r&&i<r||Cs(t,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[ze]:"auto.ui.browser.metrics"}})}})}function Bj(){new PerformanceObserver(t=>{const n=nt();if(n)for(const r of t.getEntries()){if(!r.scripts[0])continue;const a=Oe(lt()+r.startTime),{start_timestamp:i,op:o}=we(n);if(o==="navigation"&&i&&a<i)continue;const l=Oe(r.duration),c={[ze]:"auto.ui.browser.metrics"},d=r.scripts[0],{invoker:m,invokerType:u,sourceURL:h,sourceFunctionName:p,sourceCharPosition:f}=d;c["browser.script.invoker"]=m,c["browser.script.invoker_type"]=u,h&&(c["code.filepath"]=h),p&&(c["code.function"]=p),f!==-1&&(c["browser.script.source_char_position"]=f),Cs(n,a,a+l,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function zj(){en("event",({entries:e})=>{const t=nt();if(t){for(const n of e)if(n.name==="click"){const r=Oe(lt()+n.startTime),a=Oe(n.duration),i={name:Ct(n.target),op:`ui.interaction.${n.name}`,startTime:r,attributes:{[ze]:"auto.ui.browser.metrics"}},o=su(n.target);o&&(i.attributes["ui.component_name"]=o),Cs(t,r,r+a,i)}}})}function Uj(){return Go(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ot.cls={value:e.value,unit:""},va=t)},!0)}function Hj(){return Yo(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(Ot.lcp={value:e.value,unit:"millisecond"},rt=t)},!0)}function Wj(){return Sj(({metric:e})=>{e.entries[e.entries.length-1]&&(Ot.ttfb={value:e.value,unit:"millisecond"})})}function qj(e,t){const n=Sr(),r=lt();if(!n?.getEntries||!r)return;const a=Oe(r),i=n.getEntries(),{op:o,start_timestamp:l}=we(e);i.slice(Il).forEach(c=>{const d=Oe(c.startTime),m=Oe(Math.max(0,c.duration));if(!(o==="navigation"&&l&&a+d<l))switch(c.entryType){case"navigation":{Kj(e,c,a);break}case"mark":case"paint":case"measure":{Yj(e,c,d,m,a,t.ignorePerformanceApiSpans);const u=Wo(),h=c.startTime<u.firstHiddenTime;c.name==="first-paint"&&h&&(Ot.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&h&&(Ot.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{Qj(e,c,c.name,d,m,a,t.ignoreResourceSpans);break}}}),Il=Math.max(i.length-1,0),Zj(e),o==="pageload"&&(sw(Ot),t.recordClsOnPageloadSpan||delete Ot.cls,t.recordLcpOnPageloadSpan||delete Ot.lcp,Object.entries(Ot).forEach(([c,d])=>{Db(c,d.value,d.unit)}),e.setAttribute("performance.timeOrigin",a),e.setAttribute("performance.activationStart",Gn()),ew(e,t)),rt=void 0,va=void 0,Ot={}}function Gj(e){if(e?.entryType==="measure")try{return e.detail.devtools.track==="Components "}catch{return}}function Yj(e,t,n,r,a,i){if(Gj(t)||["mark","measure"].includes(t.entryType)&&as(t.name,i))return;const o=jr(!1),l=Oe(o?o.requestStart:0),c=a+Math.max(n,l),d=a+n,m=d+r,u={[ze]:"auto.resource.browser.metrics"};c!==d&&(u["sentry.browser.measure_happened_before_request"]=!0,u["sentry.browser.measure_start_time"]=c),Vj(u,t),c<=m&&Cs(e,c,m,{name:t.name,op:t.entryType,attributes:u})}function Vj(e,t){try{const n=t.detail;if(!n)return;if(typeof n=="object"){for(const[r,a]of Object.entries(n))if(a&&Tn(a))e[`sentry.browser.measure.detail.${r}`]=a;else if(a!==void 0)try{e[`sentry.browser.measure.detail.${r}`]=JSON.stringify(a)}catch{}return}if(Tn(n)){e["sentry.browser.measure.detail"]=n;return}try{e["sentry.browser.measure.detail"]=JSON.stringify(n)}catch{}}catch{}}function Kj(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(r=>{Fr(e,t,r,n)}),Fr(e,t,"secureConnection",n,"TLS/SSL"),Fr(e,t,"fetch",n,"cache"),Fr(e,t,"domainLookup",n,"DNS"),Xj(e,t,n)}function Fr(e,t,n,r,a=n){const i=Jj(n),o=t[i],l=t[`${n}Start`];!l||!o||Cs(e,r+Oe(l),r+Oe(o),{op:`browser.${a}`,name:t.name,attributes:{[ze]:"auto.ui.browser.metrics",...n==="redirect"&&t.redirectCount!=null?{"http.redirect_count":t.redirectCount}:{}}})}function Jj(e){return e==="secureConnection"?"connectEnd":e==="fetch"?"domainLookupStart":`${e}End`}function Xj(e,t,n){const r=n+Oe(t.requestStart),a=n+Oe(t.responseEnd),i=n+Oe(t.responseStart);t.responseEnd&&(Cs(e,r,a,{op:"browser.request",name:t.name,attributes:{[ze]:"auto.ui.browser.metrics"}}),Cs(e,i,a,{op:"browser.response",name:t.name,attributes:{[ze]:"auto.ui.browser.metrics"}}))}function Qj(e,t,n,r,a,i,o){if(t.initiatorType==="xmlhttprequest"||t.initiatorType==="fetch")return;const l=t.initiatorType?`resource.${t.initiatorType}`:"resource.other";if(o?.includes(l))return;const c={[ze]:"auto.resource.browser.metrics"},d=Vs(n);d.protocol&&(c["url.scheme"]=d.protocol.split(":").pop()),d.host&&(c["server.address"]=d.host),c["url.same_origin"]=n.includes(me.location.origin),tw(t,c,[["responseStatus","http.response.status_code"],["transferSize","http.response_transfer_size"],["encodedBodySize","http.response_content_length"],["decodedBodySize","http.decoded_response_content_length"],["renderBlockingStatus","resource.render_blocking_status"],["deliveryType","http.response_delivery_type"]]);const m={...c,...ym(t)},u=i+r,h=u+a;Cs(e,u,h,{name:n.replace(me.location.origin,""),op:l,attributes:m})}function Zj(e){const t=me.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setAttribute("effectiveConnectionType",n.effectiveType),n.type&&e.setAttribute("connectionType",n.type),fi(n.rtt)&&(Ot["connection.rtt"]={value:n.rtt,unit:"millisecond"})),fi(t.deviceMemory)&&e.setAttribute("deviceMemory",`${t.deviceMemory} GB`),fi(t.hardwareConcurrency)&&e.setAttribute("hardwareConcurrency",String(t.hardwareConcurrency))}function ew(e,t){rt&&t.recordLcpOnPageloadSpan&&(rt.element&&e.setAttribute("lcp.element",Ct(rt.element)),rt.id&&e.setAttribute("lcp.id",rt.id),rt.url&&e.setAttribute("lcp.url",rt.url.trim().slice(0,200)),rt.loadTime!=null&&e.setAttribute("lcp.loadTime",rt.loadTime),rt.renderTime!=null&&e.setAttribute("lcp.renderTime",rt.renderTime),e.setAttribute("lcp.size",rt.size)),va?.sources&&t.recordClsOnPageloadSpan&&va.sources.forEach((n,r)=>e.setAttribute(`cls.source.${r+1}`,Ct(n.node)))}function tw(e,t,n){n.forEach(([r,a])=>{const i=e[r];i!=null&&(typeof i=="number"&&i<Lj||typeof i=="string")&&(t[a]=i)})}function sw(e){const t=jr(!1);if(!t)return;const{responseStart:n,requestStart:r}=t;r<=n&&(e["ttfb.requestTime"]={value:n-r,unit:"millisecond"})}function nw(){return Sr()&&lt()?en("element",rw):()=>{}}const rw=({entries:e})=>{const t=nt(),n=t?Ze(t):void 0,r=n?we(n).description:Te().getScopeData().transactionName;e.forEach(a=>{const i=a;if(!i.identifier)return;const o=i.name,l=i.renderTime,c=i.loadTime,[d,m]=c?[Oe(c),"load-time"]:l?[Oe(l),"render-time"]:[Ye(),"entry-emission"],u=o==="image-paint"?Oe(Math.max(0,(l??0)-(c??0))):0,h={[ze]:"auto.ui.browser.elementtiming",[us]:"ui.elementtiming",[Ft]:"component","sentry.span_start_time_source":m,"sentry.transaction_name":r,"element.id":i.id,"element.type":i.element?.tagName?.toLowerCase()||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":l,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};Bb({name:`element[${i.identifier}]`,attributes:h,startTime:d,onlyIfParent:!0},p=>{p.end(d+u)})})},aw=1e3;let Al,eo,to;function vm(e){As("dom",e),Rs("dom",iw)}function iw(){if(!me.document)return;const e=_t.bind(null,"dom"),t=Rl(e,!0);me.document.addEventListener("click",t,!1),me.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(n=>{const a=me[n]?.prototype;a?.hasOwnProperty?.("addEventListener")&&(ct(a,"addEventListener",function(i){return function(o,l,c){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},m=d[o]=d[o]||{refCount:0};if(!m.handler){const u=Rl(e);m.handler=u,i.call(this,o,u,c)}m.refCount++}catch{}return i.call(this,o,l,c)}}),ct(a,"removeEventListener",function(i){return function(o,l,c){if(o==="click"||o=="keypress")try{const d=this.__sentry_instrumentation_handlers__||{},m=d[o];m&&(m.refCount--,m.refCount<=0&&(i.call(this,o,m.handler,c),m.handler=void 0,delete d[o]),Object.keys(d).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return i.call(this,o,l,c)}}))})}function ow(e){if(e.type!==eo)return!1;try{if(!e.target||e.target._sentryId!==to)return!1}catch{}return!0}function cw(e,t){return e!=="keypress"?!1:t?.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function Rl(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const r=lw(n);if(cw(n.type,r))return;pt(n,"_sentryCaptured",!0),r&&!r._sentryId&&pt(r,"_sentryId",ht());const a=n.type==="keypress"?"input":n.type;ow(n)||(e({event:n,name:a,global:t}),eo=n.type,to=r?r._sentryId:void 0),clearTimeout(Al),Al=me.setTimeout(()=>{to=void 0,eo=void 0},aw)}}function lw(e){try{return e.target}catch{return null}}let $r;function Ba(e){const t="history";As(t,e),Rs(t,dw)}function dw(){if(me.addEventListener("popstate",()=>{const t=me.location.href,n=$r;if($r=t,n===t)return;_t("history",{from:n,to:t})}),!Rv())return;function e(t){return function(...n){const r=n.length>2?n[2]:void 0;if(r){const a=$r,i=uw(String(r));if($r=i,a===i)return t.apply(this,n);_t("history",{from:a,to:i})}return t.apply(this,n)}}ct(me.history,"pushState",e),ct(me.history,"replaceState",e)}function uw(e){try{return new URL(e,me.location.origin).toString()}catch{return e}}const ea={};function jm(e){const t=ea[e];if(t)return t;let n=me[e];if(Vi(n))return ea[e]=n.bind(me);const r=me.document;if(r&&typeof r.createElement=="function")try{const a=r.createElement("iframe");a.hidden=!0,r.head.appendChild(a);const i=a.contentWindow;i?.[e]&&(n=i[e]),r.head.removeChild(a)}catch(a){Zs&&H.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,a)}return n&&(ea[e]=n.bind(me))}function mw(e){ea[e]=void 0}function _r(...e){return jm("setTimeout")(...e)}const Bs="__sentry_xhr_v3__";function wm(e){As("xhr",e),Rs("xhr",hw)}function hw(){if(!me.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,n,r){const a=new Error,i=Ye()*1e3,o=rs(r[0])?r[0].toUpperCase():void 0,l=pw(r[1]);if(!o||!l)return t.apply(n,r);n[Bs]={method:o,url:l,request_headers:{}},o==="POST"&&l.match(/sentry_key/)&&(n.__sentry_own_request__=!0);const c=()=>{const d=n[Bs];if(d&&n.readyState===4){try{d.status_code=n.status}catch{}const m={endTimestamp:Ye()*1e3,startTimestamp:i,xhr:n,virtualError:a};_t("xhr",m)}};return"onreadystatechange"in n&&typeof n.onreadystatechange=="function"?n.onreadystatechange=new Proxy(n.onreadystatechange,{apply(d,m,u){return c(),d.apply(m,u)}}):n.addEventListener("readystatechange",c),n.setRequestHeader=new Proxy(n.setRequestHeader,{apply(d,m,u){const[h,p]=u,f=m[Bs];return f&&rs(h)&&rs(p)&&(f.request_headers[h.toLowerCase()]=p),d.apply(m,u)}}),t.apply(n,r)}}),e.send=new Proxy(e.send,{apply(t,n,r){const a=n[Bs];if(!a)return t.apply(n,r);r[0]!==void 0&&(a.body=r[0]);const i={startTimestamp:Ye()*1e3,xhr:n};return _t("xhr",i),t.apply(n,r)}})}function pw(e){if(rs(e))return e;try{return e.toString()}catch{}}function Nm(e){return new URLSearchParams(e).toString()}function Sm(e,t=H){try{if(typeof e=="string")return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Nm(e)];if(!e)return[void 0]}catch(n){return Zs&&t.error(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return Zs&&t.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function _m(e=[]){if(!(e.length!==2||typeof e[1]!="object"))return e[1].body}function km(e){let t;try{t=e.getAllResponseHeaders()}catch(n){return Zs&&H.error(n,"Failed to get xhr response headers",e),{}}return t?t.split(`\r
`).reduce((n,r)=>{const[a,i]=r.split(": ");return i&&(n[a.toLowerCase()]=i),n},{}):{}}const gi=[],ta=new Map,fw=60;function gw(){if(Sr()&&lt()){const t=xw();return()=>{t()}}return()=>{}}const Pl={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function xw(){return pm(bw)}const bw=({metric:e})=>{if(e.value==null)return;const t=Oe(e.value);if(t>fw)return;const n=e.entries.find(f=>f.duration===e.value&&Pl[f.name]);if(!n)return;const{interactionId:r}=n,a=Pl[n.name],i=Oe(lt()+n.startTime),o=nt(),l=o?Ze(o):void 0,d=(r!=null?ta.get(r):void 0)||l,m=d?we(d).description:Te().getScopeData().transactionName,u=Ct(n.target),h={[ze]:"auto.http.browser.inp",[us]:`ui.interaction.${a}`,[Hn]:n.duration},p=Vo({name:u,transaction:m,attributes:h,startTime:i});p&&(p.addEvent("inp",{[br]:"millisecond",[yr]:e.value}),p.end(i+t))};function yw(){const e=({entries:t})=>{const n=nt(),r=n&&Ze(n);t.forEach(a=>{if(!Ij(a)||!r)return;const i=a.interactionId;if(i!=null&&!ta.has(i)){if(gi.length>10){const o=gi.shift();ta.delete(o)}gi.push(i),ta.set(i,r)}})};en("event",e),en("first-input",e)}function vw(e,t=jm("fetch")){let n=0,r=0;async function a(i){const o=i.body.length;n+=o,r++;const l={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:n<=6e4&&r<15,...e.fetchOptions};try{const c=await t(e.url,l);return{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}}catch(c){throw mw("fetch"),c}finally{n-=o,r--}}return Wy(e,a)}const jw=30,ww=50;function so(e,t,n,r){const a={filename:e,function:t==="<anonymous>"?Xs:t,in_app:!0};return n!==void 0&&(a.lineno=n),r!==void 0&&(a.colno=r),a}const Nw=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,Sw=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,_w=/\((\S*)(?::(\d+))(?::(\d+))\)/,kw=/at (.+?) ?\(data:(.+?),/,Ew=e=>{const t=e.match(kw);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const n=Nw.exec(e);if(n){const[,a,i,o]=n;return so(a,Xs,+i,+o)}const r=Sw.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const l=_w.exec(r[2]);l&&(r[2]=l[1],r[3]=l[2],r[4]=l[3])}const[i,o]=Em(r[1]||Xs,r[2]);return so(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},Tw=[jw,Ew],Cw=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Iw=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,Aw=e=>{const t=Cw.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=Iw.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],a=t[1]||Xs;return[a,r]=Em(a,r),so(r,a,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},Rw=[ww,Aw],Pw=[Tw,Rw],Dw=Kd(...Pw),Em=(e,t)=>{const n=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return n||r?[e.indexOf("@")!==-1?e.split("@")[0]:Xs,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},It=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Br=1024,Mw="Breadcrumbs",Ow=((e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Mw,setup(n){t.console&&xv(Bw(n)),t.dom&&vm($w(n,t.dom)),t.xhr&&wm(zw(n)),t.fetch&&sm(Uw(n)),t.history&&Ba(Hw(n)),t.sentry&&n.on("beforeSendEvent",Fw(n))}}}),Lw=Ow;function Fw(e){return function(n){be()===e&&Ts({category:`sentry.${n.type==="transaction"?"transaction":"event"}`,event_id:n.event_id,level:n.level,message:$s(n)},{event:n})}}function $w(e,t){return function(r){if(be()!==e)return;let a,i,o=typeof t=="object"?t.serializeAttribute:void 0,l=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;l&&l>Br&&(It&&H.warn(`\`dom.maxStringLength\` cannot exceed ${Br}, but a value of ${l} was configured. Sentry will use ${Br} instead.`),l=Br),typeof o=="string"&&(o=[o]);try{const d=r.event,m=Ww(d)?d.target:d;a=Ct(m,{keyAttrs:o,maxStringLength:l}),i=su(m)}catch{a="<unknown>"}if(a.length===0)return;const c={category:`ui.${r.name}`,message:a};i&&(c.data={"ui.component_name":i}),Ts(c,{event:r.event,name:r.name,global:r.global})}}function Bw(e){return function(n){if(be()!==e)return;const r={category:"console",data:{arguments:n.args,logger:"console"},level:Qu(n.level),message:zc(n.args," ")};if(n.level==="assert")if(n.args[0]===!1)r.message=`Assertion failed: ${zc(n.args.slice(1)," ")||"console.assert"}`,r.data.arguments=n.args.slice(1);else return;Ts(r,{input:n.args,level:n.level})}}function zw(e){return function(n){if(be()!==e)return;const{startTimestamp:r,endTimestamp:a}=n,i=n.xhr[Bs];if(!r||!a||!i)return;const{method:o,url:l,status_code:c,body:d}=i,m={method:o,url:l,status_code:c},u={xhr:n.xhr,input:d,startTimestamp:r,endTimestamp:a},h={category:"xhr",data:m,type:"http",level:tm(c)};e.emit("beforeOutgoingRequestBreadcrumb",h,u),Ts(h,u)}}function Uw(e){return function(n){if(be()!==e)return;const{startTimestamp:r,endTimestamp:a}=n;if(a&&!(n.fetchData.url.match(/sentry_key/)&&n.fetchData.method==="POST"))if(n.fetchData.method,n.fetchData.url,n.error){const i=n.fetchData,o={data:n.error,input:n.args,startTimestamp:r,endTimestamp:a},l={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",l,o),Ts(l,o)}else{const i=n.response,o={...n.fetchData,status_code:i?.status};n.fetchData.request_body_size,n.fetchData.response_body_size,i?.status;const l={input:n.args,response:i,startTimestamp:r,endTimestamp:a},c={category:"fetch",data:o,type:"http",level:tm(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,l),Ts(c,l)}}}function Hw(e){return function(n){if(be()!==e)return;let r=n.from,a=n.to;const i=Vs(Ne.location.href);let o=r?Vs(r):void 0;const l=Vs(a);o?.path||(o=i),i.protocol===l.protocol&&i.host===l.host&&(a=l.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ts({category:"navigation",data:{from:r,to:a}})}}function Ww(e){return!!e&&!!e.target}const qw=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Gw="BrowserApiErrors",Yw=((e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:Gw,setupOnce(){t.setTimeout&&ct(Ne,"setTimeout",Dl),t.setInterval&&ct(Ne,"setInterval",Dl),t.requestAnimationFrame&&ct(Ne,"requestAnimationFrame",Kw),t.XMLHttpRequest&&"XMLHttpRequest"in Ne&&ct(XMLHttpRequest.prototype,"send",Jw);const n=t.eventTarget;n&&(Array.isArray(n)?n:qw).forEach(a=>Xw(a,t))}}}),Vw=Yw;function Dl(e){return function(...t){const n=t[0];return t[0]=Pn(n,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${cs(e)}`}}),e.apply(this,t)}}function Kw(e){return function(t){return e.apply(this,[Pn(t,{mechanism:{data:{handler:cs(e)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function Jw(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(a=>{a in n&&typeof n[a]=="function"&&ct(n,a,function(i){const o={mechanism:{data:{handler:cs(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${a}`}},l=ko(i);return l&&(o.mechanism.data.handler=cs(l)),Pn(i,o)})}),e.apply(this,t)}}function Xw(e,t){const r=Ne[e]?.prototype;r?.hasOwnProperty?.("addEventListener")&&(ct(r,"addEventListener",function(a){return function(i,o,l){try{Qw(o)&&(o.handleEvent=Pn(o.handleEvent,{mechanism:{data:{handler:cs(o),target:e},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return t.unregisterOriginalCallbacks&&Zw(this,i,o),a.apply(this,[i,Pn(o,{mechanism:{data:{handler:cs(o),target:e},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),l])}}),ct(r,"removeEventListener",function(a){return function(i,o,l){try{const c=o.__sentry_wrapped__;c&&a.call(this,i,c,l)}catch{}return a.call(this,i,o,l)}}))}function Qw(e){return typeof e.handleEvent=="function"}function Zw(e,t,n){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,n)}const eN=()=>({name:"BrowserSession",setupOnce(){if(typeof Ne.document>"u"){It&&H.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}ul({ignoreDuration:!0}),ml(),Ba(({from:e,to:t})=>{e!==void 0&&e!==t&&(ul({ignoreDuration:!0}),ml())})}}),tN="GlobalHandlers",sN=((e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:tN,setupOnce(){Error.stackTraceLimit=50},setup(n){t.onerror&&(rN(n),Ml("onerror")),t.onunhandledrejection&&(aN(n),Ml("onunhandledrejection"))}}}),nN=sN;function rN(e){Jd(t=>{const{stackParser:n,attachStacktrace:r}=Tm();if(be()!==e||rm())return;const{msg:a,url:i,line:o,column:l,error:c}=t,d=cN(zo(n,c||a,void 0,r,!1),i,o,l);d.level="error",Pu(d,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function aN(e){Xd(t=>{const{stackParser:n,attachStacktrace:r}=Tm();if(be()!==e||rm())return;const a=iN(t),i=Tn(a)?oN(a):zo(n,a,void 0,r,!0);i.level="error",Pu(i,{originalException:a,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function iN(e){if(Tn(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function oN(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function cN(e,t,n,r){const a=e.exception=e.exception||{},i=a.values=a.values||[],o=i[0]=i[0]||{},l=o.stacktrace=o.stacktrace||{},c=l.frames=l.frames||[],d=r,m=n,u=lN(t)??zn();return c.length===0&&c.push({colno:d,filename:u,function:Xs,in_app:!0,lineno:m}),e}function Ml(e){It&&H.log(`Global Handler attached: ${e}`)}function Tm(){return be()?.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}function lN(e){if(!(!rs(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),n=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${n}${r?",base64":""}>`}return e.slice(0,1024)}}const dN=()=>({name:"HttpContext",preprocessEvent(e){if(!Ne.navigator&&!Ne.location&&!Ne.document)return;const t=Fo(),n={...t.headers,...e.request?.headers};e.request={...t,...e.request,headers:n}}}),uN="cause",mN=5,hN="LinkedErrors",pN=((e={})=>{const t=e.limit||mN,n=e.key||uN;return{name:hN,preprocessEvent(r,a,i){const o=i.getOptions();gv($o,o.stackParser,n,t,r,a)}}}),fN=pN;function gN(){return xN()?(It&&on(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function xN(){if(typeof Ne.window>"u")return!1;const e=Ne;if(e.nw||!(e.chrome||e.browser)?.runtime?.id)return!1;const n=zn(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(Ne===Ne.top&&r.some(i=>n.startsWith(`${i}://`)))}function bN(e){return[cv(),rv(),Vw(),Lw(),nN(),fN(),jv(),dN(),eN()]}function yN(e={}){const t=!e.skipBrowserExtensionCheck&&gN(),n={...e,enabled:t?!1:e.enabled,stackParser:u0(e.stackParser||Dw),integrations:vy({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?bN():e.defaultIntegrations}),transport:e.transport||vw};return Ly(sj,n)}const Re=je,Ko="sentryReplaySession",vN="replay_event",Jo="Unable to send Replay",jN=3e5,wN=9e5,NN=5e3,SN=5500,_N=6e4,kN=5e3,EN=3,Ol=15e4,zr=5e3,TN=3e3,CN=300,Xo=2e7,IN=4999,AN=15e3,Ll=36e5;var RN=Object.defineProperty,PN=(e,t,n)=>t in e?RN(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Fl=(e,t,n)=>PN(e,typeof t!="symbol"?t+"":t,n),Le=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(Le||{});function DN(e){return e.nodeType===e.ELEMENT_NODE}function sr(e){return e?.host?.shadowRoot===e}function nr(e){return Object.prototype.toString.call(e)==="[object ShadowRoot]"}function MN(e){return e.includes(" background-clip: text;")&&!e.includes(" -webkit-background-clip: text;")&&(e=e.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),e}function ON(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return e.layerName===""?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}function ja(e){try{const t=e.rules||e.cssRules;return t?MN(Array.from(t,Cm).join("")):null}catch{return null}}function LN(e){let t="";for(let n=0;n<e.style.length;n++){const r=e.style,a=r[n],i=r.getPropertyPriority(a);t+=`${a}:${r.getPropertyValue(a)}${i?" !important":""};`}return`${e.selectorText} { ${t} }`}function Cm(e){let t;if($N(e))try{t=ja(e.styleSheet)||ON(e)}catch{}else if(BN(e)){let n=e.cssText;const r=e.selectorText.includes(":"),a=typeof e.style.all=="string"&&e.style.all;if(a&&(n=LN(e)),r&&(n=FN(n)),r||a)return n}return t||e.cssText}function FN(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}function $N(e){return"styleSheet"in e}function BN(e){return"selectorText"in e}class Im{constructor(){Fl(this,"idNodeMap",new Map),Fl(this,"nodeMetaMap",new WeakMap)}getId(t){return t?this.getMeta(t)?.id??-1:-1}getNode(t){return this.idNodeMap.get(t)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(t){return this.nodeMetaMap.get(t)||null}removeNodeFromMap(t){const n=this.getId(t);this.idNodeMap.delete(n),t.childNodes&&t.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(t){return this.idNodeMap.has(t)}hasNode(t){return this.nodeMetaMap.has(t)}add(t,n){const r=n.id;this.idNodeMap.set(r,t),this.nodeMetaMap.set(t,n)}replace(t,n){const r=this.getNode(t);if(r){const a=this.nodeMetaMap.get(r);a&&this.nodeMetaMap.set(n,a)}this.idNodeMap.set(t,n)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function zN(){return new Im}function za({maskInputOptions:e,tagName:t,type:n}){return t==="OPTION"&&(t="SELECT"),!!(e[t.toLowerCase()]||n&&e[n]||n==="password"||t==="INPUT"&&!n&&e.text)}function ur({isMasked:e,element:t,value:n,maskInputFn:r}){let a=n||"";return e?(r&&(a=r(a,t)),"*".repeat(a.length)):a}function Dn(e){return e.toLowerCase()}function no(e){return e.toUpperCase()}const $l="__rrweb_original__";function UN(e){const t=e.getContext("2d");if(!t)return!0;const n=50;for(let r=0;r<e.width;r+=n)for(let a=0;a<e.height;a+=n){const i=t.getImageData,o=$l in i?i[$l]:i;if(new Uint32Array(o.call(t,r,a,Math.min(n,e.width-r),Math.min(n,e.height-a)).data.buffer).some(c=>c!==0))return!1}return!0}function Qo(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?Dn(t):null}function wa(e,t,n){return t==="INPUT"&&(n==="radio"||n==="checkbox")?e.getAttribute("value")||"":e.value}function Am(e,t){let n;try{n=new URL(e,t??window.location.href)}catch{return null}const r=/\.([0-9a-z]+)(?:$)/i;return n.pathname.match(r)?.[1]??null}const Bl={};function Rm(e){const t=Bl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(a)}catch{}return Bl[e]=r.bind(window)}function ro(...e){return Rm("setTimeout")(...e)}function Pm(...e){return Rm("clearTimeout")(...e)}function Dm(e){try{return e.contentDocument}catch{}}let HN=1;const WN=new RegExp("[^a-z0-9-_:]"),mr=-2;function Zo(){return HN++}function qN(e){if(e instanceof HTMLFormElement)return"form";const t=Dn(e.tagName);return WN.test(t)?"div":t}function GN(e){let t="";return e.indexOf("//")>-1?t=e.split("/").slice(0,3).join("/"):t=e.split("/")[0],t=t.split("?")[0],t}let un,zl;const YN=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,VN=/^(?:[a-z+]+:)?\/\//i,KN=/^www\..*/i,JN=/^(data:)([^,]*),(.*)/i;function Na(e,t){return(e||"").replace(YN,(n,r,a,i,o,l)=>{const c=a||o||l,d=r||i||"";if(!c)return n;if(VN.test(c)||KN.test(c))return`url(${d}${c}${d})`;if(JN.test(c))return`url(${d}${c}${d})`;if(c[0]==="/")return`url(${d}${GN(t)+c}${d})`;const m=t.split("/"),u=c.split("/");m.pop();for(const h of u)h!=="."&&(h===".."?m.pop():m.push(h));return`url(${d}${m.join("/")}${d})`})}const XN=/^[^ \t\n\r\u000c]+/,QN=/^[, \t\n\r\u000c]+/;function ZN(e,t){if(t.trim()==="")return t;let n=0;function r(i){let o;const l=i.exec(t.substring(n));return l?(o=l[0],n+=o.length,o):""}const a=[];for(;r(QN),!(n>=t.length);){let i=r(XN);if(i.slice(-1)===",")i=fn(e,i.substring(0,i.length-1)),a.push(i);else{let o="";i=fn(e,i);let l=!1;for(;;){const c=t.charAt(n);if(c===""){a.push((i+o).trim());break}else if(l)c===")"&&(l=!1);else if(c===","){n+=1,a.push((i+o).trim());break}else c==="("&&(l=!0);o+=c,n+=1}}}return a.join(", ")}const Ul=new WeakMap;function fn(e,t){return!t||t.trim()===""?t:Ua(e,t)}function eS(e){return!!(e.tagName==="svg"||e.ownerSVGElement)}function Ua(e,t){let n=Ul.get(e);if(n||(n=e.createElement("a"),Ul.set(e,n)),!t)t="";else if(t.startsWith("blob:")||t.startsWith("data:"))return t;return n.setAttribute("href",t),n.href}function Mm(e,t,n,r,a,i){return r&&(n==="src"||n==="href"&&!(t==="use"&&r[0]==="#")||n==="xlink:href"&&r[0]!=="#"||n==="background"&&(t==="table"||t==="td"||t==="th")?fn(e,r):n==="srcset"?ZN(e,r):n==="style"?Na(r,Ua(e)):t==="object"&&n==="data"?fn(e,r):typeof i=="function"?i(n,r,a):r)}function Om(e,t,n){return(e==="video"||e==="audio")&&t==="autoplay"}function tS(e,t,n,r){try{if(r&&e.matches(r))return!1;if(typeof t=="string"){if(e.classList.contains(t))return!0}else for(let a=e.classList.length;a--;){const i=e.classList[a];if(t.test(i))return!0}if(n)return e.matches(n)}catch{}return!1}function sS(e,t){for(let n=e.classList.length;n--;){const r=e.classList[n];if(t.test(r))return!0}return!1}function zs(e,t,n=1/0,r=0){return!e||e.nodeType!==e.ELEMENT_NODE||r>n?-1:t(e)?r:zs(e.parentNode,t,n,r+1)}function gn(e,t){return n=>{const r=n;if(r===null)return!1;try{if(e){if(typeof e=="string"){if(r.matches(`.${e}`))return!0}else if(sS(r,e))return!0}return!!(t&&r.matches(t))}catch{return!1}}}function Mn(e,t,n,r,a,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(o===null)return!1;if(o.tagName==="INPUT"){const d=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(d))return!0}let l=-1,c=-1;if(i){if(c=zs(o,gn(r,a)),c<0)return!0;l=zs(o,gn(t,n),c>=0?c:1/0)}else{if(l=zs(o,gn(t,n)),l<0)return!1;c=zs(o,gn(r,a),l>=0?l:1/0)}return l>=0?c>=0?l<=c:!0:c>=0?!1:!!i}catch{}return!!i}function nS(e,t,n){const r=e.contentWindow;if(!r)return;let a=!1,i;try{i=r.document.readyState}catch{return}if(i!=="complete"){const l=ro(()=>{a||(t(),a=!0)},n);e.addEventListener("load",()=>{Pm(l),a=!0,t()});return}const o="about:blank";if(r.location.href!==o||e.src===o||e.src==="")return ro(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}function rS(e,t,n){let r=!1,a;try{a=e.sheet}catch{return}if(a)return;const i=ro(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{Pm(i),r=!0,t()})}function aS(e,t){const{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskAttributeFn:c,maskTextClass:d,unmaskTextClass:m,maskTextSelector:u,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:b,maskInputFn:w,dataURLOptions:g={},inlineImages:N,recordCanvas:E,keepIframeSrcFn:A,newlyAddedElement:y=!1}=t,j=iS(n,r);switch(e.nodeType){case e.DOCUMENT_NODE:return e.compatMode!=="CSS1Compat"?{type:Le.Document,childNodes:[],compatMode:e.compatMode}:{type:Le.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:Le.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:j};case e.ELEMENT_NODE:return cS(e,{doc:n,blockClass:a,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:f,maskInputFn:w,dataURLOptions:g,inlineImages:N,recordCanvas:E,keepIframeSrcFn:A,newlyAddedElement:y,rootId:j,maskTextClass:d,unmaskTextClass:m,maskTextSelector:u,unmaskTextSelector:h});case e.TEXT_NODE:return oS(e,{doc:n,maskAllText:l,maskTextClass:d,unmaskTextClass:m,maskTextSelector:u,unmaskTextSelector:h,maskTextFn:b,maskInputOptions:f,maskInputFn:w,rootId:j});case e.CDATA_SECTION_NODE:return{type:Le.CDATA,textContent:"",rootId:j};case e.COMMENT_NODE:return{type:Le.Comment,textContent:e.textContent||"",rootId:j};default:return!1}}function iS(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return n===1?void 0:n}function oS(e,t){const{maskAllText:n,maskTextClass:r,unmaskTextClass:a,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:l,maskInputOptions:c,maskInputFn:d,rootId:m}=t,u=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p=u==="STYLE"?!0:void 0,f=u==="SCRIPT"?!0:void 0,b=u==="TEXTAREA"?!0:void 0;if(p&&h){try{e.nextSibling||e.previousSibling||e.parentNode.sheet?.cssRules&&(h=ja(e.parentNode.sheet))}catch(g){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${g}`,e)}h=Na(h,Ua(t.doc))}f&&(h="SCRIPT_PLACEHOLDER");const w=Mn(e,r,i,a,o,n);if(!p&&!f&&!b&&h&&w&&(h=l?l(h,e.parentElement):h.replace(/[\S]/g,"*")),b&&h&&(c.textarea||w)&&(h=d?d(h,e.parentNode):h.replace(/[\S]/g,"*")),u==="OPTION"&&h){const g=za({type:null,tagName:u,maskInputOptions:c});h=ur({isMasked:Mn(e,r,i,a,o,g),element:e,value:h,maskInputFn:d})}return{type:Le.Text,textContent:h||"",isStyle:p,rootId:m}}function cS(e,t){const{doc:n,blockClass:r,blockSelector:a,unblockSelector:i,inlineStylesheet:o,maskInputOptions:l={},maskAttributeFn:c,maskInputFn:d,dataURLOptions:m={},inlineImages:u,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:b,maskTextClass:w,unmaskTextClass:g,maskTextSelector:N,unmaskTextSelector:E}=t,A=tS(e,r,a,i),y=qN(e);let j={};const _=e.attributes.length;for(let k=0;k<_;k++){const S=e.attributes[k];S.name&&!Om(y,S.name,S.value)&&(j[S.name]=Mm(n,y,Dn(S.name),S.value,e,c))}if(y==="link"&&o){const k=Array.from(n.styleSheets).find(D=>D.href===e.href);let S=null;k&&(S=ja(k)),S&&(j.rel=null,j.href=null,j.crossorigin=null,j._cssText=Na(S,k.href))}if(y==="style"&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const k=ja(e.sheet);k&&(j._cssText=Na(k,Ua(n)))}if(y==="input"||y==="textarea"||y==="select"||y==="option"){const k=e,S=Qo(k),D=wa(k,no(y),S),F=k.checked;if(S!=="submit"&&S!=="button"&&D){const q=Mn(k,w,N,g,E,za({type:S,tagName:no(y),maskInputOptions:l}));j.value=ur({isMasked:q,element:k,value:D,maskInputFn:d})}F&&(j.checked=F)}if(y==="option"&&(e.selected&&!l.select?j.selected=!0:delete j.selected),y==="canvas"&&h){if(e.__context==="2d")UN(e)||(j.rr_dataURL=e.toDataURL(m.type,m.quality));else if(!("__context"in e)){const k=e.toDataURL(m.type,m.quality),S=n.createElement("canvas");S.width=e.width,S.height=e.height;const D=S.toDataURL(m.type,m.quality);k!==D&&(j.rr_dataURL=k)}}if(y==="img"&&u){un||(un=n.createElement("canvas"),zl=un.getContext("2d"));const k=e,S=k.currentSrc||k.getAttribute("src")||"<unknown-src>",D=k.crossOrigin,F=()=>{k.removeEventListener("load",F);try{un.width=k.naturalWidth,un.height=k.naturalHeight,zl.drawImage(k,0,0),j.rr_dataURL=un.toDataURL(m.type,m.quality)}catch(q){if(k.crossOrigin!=="anonymous"){k.crossOrigin="anonymous",k.complete&&k.naturalWidth!==0?F():k.addEventListener("load",F);return}else console.warn(`Cannot inline img src=${S}! Error: ${q}`)}k.crossOrigin==="anonymous"&&(D?j.crossOrigin=D:k.removeAttribute("crossorigin"))};k.complete&&k.naturalWidth!==0?F():k.addEventListener("load",F)}if((y==="audio"||y==="video")&&(j.rr_mediaState=e.paused?"paused":"played",j.rr_mediaCurrentTime=e.currentTime),f||(e.scrollLeft&&(j.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(j.rr_scrollTop=e.scrollTop)),A){const{width:k,height:S}=e.getBoundingClientRect();j={class:j.class,rr_width:`${k}px`,rr_height:`${S}px`}}y==="iframe"&&!p(j.src)&&(!A&&!Dm(e)&&(j.rr_src=j.src),delete j.src);let T;try{customElements.get(y)&&(T=!0)}catch{}return{type:Le.Element,tagName:y,attributes:j,childNodes:[],isSVG:eS(e)||void 0,needBlock:A,rootId:b,isCustom:T}}function Ae(e){return e==null?"":e.toLowerCase()}function lS(e,t){if(t.comment&&e.type===Le.Comment)return!0;if(e.type===Le.Element){if(t.script&&(e.tagName==="script"||e.tagName==="link"&&(e.attributes.rel==="preload"||e.attributes.rel==="modulepreload")||e.tagName==="link"&&e.attributes.rel==="prefetch"&&typeof e.attributes.href=="string"&&Am(e.attributes.href)==="js"))return!0;if(t.headFavicon&&(e.tagName==="link"&&e.attributes.rel==="shortcut icon"||e.tagName==="meta"&&(Ae(e.attributes.name).match(/^msapplication-tile(image|color)$/)||Ae(e.attributes.name)==="application-name"||Ae(e.attributes.rel)==="icon"||Ae(e.attributes.rel)==="apple-touch-icon"||Ae(e.attributes.rel)==="shortcut icon")))return!0;if(e.tagName==="meta"){if(t.headMetaDescKeywords&&Ae(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(Ae(e.attributes.property).match(/^(og|twitter|fb):/)||Ae(e.attributes.name).match(/^(og|twitter):/)||Ae(e.attributes.name)==="pinterest"))return!0;if(t.headMetaRobots&&(Ae(e.attributes.name)==="robots"||Ae(e.attributes.name)==="googlebot"||Ae(e.attributes.name)==="bingbot"))return!0;if(t.headMetaHttpEquiv&&e.attributes["http-equiv"]!==void 0)return!0;if(t.headMetaAuthorship&&(Ae(e.attributes.name)==="author"||Ae(e.attributes.name)==="generator"||Ae(e.attributes.name)==="framework"||Ae(e.attributes.name)==="publisher"||Ae(e.attributes.name)==="progid"||Ae(e.attributes.property).match(/^article:/)||Ae(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&(Ae(e.attributes.name)==="google-site-verification"||Ae(e.attributes.name)==="yandex-verification"||Ae(e.attributes.name)==="csrf-token"||Ae(e.attributes.name)==="p:domain_verify"||Ae(e.attributes.name)==="verify-v1"||Ae(e.attributes.name)==="verification"||Ae(e.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}function xn(e,t){const{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:u,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOMOptions:N,dataURLOptions:E={},inlineImages:A=!1,recordCanvas:y=!1,onSerialize:j,onIframeLoad:_,iframeLoadTimeout:T=5e3,onBlockedImageLoad:k,onStylesheetLoad:S,stylesheetLoadTimeout:D=5e3,keepIframeSrcFn:F=()=>!1,newlyAddedElement:q=!1}=t;let{preserveWhiteSpace:te=!0}=t;const I=aS(e,{doc:n,mirror:r,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:u,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,dataURLOptions:E,inlineImages:A,recordCanvas:y,keepIframeSrcFn:F,newlyAddedElement:q});if(!I)return console.warn(e,"not serialized"),null;let P;r.hasNode(e)?P=r.getId(e):lS(I,N)||!te&&I.type===Le.Text&&!I.isStyle&&!I.textContent.replace(/^\s+|\s+$/gm,"").length?P=mr:P=Zo();const R=Object.assign(I,{id:P});if(r.add(e,R),P===mr)return null;j&&j(e);let z=!h;if(R.type===Le.Element){z=z&&!R.needBlock;const U=e.shadowRoot;U&&nr(U)&&(R.isShadowHost=!0)}if((R.type===Le.Document||R.type===Le.Element)&&z){N.headWhitespace&&R.type===Le.Element&&R.tagName==="head"&&(te=!1);const U={doc:n,mirror:r,blockClass:a,blockSelector:i,maskAllText:l,unblockSelector:o,maskTextClass:c,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:u,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOMOptions:N,dataURLOptions:E,inlineImages:A,recordCanvas:y,preserveWhiteSpace:te,onSerialize:j,onIframeLoad:_,iframeLoadTimeout:T,onBlockedImageLoad:k,onStylesheetLoad:S,stylesheetLoadTimeout:D,keepIframeSrcFn:F},V=e.childNodes?Array.from(e.childNodes):[];for(const ne of V){const re=xn(ne,U);re&&R.childNodes.push(re)}if(DN(e)&&e.shadowRoot)for(const ne of Array.from(e.shadowRoot.childNodes)){const re=xn(ne,U);re&&(nr(e.shadowRoot)&&(re.isShadow=!0),R.childNodes.push(re))}}if(e.parentNode&&sr(e.parentNode)&&nr(e.parentNode)&&(R.isShadow=!0),R.type===Le.Element&&R.tagName==="iframe"&&!R.needBlock&&nS(e,()=>{const U=Dm(e);if(U&&_){const V=xn(U,{doc:U,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOMOptions:N,dataURLOptions:E,inlineImages:A,recordCanvas:y,preserveWhiteSpace:te,onSerialize:j,onIframeLoad:_,iframeLoadTimeout:T,onStylesheetLoad:S,stylesheetLoadTimeout:D,keepIframeSrcFn:F});V&&_(e,V)}},T),R.type===Le.Element&&R.tagName==="img"&&!e.complete&&R.needBlock){const U=e,V=()=>{if(U.isConnected&&!U.complete&&k)try{const ne=U.getBoundingClientRect();ne.width>0&&ne.height>0&&k(U,R,ne)}catch{}U.removeEventListener("load",V)};U.isConnected&&U.addEventListener("load",V)}return R.type===Le.Element&&R.tagName==="link"&&typeof R.attributes.rel=="string"&&(R.attributes.rel==="stylesheet"||R.attributes.rel==="preload"&&typeof R.attributes.href=="string"&&Am(R.attributes.href)==="css")&&rS(e,()=>{if(S){const U=xn(e,{doc:n,mirror:r,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:c,unmaskTextClass:d,maskTextSelector:m,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOMOptions:N,dataURLOptions:E,inlineImages:A,recordCanvas:y,preserveWhiteSpace:te,onSerialize:j,onIframeLoad:_,iframeLoadTimeout:T,onStylesheetLoad:S,stylesheetLoadTimeout:D,keepIframeSrcFn:F});U&&S(e,U)}},D),R.type===Le.Element&&delete R.needBlock,R}function dS(e,t){const{mirror:n=new Im,blockClass:r="rr-block",blockSelector:a=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:l="rr-mask",unmaskTextClass:c=null,maskTextSelector:d=null,unmaskTextSelector:m=null,inlineStylesheet:u=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOM:N=!1,dataURLOptions:E,preserveWhiteSpace:A,onSerialize:y,onIframeLoad:j,iframeLoadTimeout:_,onBlockedImageLoad:T,onStylesheetLoad:k,stylesheetLoadTimeout:S,keepIframeSrcFn:D=()=>!1}=t||{};return xn(e,{doc:e,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,maskAllText:o,maskTextClass:l,unmaskTextClass:c,maskTextSelector:d,unmaskTextSelector:m,skipChild:!1,inlineStylesheet:u,maskInputOptions:f===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:f===!1?{}:f,maskAttributeFn:b,maskTextFn:w,maskInputFn:g,slimDOMOptions:N===!0||N==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:N==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:N===!1?{}:N,dataURLOptions:E,inlineImages:h,recordCanvas:p,preserveWhiteSpace:A,onSerialize:y,onIframeLoad:j,iframeLoadTimeout:_,onBlockedImageLoad:T,onStylesheetLoad:k,stylesheetLoadTimeout:S,keepIframeSrcFn:D,newlyAddedElement:!1})}function st(e,t,n=document){const r={capture:!0,passive:!0};return n.addEventListener(e,t,r),()=>n.removeEventListener(e,t,r)}const mn=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Hl={map:{},getId(){return console.error(mn),-1},getNode(){return console.error(mn),null},removeNodeFromMap(){console.error(mn)},has(){return console.error(mn),!1},reset(){console.error(mn)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Hl=new Proxy(Hl,{get(e,t,n){return t==="map"&&console.error(mn),Reflect.get(e,t,n)}}));function hr(e,t,n={}){let r=null,a=0;return function(...i){const o=Date.now();!a&&n.leading===!1&&(a=o);const l=t-(o-a),c=this;l<=0||l>t?(r&&(xS(r),r=null),a=o,e.apply(c,i)):!r&&n.trailing!==!1&&(r=Ha(()=>{a=n.leading===!1?0:Date.now(),r=null,e.apply(c,i)},l))}}function Lm(e,t,n,r,a=window){const i=a.Object.getOwnPropertyDescriptor(e,t);return a.Object.defineProperty(e,t,r?n:{set(o){Ha(()=>{n.set.call(this,o)},0),i&&i.set&&i.set.call(this,o)}}),()=>Lm(e,t,i||{},!0)}function ec(e,t,n){try{if(!(t in e))return()=>{};const r=e[t],a=n(r);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:r}})),e[t]=a,()=>{e[t]=r}}catch{return()=>{}}}let Sa=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Sa=()=>new Date().getTime());function Fm(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:e.pageXOffset!==void 0?e.pageXOffset:t?.documentElement.scrollLeft||t?.body?.parentElement?.scrollLeft||t?.body?.scrollLeft||0,top:t.scrollingElement?t.scrollingElement.scrollTop:e.pageYOffset!==void 0?e.pageYOffset:t?.documentElement.scrollTop||t?.body?.parentElement?.scrollTop||t?.body?.scrollTop||0}}function $m(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function Bm(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function zm(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function mt(e,t,n,r,a){if(!e)return!1;const i=zm(e);if(!i)return!1;const o=gn(t,n);if(!a){const d=r&&i.matches(r);return o(i)&&!d}const l=zs(i,o);let c=-1;return l<0?!1:(r&&(c=zs(i,gn(null,r))),l>-1&&c<0?!0:l<c)}function uS(e,t){return t.getId(e)!==-1}function xi(e,t){return t.getId(e)===mr}function Um(e,t){if(sr(e))return!1;const n=t.getId(e);return t.has(n)?e.parentNode&&e.parentNode.nodeType===e.DOCUMENT_NODE?!1:e.parentNode?Um(e.parentNode,t):!0:!0}function ao(e){return!!e.changedTouches}function mS(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...t)=>{let n=t[0];if(!(0 in t))throw new TypeError("1 argument is required");do if(this===n)return!0;while(n=n&&n.parentNode);return!1})}function Hm(e,t){return!!(e.nodeName==="IFRAME"&&t.getMeta(e))}function Wm(e,t){return!!(e.nodeName==="LINK"&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&e.getAttribute("rel")==="stylesheet"&&t.getMeta(e))}function io(e){return!!e?.shadowRoot}class hS{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(t){return this.styleIDMap.get(t)??-1}has(t){return this.styleIDMap.has(t)}add(t,n){if(this.has(t))return this.getId(t);let r;return n===void 0?r=this.id++:r=n,this.styleIDMap.set(t,r),this.idStyleMap.set(r,t),r}getStyle(t){return this.idStyleMap.get(t)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function qm(e){let t=null;return e.getRootNode?.()?.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function pS(e){let t=e,n;for(;n=qm(t);)t=n;return t}function fS(e){const t=e.ownerDocument;if(!t)return!1;const n=pS(e);return t.contains(n)}function Gm(e){const t=e.ownerDocument;return t?t.contains(e)||fS(e):!1}const Wl={};function tc(e){const t=Wl[e];if(t)return t;const n=window.document;let r=window[e];if(n&&typeof n.createElement=="function")try{const a=n.createElement("iframe");a.hidden=!0,n.head.appendChild(a);const i=a.contentWindow;i&&i[e]&&(r=i[e]),n.head.removeChild(a)}catch{}return Wl[e]=r.bind(window)}function gS(...e){return tc("requestAnimationFrame")(...e)}function Ha(...e){return tc("setTimeout")(...e)}function xS(...e){return tc("clearTimeout")(...e)}var xe=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(xe||{}),ce=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(ce||{}),et=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(et||{}),ts=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(ts||{}),hn=(e=>(e[e.Play=0]="Play",e[e.Pause=1]="Pause",e[e.Seeked=2]="Seeked",e[e.VolumeChange=3]="VolumeChange",e[e.RateChange=4]="RateChange",e))(hn||{});function sc(e){try{return e.contentDocument}catch{}}function bS(e){try{return e.contentWindow}catch{}}function ql(e){return"__ln"in e}class yS{constructor(){this.length=0,this.head=null,this.tail=null}get(t){if(t>=this.length)throw new Error("Position outside of list range");let n=this.head;for(let r=0;r<t;r++)n=n?.next||null;return n}addNode(t){const n={value:t,previous:null,next:null};if(t.__ln=n,t.previousSibling&&ql(t.previousSibling)){const r=t.previousSibling.__ln.next;n.next=r,n.previous=t.previousSibling.__ln,t.previousSibling.__ln.next=n,r&&(r.previous=n)}else if(t.nextSibling&&ql(t.nextSibling)&&t.nextSibling.__ln.previous){const r=t.nextSibling.__ln.previous;n.previous=r,n.next=t.nextSibling.__ln,t.nextSibling.__ln.previous=n,r&&(r.next=n)}else this.head&&(this.head.previous=n),n.next=this.head,this.head=n;n.next===null&&(this.tail=n),this.length++}removeNode(t){const n=t.__ln;this.head&&(n.previous?(n.previous.next=n.next,n.next?n.next.previous=n.previous:this.tail=n.previous):(this.head=n.next,this.head?this.head.previous=null:this.tail=null),t.__ln&&delete t.__ln,this.length--)}}const Gl=(e,t)=>`${e}@${t}`;class vS{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=t=>{t.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const t=[],n=new Set,r=new yS,a=c=>{let d=c,m=mr;for(;m===mr;)d=d&&d.nextSibling,m=d&&this.mirror.getId(d);return m},i=c=>{if(!c.parentNode||!Gm(c))return;const d=sr(c.parentNode)?this.mirror.getId(qm(c)):this.mirror.getId(c.parentNode),m=a(c);if(d===-1||m===-1)return r.addNode(c);const u=xn(c,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{Hm(h,this.mirror)&&!mt(h,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&this.iframeManager.addIframe(h),Wm(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),io(c)&&this.shadowDomManager.addShadowRoot(c.shadowRoot,this.doc)},onIframeLoad:(h,p)=>{mt(h,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(this.iframeManager.attachIframe(h,p),h.contentWindow&&this.canvasManager.addWindow(h.contentWindow),this.shadowDomManager.observeAttachShadow(h))},onStylesheetLoad:(h,p)=>{this.stylesheetManager.attachLinkElement(h,p)},onBlockedImageLoad:(h,p,{width:f,height:b})=>{this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:p.id,attributes:{style:{width:`${f}px`,height:`${b}px`}}}]})}});u&&(t.push({parentId:d,nextId:m,node:u}),n.add(u.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const c of this.movedSet)Yl(this.removes,c,this.mirror)&&!this.movedSet.has(c.parentNode)||i(c);for(const c of this.addedSet)!Vl(this.droppedSet,c)&&!Yl(this.removes,c,this.mirror)||Vl(this.movedSet,c)?i(c):this.droppedSet.add(c);let o=null;for(;r.length;){let c=null;if(o){const d=this.mirror.getId(o.value.parentNode),m=a(o.value);d!==-1&&m!==-1&&(c=o)}if(!c){let d=r.tail;for(;d;){const m=d;if(d=d.previous,m){const u=this.mirror.getId(m.value.parentNode);if(a(m.value)===-1)continue;if(u!==-1){c=m;break}else{const p=m.value;if(p.parentNode&&p.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const f=p.parentNode.host;if(this.mirror.getId(f)!==-1){c=m;break}}}}}}if(!c){for(;r.head;)r.removeNode(r.head.value);break}o=c.previous,r.removeNode(c.value),i(c.value)}const l={texts:this.texts.map(c=>({id:this.mirror.getId(c.node),value:c.value})).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),attributes:this.attributes.map(c=>{const{attributes:d}=c;if(typeof d.style=="string"){const m=JSON.stringify(c.styleDiff),u=JSON.stringify(c._unchangedStyles);m.length<d.style.length&&(m+u).split("var(").length===d.style.split("var(").length&&(d.style=c.styleDiff)}return{id:this.mirror.getId(c.node),attributes:d}}).filter(c=>!n.has(c.id)).filter(c=>this.mirror.has(c.id)),removes:this.removes,adds:t};!l.texts.length&&!l.attributes.length&&!l.removes.length&&!l.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(l))},this.processMutation=t=>{if(!xi(t.target,this.mirror))switch(t.type){case"characterData":{const n=t.target.textContent;!mt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&n!==t.oldValue&&this.texts.push({value:Mn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&n?this.maskTextFn?this.maskTextFn(n,zm(t.target)):n.replace(/[\S]/g,"*"):n,node:t.target});break}case"attributes":{const n=t.target;let r=t.attributeName,a=t.target.getAttribute(r);if(r==="value"){const o=Qo(n),l=n.tagName;a=wa(n,l,o);const c=za({maskInputOptions:this.maskInputOptions,tagName:l,type:o}),d=Mn(t.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,c);a=ur({isMasked:d,element:n,value:a,maskInputFn:this.maskInputFn})}if(mt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||a===t.oldValue)return;let i=this.attributeMap.get(t.target);if(n.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(a))if(!sc(n))r="rr_src";else return;if(i||(i={node:t.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(t.target,i)),r==="type"&&n.tagName==="INPUT"&&(t.oldValue||"").toLowerCase()==="password"&&n.setAttribute("data-rr-is-password","true"),!Om(n.tagName,r)&&(i.attributes[r]=Mm(this.doc,Dn(n.tagName),Dn(r),a,n,this.maskAttributeFn),r==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}const o=this.unattachedDoc.createElement("span");t.oldValue&&o.setAttribute("style",t.oldValue);for(const l of Array.from(n.style)){const c=n.style.getPropertyValue(l),d=n.style.getPropertyPriority(l);c!==o.style.getPropertyValue(l)||d!==o.style.getPropertyPriority(l)?d===""?i.styleDiff[l]=c:i.styleDiff[l]=[c,d]:i._unchangedStyles[l]=[c,d]}for(const l of Array.from(o.style))n.style.getPropertyValue(l)===""&&(i.styleDiff[l]=!1)}break}case"childList":{if(mt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;t.addedNodes.forEach(n=>this.genAdds(n,t.target)),t.removedNodes.forEach(n=>{const r=this.mirror.getId(n),a=sr(t.target)?this.mirror.getId(t.target.host):this.mirror.getId(t.target);mt(t.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||xi(n,this.mirror)||!uS(n,this.mirror)||(this.addedSet.has(n)?(oo(this.addedSet,n),this.droppedSet.add(n)):this.addedSet.has(t.target)&&r===-1||Um(t.target,this.mirror)||(this.movedSet.has(n)&&this.movedMap[Gl(r,a)]?oo(this.movedSet,n):this.removes.push({parentId:a,id:r,isShadow:sr(t.target)&&nr(t.target)?!0:void 0})),this.mapRemoves.push(n))});break}}},this.genAdds=(t,n)=>{if(!this.processedNodeManager.inOtherBuffer(t,this)&&!(this.addedSet.has(t)||this.movedSet.has(t))){if(this.mirror.hasNode(t)){if(xi(t,this.mirror))return;this.movedSet.add(t);let r=null;n&&this.mirror.hasNode(n)&&(r=this.mirror.getId(n)),r&&r!==-1&&(this.movedMap[Gl(this.mirror.getId(t),r)]=!0)}else this.addedSet.add(t),this.droppedSet.delete(t);mt(t,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(t.childNodes&&t.childNodes.forEach(r=>this.genAdds(r)),io(t)&&t.shadowRoot.childNodes.forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,t)}))}}}init(t){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(n=>{this[n]=t[n]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function oo(e,t){e.delete(t),t.childNodes?.forEach(n=>oo(e,n))}function Yl(e,t,n){return e.length===0?!1:jS(e,t,n)}function jS(e,t,n){let r=t.parentNode;for(;r;){const a=n.getId(r);if(e.some(i=>i.id===a))return!0;r=r.parentNode}return!1}function Vl(e,t){return e.size===0?!1:Ym(e,t)}function Ym(e,t){const{parentNode:n}=t;return n?e.has(n)?!0:Ym(e,n):!1}let rr;function wS(e){rr=e}function NS(){rr=void 0}const ye=e=>rr?(...n)=>{try{return e(...n)}catch(r){if(rr&&rr(r)===!0)return()=>{};throw r}}:e,bn=[];function kr(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch{}return e&&e.target}function Vm(e,t){const n=new vS;bn.push(n),n.init(e);let r=window.MutationObserver||window.__rrMutationObserver;const a=window?.Zone?.__symbol__?.("MutationObserver");a&&window[a]&&(r=window[a]);const i=new r(ye(o=>{e.onMutation&&e.onMutation(o)===!1||n.processMutations.bind(n)(o)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function SS({mousemoveCb:e,sampling:t,doc:n,mirror:r}){if(t.mousemove===!1)return()=>{};const a=typeof t.mousemove=="number"?t.mousemove:50,i=typeof t.mousemoveCallback=="number"?t.mousemoveCallback:500;let o=[],l;const c=hr(ye(u=>{const h=Date.now()-l;e(o.map(p=>(p.timeOffset-=h,p)),u),o=[],l=null}),i),d=ye(hr(ye(u=>{const h=kr(u),{clientX:p,clientY:f}=ao(u)?u.changedTouches[0]:u;l||(l=Sa()),o.push({x:p,y:f,id:r.getId(h),timeOffset:Sa()-l}),c(typeof DragEvent<"u"&&u instanceof DragEvent?ce.Drag:u instanceof MouseEvent?ce.MouseMove:ce.TouchMove)}),a,{trailing:!1})),m=[st("mousemove",d,n),st("touchmove",d,n),st("drag",d,n)];return ye(()=>{m.forEach(u=>u())})}function _S({mouseInteractionCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};const l=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,c=[];let d=null;const m=u=>h=>{const p=kr(h);if(mt(p,r,a,i,!0))return;let f=null,b=u;if("pointerType"in h){switch(h.pointerType){case"mouse":f=ts.Mouse;break;case"touch":f=ts.Touch;break;case"pen":f=ts.Pen;break}f===ts.Touch?et[u]===et.MouseDown?b="TouchStart":et[u]===et.MouseUp&&(b="TouchEnd"):ts.Pen}else ao(h)&&(f=ts.Touch);f!==null?(d=f,(b.startsWith("Touch")&&f===ts.Touch||b.startsWith("Mouse")&&f===ts.Mouse)&&(f=null)):et[u]===et.Click&&(f=d,d=null);const w=ao(h)?h.changedTouches[0]:h;if(!w)return;const g=n.getId(p),{clientX:N,clientY:E}=w;ye(e)({type:et[b],id:g,x:N,y:E,...f!==null&&{pointerType:f}})};return Object.keys(et).filter(u=>Number.isNaN(Number(u))&&!u.endsWith("_Departed")&&l[u]!==!1).forEach(u=>{let h=Dn(u);const p=m(u);if(window.PointerEvent)switch(et[u]){case et.MouseDown:case et.MouseUp:h=h.replace("mouse","pointer");break;case et.TouchStart:case et.TouchEnd:return}c.push(st(h,p,t))}),ye(()=>{c.forEach(u=>u())})}function Km({scrollCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,sampling:o}){const l=ye(hr(ye(c=>{const d=kr(c);if(!d||mt(d,r,a,i,!0))return;const m=n.getId(d);if(d===t&&t.defaultView){const u=Fm(t.defaultView);e({id:m,x:u.left,y:u.top})}else e({id:m,x:d.scrollLeft,y:d.scrollTop})}),o.scroll||100));return st("scroll",l,t)}function kS({viewportResizeCb:e},{win:t}){let n=-1,r=-1;const a=ye(hr(ye(()=>{const i=$m(),o=Bm();(n!==i||r!==o)&&(e({width:Number(o),height:Number(i)}),n=i,r=o)}),200));return st("resize",a,t)}const ES=["INPUT","TEXTAREA","SELECT"],Kl=new WeakMap;function TS({inputCb:e,doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,ignoreClass:o,ignoreSelector:l,maskInputOptions:c,maskInputFn:d,sampling:m,userTriggeredOnInput:u,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:b}){function w(_){let T=kr(_);const k=_.isTrusted,S=T&&no(T.tagName);if(S==="OPTION"&&(T=T.parentElement),!T||!S||ES.indexOf(S)<0||mt(T,r,a,i,!0))return;const D=T;if(D.classList.contains(o)||l&&D.matches(l))return;const F=Qo(T);let q=wa(D,S,F),te=!1;const I=za({maskInputOptions:c,tagName:S,type:F}),P=Mn(T,h,f,p,b,I);(F==="radio"||F==="checkbox")&&(te=T.checked),q=ur({isMasked:P,element:T,value:q,maskInputFn:d}),g(T,u?{text:q,isChecked:te,userTriggered:k}:{text:q,isChecked:te});const R=T.name;F==="radio"&&R&&te&&t.querySelectorAll(`input[type="radio"][name="${R}"]`).forEach(z=>{if(z!==T){const U=ur({isMasked:P,element:z,value:wa(z,S,F),maskInputFn:d});g(z,u?{text:U,isChecked:!te,userTriggered:!1}:{text:U,isChecked:!te})}})}function g(_,T){const k=Kl.get(_);if(!k||k.text!==T.text||k.isChecked!==T.isChecked){Kl.set(_,T);const S=n.getId(_);ye(e)({...T,id:S})}}const E=(m.input==="last"?["change"]:["input","change"]).map(_=>st(_,ye(w),t)),A=t.defaultView;if(!A)return()=>{E.forEach(_=>_())};const y=A.Object.getOwnPropertyDescriptor(A.HTMLInputElement.prototype,"value"),j=[[A.HTMLInputElement.prototype,"value"],[A.HTMLInputElement.prototype,"checked"],[A.HTMLSelectElement.prototype,"value"],[A.HTMLTextAreaElement.prototype,"value"],[A.HTMLSelectElement.prototype,"selectedIndex"],[A.HTMLOptionElement.prototype,"selected"]];return y&&y.set&&E.push(...j.map(_=>Lm(_[0],_[1],{set(){ye(w)({target:this,isTrusted:!1})}},!1,A))),ye(()=>{E.forEach(_=>_())})}function _a(e){const t=[];function n(r,a){if(Ur("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Ur("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Ur("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Ur("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const o=Array.from(r.parentRule.cssRules).indexOf(r);a.unshift(o)}else if(r.parentStyleSheet){const o=Array.from(r.parentStyleSheet.cssRules).indexOf(r);a.unshift(o)}return a}return n(e,t)}function bs(e,t,n){let r,a;return e?(e.ownerNode?r=t.getId(e.ownerNode):a=n.getId(e),{styleId:a,id:r}):{}}function CS({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};const a=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:ye((m,u,h)=>{const[p,f]=h,{id:b,styleId:w}=bs(u,t,n.styleMirror);return(b&&b!==-1||w&&w!==-1)&&e({id:b,styleId:w,adds:[{rule:p,index:f}]}),m.apply(u,h)})});const i=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:ye((m,u,h)=>{const[p]=h,{id:f,styleId:b}=bs(u,t,n.styleMirror);return(f&&f!==-1||b&&b!==-1)&&e({id:f,styleId:b,removes:[{index:p}]}),m.apply(u,h)})});let o;r.CSSStyleSheet.prototype.replace&&(o=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:ye((m,u,h)=>{const[p]=h,{id:f,styleId:b}=bs(u,t,n.styleMirror);return(f&&f!==-1||b&&b!==-1)&&e({id:f,styleId:b,replace:p}),m.apply(u,h)})}));let l;r.CSSStyleSheet.prototype.replaceSync&&(l=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(l,{apply:ye((m,u,h)=>{const[p]=h,{id:f,styleId:b}=bs(u,t,n.styleMirror);return(f&&f!==-1||b&&b!==-1)&&e({id:f,styleId:b,replaceSync:p}),m.apply(u,h)})}));const c={};Hr("CSSGroupingRule")?c.CSSGroupingRule=r.CSSGroupingRule:(Hr("CSSMediaRule")&&(c.CSSMediaRule=r.CSSMediaRule),Hr("CSSConditionRule")&&(c.CSSConditionRule=r.CSSConditionRule),Hr("CSSSupportsRule")&&(c.CSSSupportsRule=r.CSSSupportsRule));const d={};return Object.entries(c).forEach(([m,u])=>{d[m]={insertRule:u.prototype.insertRule,deleteRule:u.prototype.deleteRule},u.prototype.insertRule=new Proxy(d[m].insertRule,{apply:ye((h,p,f)=>{const[b,w]=f,{id:g,styleId:N}=bs(p.parentStyleSheet,t,n.styleMirror);return(g&&g!==-1||N&&N!==-1)&&e({id:g,styleId:N,adds:[{rule:b,index:[..._a(p),w||0]}]}),h.apply(p,f)})}),u.prototype.deleteRule=new Proxy(d[m].deleteRule,{apply:ye((h,p,f)=>{const[b]=f,{id:w,styleId:g}=bs(p.parentStyleSheet,t,n.styleMirror);return(w&&w!==-1||g&&g!==-1)&&e({id:w,styleId:g,removes:[{index:[..._a(p),b]}]}),h.apply(p,f)})})}),ye(()=>{r.CSSStyleSheet.prototype.insertRule=a,r.CSSStyleSheet.prototype.deleteRule=i,o&&(r.CSSStyleSheet.prototype.replace=o),l&&(r.CSSStyleSheet.prototype.replaceSync=l),Object.entries(c).forEach(([m,u])=>{u.prototype.insertRule=d[m].insertRule,u.prototype.deleteRule=d[m].deleteRule})})}function Jm({mirror:e,stylesheetManager:t},n){let r=null;n.nodeName==="#document"?r=e.getId(n):r=e.getId(n.host);const a=n.nodeName==="#document"?n.defaultView?.Document:n.ownerDocument?.defaultView?.ShadowRoot,i=a?.prototype?Object.getOwnPropertyDescriptor(a?.prototype,"adoptedStyleSheets"):void 0;return r===null||r===-1||!a||!i?()=>{}:(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return i.get?.call(this)},set(o){const l=i.set?.call(this,o);if(r!==null&&r!==-1)try{t.adoptStyleSheets(o,r)}catch{}return l}}),ye(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})}))}function IS({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:r},{win:a}){const i=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:ye((l,c,d)=>{const[m,u,h]=d;if(n.has(m))return i.apply(c,[m,u,h]);const{id:p,styleId:f}=bs(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(p&&p!==-1||f&&f!==-1)&&e({id:p,styleId:f,set:{property:m,value:u,priority:h},index:_a(c.parentRule)}),l.apply(c,d)})});const o=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:ye((l,c,d)=>{const[m]=d;if(n.has(m))return o.apply(c,[m]);const{id:u,styleId:h}=bs(c.parentRule?.parentStyleSheet,t,r.styleMirror);return(u&&u!==-1||h&&h!==-1)&&e({id:u,styleId:h,remove:{property:m},index:_a(c.parentRule)}),l.apply(c,d)})}),ye(()=>{a.CSSStyleDeclaration.prototype.setProperty=i,a.CSSStyleDeclaration.prototype.removeProperty=o})}function AS({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:r,mirror:a,sampling:i,doc:o}){const l=ye(d=>hr(ye(m=>{const u=kr(m);if(!u||mt(u,t,n,r,!0))return;const{currentTime:h,volume:p,muted:f,playbackRate:b}=u;e({type:d,id:a.getId(u),currentTime:h,volume:p,muted:f,playbackRate:b})}),i.media||500)),c=[st("play",l(hn.Play),o),st("pause",l(hn.Pause),o),st("seeked",l(hn.Seeked),o),st("volumechange",l(hn.VolumeChange),o),st("ratechange",l(hn.RateChange),o)];return ye(()=>{c.forEach(d=>d())})}function RS({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const r=[],a=new WeakMap,i=n.FontFace;n.FontFace=function(c,d,m){const u=new i(c,d,m);return a.set(u,{family:c,buffer:typeof d!="string",descriptors:m,fontSource:typeof d=="string"?d:JSON.stringify(Array.from(new Uint8Array(d)))}),u};const o=ec(t.fonts,"add",function(l){return function(c){return Ha(ye(()=>{const d=a.get(c);d&&(e(d),a.delete(c))}),0),l.apply(this,[c])}});return r.push(()=>{n.FontFace=i}),r.push(o),ye(()=>{r.forEach(l=>l())})}function PS(e){const{doc:t,mirror:n,blockClass:r,blockSelector:a,unblockSelector:i,selectionCb:o}=e;let l=!0;const c=ye(()=>{const d=t.getSelection();if(!d||l&&d?.isCollapsed)return;l=d.isCollapsed||!1;const m=[],u=d.rangeCount||0;for(let h=0;h<u;h++){const p=d.getRangeAt(h),{startContainer:f,startOffset:b,endContainer:w,endOffset:g}=p;mt(f,r,a,i,!0)||mt(w,r,a,i,!0)||m.push({start:n.getId(f),startOffset:b,end:n.getId(w),endOffset:g})}o({ranges:m})});return c(),st("selectionchange",c)}function DS({doc:e,customElementCb:t}){const n=e.defaultView;return!n||!n.customElements?()=>{}:ec(n.customElements,"define",function(a){return function(i,o,l){try{t({define:{name:i}})}catch{}return a.apply(this,[i,o,l])}})}function MS(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};let r;e.recordDOM&&(r=Vm(e,e.doc));const a=SS(e),i=_S(e),o=Km(e),l=kS(e,{win:n}),c=TS(e),d=AS(e);let m=()=>{},u=()=>{},h=()=>{},p=()=>{};e.recordDOM&&(m=CS(e,{win:n}),u=Jm(e,e.doc),h=IS(e,{win:n}),e.collectFonts&&(p=RS(e)));const f=PS(e),b=DS(e),w=[];for(const g of e.plugins)w.push(g.observer(g.callback,n,g.options));return ye(()=>{bn.forEach(g=>g.reset()),r?.disconnect(),a(),i(),o(),l(),c(),d(),m(),u(),h(),p(),f(),b(),w.forEach(g=>g())})}function Ur(e){return typeof window[e]<"u"}function Hr(e){return!!(typeof window[e]<"u"&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class co{constructor(t){this.generateIdFn=t,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(t,n,r,a){const i=r||this.getIdToRemoteIdMap(t),o=a||this.getRemoteIdToIdMap(t);let l=i.get(n);return l||(l=this.generateIdFn(),i.set(n,l),o.set(l,n)),l}getIds(t,n){const r=this.getIdToRemoteIdMap(t),a=this.getRemoteIdToIdMap(t);return n.map(i=>this.getId(t,i,r,a))}getRemoteId(t,n,r){const a=r||this.getRemoteIdToIdMap(t);if(typeof n!="number")return n;const i=a.get(n);return i||-1}getRemoteIds(t,n){const r=this.getRemoteIdToIdMap(t);return n.map(a=>this.getRemoteId(t,a,r))}reset(t){if(!t){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(t),this.iframeRemoteIdToIdMap.delete(t)}getIdToRemoteIdMap(t){let n=this.iframeIdToRemoteIdMap.get(t);return n||(n=new Map,this.iframeIdToRemoteIdMap.set(t,n)),n}getRemoteIdToIdMap(t){let n=this.iframeRemoteIdToIdMap.get(t);return n||(n=new Map,this.iframeRemoteIdToIdMap.set(t,n)),n}}class OS{constructor(){this.crossOriginIframeMirror=new co(Zo),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class LS{constructor(t){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new co(Zo),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=t.mutationCb,this.wrappedEmit=t.wrappedEmit,this.stylesheetManager=t.stylesheetManager,this.recordCrossOriginIframes=t.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new co(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=t.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(t){this.iframes.set(t,!0),t.contentWindow&&this.crossOriginIframeMap.set(t.contentWindow,t)}addLoadListener(t){this.loadListener=t}attachIframe(t,n){this.mutationCb({adds:[{parentId:this.mirror.getId(t),nextId:null,node:n}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&t.contentWindow?.addEventListener("message",this.handleMessage.bind(this)),this.loadListener?.(t);const r=sc(t);r&&r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(r))}handleMessage(t){const n=t;if(n.data.type!=="rrweb"||n.origin!==n.data.origin||!t.source)return;const a=this.crossOriginIframeMap.get(t.source);if(!a)return;const i=this.transformCrossOriginEvent(a,n.data.event);i&&this.wrappedEmit(i,n.data.isCheckout)}transformCrossOriginEvent(t,n){switch(n.type){case xe.FullSnapshot:{this.crossOriginIframeMirror.reset(t),this.crossOriginIframeStyleMirror.reset(t),this.replaceIdOnNode(n.data.node,t);const r=n.data.node.id;return this.crossOriginIframeRootIdMap.set(t,r),this.patchRootIdOnNode(n.data.node,r),{timestamp:n.timestamp,type:xe.IncrementalSnapshot,data:{source:ce.Mutation,adds:[{parentId:this.mirror.getId(t),nextId:null,node:n.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case xe.Meta:case xe.Load:case xe.DomContentLoaded:return!1;case xe.Plugin:return n;case xe.Custom:return this.replaceIds(n.data.payload,t,["id","parentId","previousId","nextId"]),n;case xe.IncrementalSnapshot:switch(n.data.source){case ce.Mutation:return n.data.adds.forEach(r=>{this.replaceIds(r,t,["parentId","nextId","previousId"]),this.replaceIdOnNode(r.node,t);const a=this.crossOriginIframeRootIdMap.get(t);a&&this.patchRootIdOnNode(r.node,a)}),n.data.removes.forEach(r=>{this.replaceIds(r,t,["parentId","id"])}),n.data.attributes.forEach(r=>{this.replaceIds(r,t,["id"])}),n.data.texts.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case ce.Drag:case ce.TouchMove:case ce.MouseMove:return n.data.positions.forEach(r=>{this.replaceIds(r,t,["id"])}),n;case ce.ViewportResize:return!1;case ce.MediaInteraction:case ce.MouseInteraction:case ce.Scroll:case ce.CanvasMutation:case ce.Input:return this.replaceIds(n.data,t,["id"]),n;case ce.StyleSheetRule:case ce.StyleDeclaration:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleId"]),n;case ce.Font:return n;case ce.Selection:return n.data.ranges.forEach(r=>{this.replaceIds(r,t,["start","end"])}),n;case ce.AdoptedStyleSheet:return this.replaceIds(n.data,t,["id"]),this.replaceStyleIds(n.data,t,["styleIds"]),n.data.styles?.forEach(r=>{this.replaceStyleIds(r,t,["styleId"])}),n}}return!1}replace(t,n,r,a){for(const i of a)!Array.isArray(n[i])&&typeof n[i]!="number"||(Array.isArray(n[i])?n[i]=t.getIds(r,n[i]):n[i]=t.getId(r,n[i]));return n}replaceIds(t,n,r){return this.replace(this.crossOriginIframeMirror,t,n,r)}replaceStyleIds(t,n,r){return this.replace(this.crossOriginIframeStyleMirror,t,n,r)}replaceIdOnNode(t,n){this.replaceIds(t,n,["id","rootId"]),"childNodes"in t&&t.childNodes.forEach(r=>{this.replaceIdOnNode(r,n)})}patchRootIdOnNode(t,n){t.type!==Le.Document&&!t.rootId&&(t.rootId=n),"childNodes"in t&&t.childNodes.forEach(r=>{this.patchRootIdOnNode(r,n)})}}class FS{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class $S{constructor(t){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=t.mutationCb,this.scrollCb=t.scrollCb,this.bypassOptions=t.bypassOptions,this.mirror=t.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(t,n){if(!nr(t)||this.shadowDoms.has(t))return;this.shadowDoms.add(t),this.bypassOptions.canvasManager.addShadowRoot(t);const r=Vm({...this.bypassOptions,doc:n,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},t);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Km({...this.bypassOptions,scrollCb:this.scrollCb,doc:t,mirror:this.mirror})),Ha(()=>{t.adoptedStyleSheets&&t.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(t.adoptedStyleSheets,this.mirror.getId(t.host)),this.restoreHandlers.push(Jm({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},t))},0)}observeAttachShadow(t){const n=sc(t),r=bS(t);!n||!r||this.patchAttachShadow(r.Element,n)}patchAttachShadow(t,n){const r=this;this.restoreHandlers.push(ec(t.prototype,"attachShadow",function(a){return function(i){const o=a.call(this,i);return this.shadowRoot&&Gm(this)&&r.addShadowRoot(this.shadowRoot,n),o}}))}reset(){this.restoreHandlers.forEach(t=>{try{t()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet,this.bypassOptions.canvasManager.resetShadowRoots()}}var Jl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",BS=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var Wr=0;Wr<Jl.length;Wr++)BS[Jl.charCodeAt(Wr)]=Wr;class Xl{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}addWindow(){}addShadowRoot(){}resetShadowRoots(){}}class zS{constructor(t){this.trackedLinkElements=new WeakSet,this.styleMirror=new hS,this.mutationCb=t.mutationCb,this.adoptedStyleSheetCb=t.adoptedStyleSheetCb}attachLinkElement(t,n){"_cssText"in n.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:n.id,attributes:n.attributes}]}),this.trackLinkElement(t)}trackLinkElement(t){this.trackedLinkElements.has(t)||(this.trackedLinkElements.add(t),this.trackStylesheetInLinkElement(t))}adoptStyleSheets(t,n){if(t.length===0)return;const r={id:n,styleIds:[]},a=[];for(const i of t){let o;this.styleMirror.has(i)?o=this.styleMirror.getId(i):(o=this.styleMirror.add(i),a.push({styleId:o,rules:Array.from(i.rules||CSSRule,(l,c)=>({rule:Cm(l),index:c}))})),r.styleIds.push(o)}a.length>0&&(r.styles=a),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(t){}}class US{constructor(){this.nodeMap=new WeakMap,this.active=!1}inOtherBuffer(t,n){const r=this.nodeMap.get(t);return r&&Array.from(r).some(a=>a!==n)}add(t,n){this.active||(this.active=!0,gS(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(t,(this.nodeMap.get(t)||new Set).add(n))}destroy(){}}let Me,ka;try{if(Array.from([1],e=>e*2)[0]!==2){const e=document.createElement("iframe");document.body.appendChild(e),Array.from=e.contentWindow?.Array.from||Array.from,document.body.removeChild(e)}}catch(e){console.debug("Unable to override Array.from",e)}const Dt=zN();function os(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:r,blockClass:a="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:l="rr-ignore",ignoreSelector:c=null,maskAllText:d=!1,maskTextClass:m="rr-mask",unmaskTextClass:u=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:b,maskInputOptions:w,slimDOMOptions:g,maskAttributeFn:N,maskInputFn:E,maskTextFn:A,maxCanvasSize:y=null,packFn:j,sampling:_={},dataURLOptions:T={},mousemoveWait:k,recordDOM:S=!0,recordCanvas:D=!1,recordCrossOriginIframes:F=!1,recordAfter:q=e.recordAfter==="DOMContentLoaded"?e.recordAfter:"load",userTriggeredOnInput:te=!1,collectFonts:I=!1,inlineImages:P=!1,plugins:R,keepIframeSrcFn:z=()=>!1,ignoreCSSAttributes:U=new Set([]),errorHandler:V,onMutation:ne,getCanvasManager:re}=e;wS(V);const K=F?window.parent===window:!0;let x=!1;if(!K)try{window.parent.document&&(x=!1)}catch{x=!0}if(K&&!t)throw new Error("emit function is required");if(!K&&!x)return()=>{};k!==void 0&&_.mousemove===void 0&&(_.mousemove=k),Dt.reset();const M=b===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:w!==void 0?w:{},X=g===!0||g==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:g==="all",headMetaDescKeywords:g==="all"}:g||{};mS();let le,Q=0;const Se=de=>{for(const Ee of R||[])Ee.eventProcessor&&(de=Ee.eventProcessor(de));return j&&!x&&(de=j(de)),de};Me=(de,Ee)=>{const se=de;if(se.timestamp=Sa(),bn[0]?.isFrozen()&&se.type!==xe.FullSnapshot&&!(se.type===xe.IncrementalSnapshot&&se.data.source===ce.Mutation)&&bn.forEach(_e=>_e.unfreeze()),K)t?.(Se(se),Ee);else if(x){const _e={type:"rrweb",event:Se(se),origin:window.location.origin,isCheckout:Ee};window.parent.postMessage(_e,"*")}if(se.type===xe.FullSnapshot)le=se,Q=0;else if(se.type===xe.IncrementalSnapshot){if(se.data.source===ce.Mutation&&se.data.isAttachIframe)return;Q++;const _e=r&&Q>=r,ue=n&&le&&se.timestamp-le.timestamp>n;(_e||ue)&&Ie(!0)}};const Y=de=>{Me({type:xe.IncrementalSnapshot,data:{source:ce.Mutation,...de}})},B=de=>Me({type:xe.IncrementalSnapshot,data:{source:ce.Scroll,...de}}),ft=de=>Me({type:xe.IncrementalSnapshot,data:{source:ce.CanvasMutation,...de}}),Ms=de=>Me({type:xe.IncrementalSnapshot,data:{source:ce.AdoptedStyleSheet,...de}}),dt=new zS({mutationCb:Y,adoptedStyleSheetCb:Ms}),L=typeof __RRWEB_EXCLUDE_IFRAME__=="boolean"&&__RRWEB_EXCLUDE_IFRAME__?new OS:new LS({mirror:Dt,mutationCb:Y,stylesheetManager:dt,recordCrossOriginIframes:F,wrappedEmit:Me});for(const de of R||[])de.getMirror&&de.getMirror({nodeMirror:Dt,crossOriginIframeMirror:L.crossOriginIframeMirror,crossOriginIframeStyleMirror:L.crossOriginIframeStyleMirror});const oe=new US,fe=WS(re,{mirror:Dt,win:window,mutationCb:de=>Me({type:xe.IncrementalSnapshot,data:{source:ce.CanvasMutation,...de}}),recordCanvas:D,blockClass:a,blockSelector:i,unblockSelector:o,maxCanvasSize:y,sampling:_.canvas,dataURLOptions:T,errorHandler:V}),Ce=typeof __RRWEB_EXCLUDE_SHADOW_DOM__=="boolean"&&__RRWEB_EXCLUDE_SHADOW_DOM__?new FS:new $S({mutationCb:Y,scrollCb:B,bypassOptions:{onMutation:ne,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:m,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:M,dataURLOptions:T,maskAttributeFn:N,maskTextFn:A,maskInputFn:E,recordCanvas:D,inlineImages:P,sampling:_,slimDOMOptions:X,iframeManager:L,stylesheetManager:dt,canvasManager:fe,keepIframeSrcFn:z,processedNodeManager:oe},mirror:Dt}),Ie=(de=!1)=>{if(!S)return;Me({type:xe.Meta,data:{href:window.location.href,width:Bm(),height:$m()}},de),dt.reset(),Ce.init(),bn.forEach(se=>se.lock());const Ee=dS(document,{mirror:Dt,blockClass:a,blockSelector:i,unblockSelector:o,maskAllText:d,maskTextClass:m,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:M,maskAttributeFn:N,maskInputFn:E,maskTextFn:A,slimDOM:X,dataURLOptions:T,recordCanvas:D,inlineImages:P,onSerialize:se=>{Hm(se,Dt)&&L.addIframe(se),Wm(se,Dt)&&dt.trackLinkElement(se),io(se)&&Ce.addShadowRoot(se.shadowRoot,document)},onIframeLoad:(se,_e)=>{L.attachIframe(se,_e),se.contentWindow&&fe.addWindow(se.contentWindow),Ce.observeAttachShadow(se)},onStylesheetLoad:(se,_e)=>{dt.attachLinkElement(se,_e)},onBlockedImageLoad:(se,_e,{width:ue,height:Wt})=>{Y({adds:[],removes:[],texts:[],attributes:[{id:_e.id,attributes:{style:{width:`${ue}px`,height:`${Wt}px`}}}]})},keepIframeSrcFn:z});if(!Ee)return console.warn("Failed to snapshot the document");Me({type:xe.FullSnapshot,data:{node:Ee,initialOffset:Fm(window)}}),bn.forEach(se=>se.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&dt.adoptStyleSheets(document.adoptedStyleSheets,Dt.getId(document))};ka=Ie;try{const de=[],Ee=_e=>ye(MS)({onMutation:ne,mutationCb:Y,mousemoveCb:(ue,Wt)=>Me({type:xe.IncrementalSnapshot,data:{source:Wt,positions:ue}}),mouseInteractionCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.MouseInteraction,...ue}}),scrollCb:B,viewportResizeCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.ViewportResize,...ue}}),inputCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.Input,...ue}}),mediaInteractionCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.MediaInteraction,...ue}}),styleSheetRuleCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.StyleSheetRule,...ue}}),styleDeclarationCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.StyleDeclaration,...ue}}),canvasMutationCb:ft,fontCb:ue=>Me({type:xe.IncrementalSnapshot,data:{source:ce.Font,...ue}}),selectionCb:ue=>{Me({type:xe.IncrementalSnapshot,data:{source:ce.Selection,...ue}})},customElementCb:ue=>{Me({type:xe.IncrementalSnapshot,data:{source:ce.CustomElement,...ue}})},blockClass:a,ignoreClass:l,ignoreSelector:c,maskAllText:d,maskTextClass:m,unmaskTextClass:u,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:M,inlineStylesheet:f,sampling:_,recordDOM:S,recordCanvas:D,inlineImages:P,userTriggeredOnInput:te,collectFonts:I,doc:_e,maskAttributeFn:N,maskInputFn:E,maskTextFn:A,keepIframeSrcFn:z,blockSelector:i,unblockSelector:o,slimDOMOptions:X,dataURLOptions:T,mirror:Dt,iframeManager:L,stylesheetManager:dt,shadowDomManager:Ce,processedNodeManager:oe,canvasManager:fe,ignoreCSSAttributes:U,plugins:R?.filter(ue=>ue.observer)?.map(ue=>({observer:ue.observer,options:ue.options,callback:Wt=>Me({type:xe.Plugin,data:{plugin:ue.name,payload:Wt}})}))||[]},{});L.addLoadListener(_e=>{try{de.push(Ee(_e.contentDocument))}catch(ue){console.warn(ue)}});const se=()=>{Ie(),de.push(Ee(document))};return document.readyState==="interactive"||document.readyState==="complete"?se():(de.push(st("DOMContentLoaded",()=>{Me({type:xe.DomContentLoaded,data:{}}),q==="DOMContentLoaded"&&se()})),de.push(st("load",()=>{Me({type:xe.Load,data:{}}),q==="load"&&se()},window))),()=>{de.forEach(_e=>_e()),oe.destroy(),ka=void 0,NS()}}catch(de){console.warn(de)}}function HS(e){if(!ka)throw new Error("please take full snapshot after start recording");ka(e)}os.mirror=Dt;os.takeFullSnapshot=HS;function WS(e,t){try{return e?e(t):new Xl}catch{return console.warn("Unable to initialize CanvasManager"),new Xl}}var Ql;(function(e){e[e.NotStarted=0]="NotStarted",e[e.Running=1]="Running",e[e.Stopped=2]="Stopped"})(Ql||(Ql={}));const qS=3,GS=5;function nc(e){return e>9999999999?e:e*1e3}function bi(e){return e>9999999999?e/1e3:e}function Er(e,t){t.category!=="sentry.transaction"&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:xe.Custom,timestamp:(t.timestamp||0)*1e3,data:{tag:"breadcrumb",payload:Mt(t,10,1e3)}}),t.category==="console")))}const YS="button,a";function Xm(e){return e.closest(YS)||e}function Qm(e){const t=Zm(e);return!t||!(t instanceof Element)?t:Xm(t)}function Zm(e){return VS(e)?e.target:e}function VS(e){return typeof e=="object"&&!!e&&"target"in e}let ys;function KS(e){return ys||(ys=[],JS()),ys.push(e),()=>{const t=ys?ys.indexOf(e):-1;t>-1&&ys.splice(t,1)}}function JS(){ct(Re,"open",function(e){return function(...t){if(ys)try{ys.forEach(n=>n())}catch{}return e.apply(Re,t)}})}const XS=new Set([ce.Mutation,ce.StyleSheetRule,ce.StyleDeclaration,ce.AdoptedStyleSheet,ce.CanvasMutation,ce.Selection,ce.MediaInteraction]);function QS(e,t,n){e.handleClick(t,n)}class ZS{constructor(t,n,r=Er){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=n.timeout/1e3,this._threshold=n.threshold/1e3,this._scrollTimeout=n.scrollTimeout/1e3,this._replay=t,this._ignoreSelector=n.ignoreSelector,this._addBreadcrumbEvent=r}addListeners(){const t=KS(()=>{this._lastMutation=Zl()});this._teardown=()=>{t(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(t,n){if(t_(n,this._ignoreSelector)||!s_(t))return;const r={timestamp:bi(t.timestamp),clickBreadcrumb:t,clickCount:0,node:n};this._clicks.some(a=>a.node===r.node&&Math.abs(a.timestamp-r.timestamp)<1)||(this._clicks.push(r),this._clicks.length===1&&this._scheduleCheckClicks())}registerMutation(t=Date.now()){this._lastMutation=bi(t)}registerScroll(t=Date.now()){this._lastScroll=bi(t)}registerClick(t){const n=Xm(t);this._handleMultiClick(n)}_handleMultiClick(t){this._getClicks(t).forEach(n=>{n.clickCount++})}_getClicks(t){return this._clicks.filter(n=>n.node===t)}_checkClicks(){const t=[],n=Zl();this._clicks.forEach(r=>{!r.mutationAfter&&this._lastMutation&&(r.mutationAfter=r.timestamp<=this._lastMutation?this._lastMutation-r.timestamp:void 0),!r.scrollAfter&&this._lastScroll&&(r.scrollAfter=r.timestamp<=this._lastScroll?this._lastScroll-r.timestamp:void 0),r.timestamp+this._timeout<=n&&t.push(r)});for(const r of t){const a=this._clicks.indexOf(r);a>-1&&(this._generateBreadcrumbs(r),this._clicks.splice(a,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(t){const n=this._replay,r=t.scrollAfter&&t.scrollAfter<=this._scrollTimeout,a=t.mutationAfter&&t.mutationAfter<=this._threshold,i=!r&&!a,{clickCount:o,clickBreadcrumb:l}=t;if(i){const c=Math.min(t.mutationAfter||this._timeout,this._timeout)*1e3,d=c<this._timeout*1e3?"mutation":"timeout",m={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.slowClickDetected",data:{...l.data,url:Re.location.href,route:n.getCurrentRoute(),timeAfterClickMs:c,endReason:d,clickCount:o||1}};this._addBreadcrumbEvent(n,m);return}if(o>1){const c={type:"default",message:l.message,timestamp:l.timestamp,category:"ui.multiClick",data:{...l.data,url:Re.location.href,route:n.getCurrentRoute(),clickCount:o,metric:!0}};this._addBreadcrumbEvent(n,c)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=_r(()=>this._checkClicks(),1e3)}}const e_=["A","BUTTON","INPUT"];function t_(e,t){return!!(!e_.includes(e.tagName)||e.tagName==="INPUT"&&!["submit","button"].includes(e.getAttribute("type")||"")||e.tagName==="A"&&(e.hasAttribute("download")||e.hasAttribute("target")&&e.getAttribute("target")!=="_self")||t&&e.matches(t))}function s_(e){return!!(e.data&&typeof e.data.nodeId=="number"&&e.timestamp)}function Zl(){return Date.now()/1e3}function n_(e,t){try{if(!r_(t))return;const{source:n}=t.data;if(XS.has(n)&&e.registerMutation(t.timestamp),n===ce.Scroll&&e.registerScroll(t.timestamp),a_(t)){const{type:r,id:a}=t.data,i=os.mirror.getNode(a);i instanceof HTMLElement&&r===et.Click&&e.registerClick(i)}}catch{}}function r_(e){return e.type===qS}function a_(e){return e.data.source===ce.MouseInteraction}function Kt(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var rc=(e=>(e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment",e))(rc||{});const i_=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function o_(e){const t={};!e["data-sentry-component"]&&e["data-sentry-element"]&&(e["data-sentry-component"]=e["data-sentry-element"]);for(const n in e)if(i_.has(n)){let r=n;(n==="data-testid"||n==="data-test-id")&&(r="testId"),t[r]=e[n]}return t}const c_=e=>t=>{if(!e.isEnabled())return;const n=l_(t);if(!n)return;const r=t.name==="click",a=r?t.event:void 0;r&&e.clickDetector&&a?.target&&!a.altKey&&!a.metaKey&&!a.ctrlKey&&!a.shiftKey&&QS(e.clickDetector,n,Qm(t.event)),Er(e,n)};function eh(e,t){const n=os.mirror.getId(e),r=n&&os.mirror.getNode(n),a=r&&os.mirror.getMeta(r),i=a&&u_(a)?a:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(o=>o.type===rc.Text&&o.textContent).filter(Boolean).map(o=>o.trim()).join(""),attributes:o_(i.attributes)}}:{}}}function l_(e){const{target:t,message:n}=d_(e);return Kt({category:`ui.${e.name}`,...eh(t,n)})}function d_(e){const t=e.name==="click";let n,r=null;try{r=t?Qm(e.event):Zm(e.event),n=Ct(r,{maxStringLength:200})||"<unknown>"}catch{n="<unknown>"}return{target:r,message:n}}function u_(e){return e.type===rc.Element}function m_(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=h_(t);n&&Er(e,n)}function h_(e){const{metaKey:t,shiftKey:n,ctrlKey:r,altKey:a,key:i,target:o}=e;if(!o||p_(o)||!i)return null;const l=t||r||a,c=i.length===1;if(!l&&c)return null;const d=Ct(o,{maxStringLength:200})||"<unknown>",m=eh(o,d);return Kt({category:"ui.keyDown",message:d,data:{...m.data,metaKey:t,shiftKey:n,ctrlKey:r,altKey:a,key:i}})}function p_(e){return e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable}const f_={resource:v_,paint:b_,navigation:y_};function yi(e,t){return({metric:n})=>void t.replayPerformanceEntries.push(e(n))}function g_(e){return e.map(x_).filter(Boolean)}function x_(e){const t=f_[e.entryType];return t?t(e):null}function On(e){return((lt()||Re.performance.timeOrigin)+e)/1e3}function b_(e){const{duration:t,entryType:n,name:r,startTime:a}=e,i=On(a);return{type:n,name:r,start:i,end:i+t,data:void 0}}function y_(e){const{entryType:t,name:n,decodedBodySize:r,duration:a,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,domInteractive:d,loadEventStart:m,loadEventEnd:u,redirectCount:h,startTime:p,transferSize:f,type:b}=e;return a===0?null:{type:`${t}.${b}`,start:On(p),end:On(i),name:n,data:{size:f,decodedBodySize:r,encodedBodySize:o,duration:a,domInteractive:d,domContentLoadedEventStart:l,domContentLoadedEventEnd:c,loadEventStart:m,loadEventEnd:u,domComplete:i,redirectCount:h}}}function v_(e){const{entryType:t,initiatorType:n,name:r,responseEnd:a,startTime:i,decodedBodySize:o,encodedBodySize:l,responseStatus:c,transferSize:d}=e;return["fetch","xmlhttprequest"].includes(n)?null:{type:`${t}.${n}`,start:On(i),end:On(a),name:r,data:{size:d,statusCode:c,decodedBodySize:o,encodedBodySize:l}}}function j_(e){const t=e.entries[e.entries.length-1],n=t?.element?[t.element]:void 0;return ac(e,"largest-contentful-paint",n)}function w_(e){return e.sources!==void 0}function N_(e){const t=[],n=[];for(const r of e.entries)if(w_(r)){const a=[];for(const i of r.sources)if(i.node){n.push(i.node);const o=os.mirror.getId(i.node);o&&a.push(o)}t.push({value:r.value,nodeIds:a.length?a:void 0})}return ac(e,"cumulative-layout-shift",n,t)}function S_(e){const t=e.entries[e.entries.length-1],n=t?.target?[t.target]:void 0;return ac(e,"interaction-to-next-paint",n)}function ac(e,t,n,r){const a=e.value,i=e.rating,o=On(a);return{type:"web-vital",name:t,start:o,end:o,data:{value:a,size:a,rating:i,nodeIds:n?n.map(l=>os.mirror.getId(l)):void 0,attributions:r}}}function __(e){function t(a){e.performanceEntries.includes(a)||e.performanceEntries.push(a)}function n({entries:a}){a.forEach(t)}const r=[];return["navigation","paint","resource"].forEach(a=>{r.push(en(a,n))}),r.push(Yo(yi(j_,e)),Go(yi(N_,e)),pm(yi(S_,e))),()=>{r.forEach(a=>a())}}const ae=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,k_='var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),s=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(t,e){for(var i=new n(31),s=0;s<31;++s)i[s]=e+=1<<t[s-1];var a=new r(i[30]);for(s=1;s<30;++s)for(var o=i[s];o<i[s+1];++o)a[o]=o-i[s]<<5|s;return{b:i,r:a}},o=a(e,2),h=o.b,f=o.r;h[28]=258,f[258]=28;for(var l=a(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,s=0,a=new n(r);s<i;++s)t[s]&&++a[t[s]-1];var o,h=new n(r);for(s=1;s<r;++s)h[s]=h[s-1]+a[s-1]<<1;if(e){o=new n(1<<r);var f=15-r;for(s=0;s<i;++s)if(t[s])for(var l=s<<4|t[s],c=r-t[s],v=h[t[s]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>f]=l}else for(o=new n(i),s=0;s<i;++s)t[s]&&(o[s]=u[h[t[s]-1]++]>>15-t[s]);return o},p=new t(288);for(c=0;c<144;++c)p[c]=8;for(c=144;c<256;++c)p[c]=9;for(c=256;c<280;++c)p[c]=7;for(c=280;c<288;++c)p[c]=8;var g=new t(32);for(c=0;c<32;++c)g[c]=5;var w=d(p,9,0),y=d(g,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},_=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},x=function(r,e){for(var i=[],s=0;s<r.length;++s)r[s]&&i.push({s:s,f:r[s]});var a=i.length,o=i.slice();if(!a)return{t:F,l:0};if(1==a){var h=new t(i[0].s+1);return h[i[0].s]=1,{t:h,l:1}}i.sort(function(t,n){return t.f-n.f}),i.push({s:-1,f:25001});var f=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:f.f+l.f,l:f,r:l};c!=a-1;)f=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:f.f+l.f,l:f,r:l};var d=o[0].s;for(s=1;s<a;++s)o[s].s>d&&(d=o[s].s);var p=new n(d+1),g=A(i[c-1],p,0);if(g>e){s=0;var w=0,y=g-e,m=1<<y;for(o.sort(function(t,n){return p[n.s]-p[t.s]||t.f-n.f});s<a;++s){var b=o[s].s;if(!(p[b]>e))break;w+=m-(1<<g-p[b]),p[b]=e}for(w>>=y;w>0;){var M=o[s].s;p[M]<e?w-=1<<e-p[M]++-1:++s}for(;s>=0&&w;--s){var E=o[s].s;p[E]==e&&(--p[E],++w)}g=e}return{t:new t(p),l:g}},A=function(t,n,r){return-1==t.s?Math.max(A(t.l,n,r+1),A(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,s=t[0],a=1,o=function(t){e[i++]=t},h=1;h<=r;++h)if(t[h]==s&&h!=r)++a;else{if(!s&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(s),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(s);a=1,s=t[h]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var s=0;s<e;++s)t[i+s+4]=r[s];return 8*(i+4+e)},U=function(t,r,a,o,h,f,l,u,c,v,m){z(r,m++,a),++h[256];for(var b=x(h,15),M=b.t,E=b.l,A=x(f,15),U=A.t,C=A.l,F=D(M),I=F.c,S=F.n,L=D(U),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=x(q,7),H=G.t,J=G.l,K=19;K>4&&!H[s[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(h,p)+T(f,g)+l,X=T(h,M)+T(f,U)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(U,C,0),R=U;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[s[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=w,P=p,Q=y,R=g;for(B=0;B<u;++B){var rt=o[B];if(rt>255){_(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;_(r,m,Q[et]),m+=R[et],et>3&&(_(r,m,rt>>5&8191),m+=i[et])}else _(r,m,N[rt]),m+=P[rt]}return _(r,m,N[256]),m+P[256]},C=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,s=0|r.length,a=0;a!=s;){for(var o=Math.min(a+2655,s);a<o;++a)i+=e+=r[a];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(s,a,o,h,u){if(!u&&(u={l:1},a.dictionary)){var c=a.dictionary.subarray(-32768),v=new t(c.length+s.length);v.set(c),v.set(s,c.length),s=v,u.w=c.length}return function(s,a,o,h,u,c){var v=c.z||s.length,d=new t(h+v+5*(1+Math.ceil(v/7e3))+u),p=d.subarray(h,d.length-u),g=c.l,w=7&(c.r||0);if(a){w&&(p[0]=c.r>>3);for(var y=C[a-1],M=y>>13,E=8191&y,z=(1<<o)-1,_=c.p||new n(32768),x=c.h||new n(z+1),A=Math.ceil(o/3),D=2*A,T=function(t){return(s[t]^s[t+1]<<A^s[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=x[H];if(_[J]=K,x[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!g)){w=U(s,p,0,F,I,S,O,q,G,j-G,w),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(s[j+Q]==s[j+Q-W]){for(var $=0;$<Z&&s[j+$]==s[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-_[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=_[J])&32767}if(R){F[q++]=268435456|f[Q]<<18|l[R];var it=31&f[Q],st=31&l[R];O+=e[it]+i[st],++I[257+it],++S[st],B=j+Q,++L}else F[q++]=s[j],++I[s[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=s[j],++I[s[j]];w=U(s,p,g,F,I,S,O,q,G,j-G,w),g||(c.r=7&w|p[w/8|0]<<3,w-=7,c.h=x,c.p=_,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+g;j+=65535){var at=j+65535;at>=v&&(p[w/8|0]=g,at=v),w=k(p,w+1,s.subarray(j,at))}c.i=v}return b(d,0,h+m(w)+u)}(s,null==a.level?6:a.level,null==a.mem?u.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(s.length)))):20:12+a.mem,o,h,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var s=this.b.length-this.s.z;this.b.set(n.subarray(0,s),this.s.z),this.s.z=this.b.length,this.p(this.b,!1),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(s),32768),this.s.z=n.length-s+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n.prototype.flush=function(){this.ondata||E(5),this.s.l&&E(4),this.p(this.b,!1),this.s.w=this.s.i,this.s.i-=2},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,s=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),a=s.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(s,n),O(s,a-8,r.d()),O(s,a-4,e),s}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t.prototype.flush=function(){j.prototype.flush.call(this)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(G)return G.encode(n);for(var e=n.length,i=new t(n.length+(n.length>>1)),s=0,a=function(t){i[s++]=t},o=0;o<e;++o){if(s+5>i.length){var h=new t(s+8+(e-o<<1));h.set(i),i=h}var f=n.charCodeAt(o);f<128||r?a(f):f<2048?(a(192|f>>6),a(128|63&f)):f>55295&&f<57344?(a(240|(f=65536+(1047552&f)|1023&n.charCodeAt(++o))>>18),a(128|f>>12&63),a(128|f>>6&63),a(128|63&f)):(a(224|f>>12),a(128|f>>6&63),a(128|63&f))}return b(i,0,s)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(const r of t)n+=r.length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J((t,n)=>{this.deflate.push(t,n)}),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}}),postMessage({id:void 0,method:"init",success:!0,response:void 0});';function E_(){const e=new Blob([k_]);return URL.createObjectURL(e)}const ed=["log","warn","error"],sa="[Replay] ";function vi(e,t="info"){Ts({category:"console",data:{logger:"replay"},level:t,message:`${sa}${e}`},{level:t})}function T_(){let e=!1,t=!1;const n={exception:()=>{},infoTick:()=>{},setConfig:r=>{e=!!r.captureExceptions,t=!!r.traceInternals}};return ae?(ed.forEach(r=>{n[r]=(...a)=>{H[r](sa,...a),t&&vi(a.join(""),Qu(r))}}),n.exception=(r,...a)=>{a.length&&n.error&&n.error(...a),H.error(sa,r),e?Ru(r,{mechanism:{handled:!0,type:"auto.function.replay.debug"}}):t&&vi(r,"error")},n.infoTick=(...r)=>{H.log(sa,...r),t&&setTimeout(()=>vi(r[0]),0)}):ed.forEach(r=>{n[r]=()=>{}}),n}const ie=T_();class ic extends Error{constructor(){super(`Event buffer exceeded maximum size of ${Xo}.`)}}class th{constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(t){const n=JSON.stringify(t).length;if(this._totalSize+=n,this._totalSize>Xo)throw new ic;this.events.push(t)}finish(){return new Promise(t=>{const n=this.events;this.clear(),t(JSON.stringify(n))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const t=this.events.map(n=>n.timestamp).sort()[0];return t?nc(t):null}}class C_{constructor(t){this._worker=t,this._id=0}ensureReady(){return this._ensureReadyPromise?this._ensureReadyPromise:(this._ensureReadyPromise=new Promise((t,n)=>{this._worker.addEventListener("message",({data:r})=>{r.success?t():n()},{once:!0}),this._worker.addEventListener("error",r=>{n(r)},{once:!0})}),this._ensureReadyPromise)}destroy(){ae&&ie.log("Destroying compression worker"),this._worker.terminate()}postMessage(t,n){const r=this._getAndIncrementId();return new Promise((a,i)=>{const o=({data:l})=>{const c=l;if(c.method===t&&c.id===r){if(this._worker.removeEventListener("message",o),!c.success){ae&&ie.error("Error in compression worker: ",c.response),i(new Error("Error in compression worker"));return}a(c.response)}};this._worker.addEventListener("message",o),this._worker.postMessage({id:r,method:t,arg:n})})}_getAndIncrementId(){return this._id++}}class I_{constructor(t){this._worker=new C_(t),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this.waitForCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(t){const n=nc(t.timestamp);(!this._earliestTimestamp||n<this._earliestTimestamp)&&(this._earliestTimestamp=n);const r=JSON.stringify(t);return this._totalSize+=r.length,this._totalSize>Xo?Promise.reject(new ic):this._sendEventToWorker(r)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,t=>{ae&&ie.exception(t,'Sending "clear" message to worker failed',t)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(t){return this._worker.postMessage("addEvent",t)}async _finishRequest(){const t=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,t}}class A_{constructor(t){this._fallback=new th,this._compression=new I_(t),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get waitForCheckout(){return this._used.waitForCheckout}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(t){this._used.hasCheckout=t}set waitForCheckout(t){this._used.waitForCheckout=t}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(t){return this._used.addEvent(t)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(t){ae&&ie.exception(t,"Failed to load the compression worker, falling back to simple buffer");return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:t,hasCheckout:n,waitForCheckout:r}=this._fallback,a=[];for(const i of t)a.push(this._compression.addEvent(i));this._compression.hasCheckout=n,this._compression.waitForCheckout=r,this._used=this._compression;try{await Promise.all(a),this._fallback.clear()}catch(i){ae&&ie.exception(i,"Failed to add events when switching buffers.")}}}function R_({useCompression:e,workerUrl:t}){if(e&&window.Worker){const n=P_(t);if(n)return n}return ae&&ie.log("Using simple buffer"),new th}function P_(e){try{const t=e||D_();if(!t)return;ae&&ie.log(`Using compression worker${e?` from ${e}`:""}`);const n=new Worker(t);return new A_(n)}catch(t){ae&&ie.exception(t,"Failed to create compression worker")}}function D_(){return typeof __SENTRY_EXCLUDE_REPLAY_WORKER__>"u"||!__SENTRY_EXCLUDE_REPLAY_WORKER__?E_():""}function oc(){try{return"sessionStorage"in Re&&!!Re.sessionStorage}catch{return!1}}function M_(e){O_(),e.session=void 0}function O_(){if(oc())try{Re.sessionStorage.removeItem(Ko)}catch{}}function sh(e){return e===void 0?!1:Math.random()<e}function cc(e){if(oc())try{Re.sessionStorage.setItem(Ko,JSON.stringify(e))}catch{}}function nh(e){const t=Date.now(),n=e.id||ht(),r=e.started||t,a=e.lastActivity||t,i=e.segmentId||0,o=e.sampled,l=e.previousSessionId;return{id:n,started:r,lastActivity:a,segmentId:i,sampled:o,previousSessionId:l}}function L_(e,t){return sh(e)?"session":t?"buffer":!1}function td({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:r}={}){const a=L_(e,t),i=nh({sampled:a,previousSessionId:r});return n&&cc(i),i}function F_(){if(!oc())return null;try{const e=Re.sessionStorage.getItem(Ko);if(!e)return null;const t=JSON.parse(e);return ae&&ie.infoTick("Loading existing session"),nh(t)}catch{return null}}function lo(e,t,n=+new Date){return e===null||t===void 0||t<0?!0:t===0?!1:e+t<=n}function rh(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:r=Date.now()}){return lo(e.started,t,r)||lo(e.lastActivity,n,r)}function ah(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!(!rh(e,{sessionIdleExpire:t,maxReplayDuration:n})||e.sampled==="buffer"&&e.segmentId===0)}function ji({sessionIdleExpire:e,maxReplayDuration:t,previousSessionId:n},r){const a=r.stickySession&&F_();return a?ah(a,{sessionIdleExpire:e,maxReplayDuration:t})?(ae&&ie.infoTick("Session in sessionStorage is expired, creating new one..."),td(r,{previousSessionId:a.id})):a:(ae&&ie.infoTick("Creating new session"),td(r,{previousSessionId:n}))}function $_(e){return e.type===xe.Custom}function lc(e,t,n){return oh(e,t)?(ih(e,t,n),!0):!1}function B_(e,t,n){return oh(e,t)?ih(e,t,n):Promise.resolve(null)}async function ih(e,t,n){const{eventBuffer:r}=e;if(!r||r.waitForCheckout&&!n)return null;const a=e.recordingMode==="buffer";try{n&&a&&r.clear(),n&&(r.hasCheckout=!0,r.waitForCheckout=!1);const i=e.getOptions(),o=z_(t,i.beforeAddRecordingEvent);return o?await r.addEvent(o):void 0}catch(i){const o=i&&i instanceof ic,l=o?"addEventSizeExceeded":"addEvent",c=be();if(c){const d=o?"buffer_overflow":"internal_sdk_error";c.recordDroppedEvent(d,"replay")}if(o&&a)return r.clear(),r.waitForCheckout=!0,null;e.handleException(i),await e.stop({reason:l})}}function oh(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=nc(t.timestamp);return n+e.timeouts.sessionIdlePause<Date.now()?!1:n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration?(ae&&ie.infoTick(`Skipping event with timestamp ${n} because it is after maxReplayDuration`),!1):!0}function z_(e,t){try{if(typeof t=="function"&&$_(e))return t(e)}catch(n){return ae&&ie.exception(n,"An error occurred in the `beforeAddRecordingEvent` callback, skipping the event..."),null}return e}function dc(e){return!e.type}function uo(e){return e.type==="transaction"}function U_(e){return e.type==="replay_event"}function sd(e){return e.type==="feedback"}function H_(e){return(t,n)=>{if(!e.isEnabled()||!dc(t)&&!uo(t))return;const r=n.statusCode;if(!(!r||r<200||r>=300)){if(uo(t)){W_(e,t);return}q_(e,t)}}}function W_(e,t){const n=e.getContext();t.contexts?.trace?.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}function q_(e,t){const n=e.getContext();if(t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id),e.recordingMode!=="buffer"||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:r}=e.getOptions();typeof r=="function"&&!r(t)||_r(async()=>{try{await e.sendBufferedReplayOrFlush()}catch(a){e.handleException(a)}})}function G_(e){return t=>{!e.isEnabled()||!dc(t)||Y_(e,t)}}function Y_(e,t){const n=t.exception?.values?.[0]?.value;if(typeof n=="string"&&(n.match(/(reactjs\.org\/docs\/error-decoder\.html\?invariant=|react\.dev\/errors\/)(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i))){const r=Kt({category:"replay.hydrate-error",data:{url:zn()}});Er(e,r)}}function V_(e){const t=be();t&&t.on("beforeAddBreadcrumb",n=>K_(e,n))}function K_(e,t){if(!e.isEnabled()||!ch(t))return;const n=J_(t);n&&Er(e,n)}function J_(e){return!ch(e)||["fetch","xhr","sentry.event","sentry.transaction"].includes(e.category)||e.category.startsWith("ui.")?null:e.category==="console"?X_(e):Kt(e)}function X_(e){const t=e.data?.arguments;if(!Array.isArray(t)||t.length===0)return Kt(e);let n=!1;const r=t.map(a=>{if(!a)return a;if(typeof a=="string")return a.length>zr?(n=!0,`${a.slice(0,zr)}`):a;if(typeof a=="object")try{const i=Mt(a,7);return JSON.stringify(i).length>zr?(n=!0,`${JSON.stringify(i,null,2).slice(0,zr)}`):i}catch{}return a});return Kt({...e,data:{...e.data,arguments:r,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}function ch(e){return!!e.category}function Q_(e,t){return e.type||!e.exception?.values?.length?!1:!!t.originalException?.__rrweb__}function lh(){const e=Te().getPropagationContext().dsc;e&&delete e.replay_id;const t=nt();if(t){const n=ms(t);delete n.replay_id}}function Z_(e,t){e.triggerUserActivity(),e.addUpdate(()=>t.timestamp?(e.throttledAddEvent({type:xe.Custom,timestamp:t.timestamp*1e3,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1):!0)}function ek(e,t){return e.recordingMode!=="buffer"||t.message===Jo||!t.exception||t.type?!1:sh(e.getOptions().errorSampleRate)}function tk(e){return Object.assign((t,n)=>!e.isEnabled()||e.isPaused()?t:U_(t)?(delete t.breadcrumbs,t):!dc(t)&&!uo(t)&&!sd(t)?t:e.checkAndHandleExpiredSession()?sd(t)?(e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),Z_(e,t),t):Q_(t,n)&&!e.getOptions()._experiments.captureExceptions?(ae&&ie.log("Ignoring error from rrweb internals",t),null):((ek(e,t)||e.recordingMode==="session")&&(t.tags={...t.tags,replayId:e.getSessionId()}),t):(lh(),t),{id:"Replay"})}function Wa(e,t){return t.map(({type:n,start:r,end:a,name:i,data:o})=>{const l=e.throttledAddEvent({type:xe.Custom,timestamp:r,data:{tag:"performanceSpan",payload:{op:n,description:i,startTimestamp:r,endTimestamp:a,data:o}}});return typeof l=="string"?Promise.resolve(null):l})}function sk(e){const{from:t,to:n}=e,r=Date.now()/1e3;return{type:"navigation.push",start:r,end:r,name:n,data:{previous:t}}}function nk(e){return t=>{if(!e.isEnabled())return;const n=sk(t);n!==null&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(Wa(e,[n]),!1)))}}function rk(e,t){return ae&&e.getOptions()._experiments.traceInternals?!1:Vy(t,be())}function dh(e,t){e.isEnabled()&&t!==null&&(rk(e,t.name)||e.addUpdate(()=>(Wa(e,[t]),!0)))}function qa(e){if(!e)return;const t=new TextEncoder;try{if(typeof e=="string")return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Nm(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch{}}function uh(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Ea(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},r=n.warnings||[];return n.warnings=[...r,t],e._meta=n,e}function mh(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:r,url:a,method:i,statusCode:o,request:l,response:c}=t;return{type:e,start:n/1e3,end:r/1e3,name:a,data:{method:i,statusCode:o,request:l,response:c}}}function pr(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function Ns(e,t,n){if(!t&&Object.keys(e).length===0)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const r={headers:e,size:t},{body:a,warnings:i}=ak(n);return r.body=a,i?.length&&(r._meta={warnings:i}),r}function mo(e,t){return Object.entries(e).reduce((n,[r,a])=>{const i=r.toLowerCase();return t.includes(i)&&e[r]&&(n[i]=a),n},{})}function ak(e){if(!e||typeof e!="string")return{body:e};const t=e.length>Ol,n=ik(e);if(t){const r=e.slice(0,Ol);return n?{body:r,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${r}`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch{}return{body:e}}function ik(e){const t=e[0],n=e[e.length-1];return t==="["&&n==="]"||t==="{"&&n==="}"}function Ta(e,t){const n=ok(e);return as(n,t)}function ok(e,t=Re.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(Re.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const r=n.href;return!e.endsWith("/")&&r.endsWith("/")?r.slice(0,-1):r}async function ck(e,t,n){try{const r=await dk(e,t,n),a=mh("resource.fetch",r);dh(n.replay,a)}catch(r){ae&&ie.exception(r,"Failed to capture fetch breadcrumb")}}function lk(e,t){const{input:n,response:r}=t,a=n?_m(n):void 0,i=qa(a),o=r?uh(r.headers.get("content-length")):void 0;i!==void 0&&(e.data.request_body_size=i),o!==void 0&&(e.data.response_body_size=o)}async function dk(e,t,n){const r=Date.now(),{startTimestamp:a=r,endTimestamp:i=r}=t,{url:o,method:l,status_code:c=0,request_body_size:d,response_body_size:m}=e.data,u=Ta(o,n.networkDetailAllowUrls)&&!Ta(o,n.networkDetailDenyUrls),h=u?uk(n,t.input,d):pr(d),p=await mk(u,n,t.response,m);return{startTimestamp:a,endTimestamp:i,url:o,method:l,statusCode:c,request:h,response:p}}function uk({networkCaptureBodies:e,networkRequestHeaders:t},n,r){const a=n?fk(n,t):{};if(!e)return Ns(a,r,void 0);const i=_m(n),[o,l]=Sm(i,ie),c=Ns(a,r,o);return l?Ea(c,l):c}async function mk(e,{networkCaptureBodies:t,networkResponseHeaders:n},r,a){if(!e&&a!==void 0)return pr(a);const i=r?hh(r.headers,n):{};if(!r||!t&&a!==void 0)return Ns(i,a,void 0);const[o,l]=await pk(r),c=hk(o,{networkCaptureBodies:t,responseBodySize:a,captureDetails:e,headers:i});return l?Ea(c,l):c}function hk(e,{networkCaptureBodies:t,responseBodySize:n,captureDetails:r,headers:a}){try{const i=e?.length&&n===void 0?qa(e):n;return r?t?Ns(a,i,e):Ns(a,i,void 0):pr(i)}catch(i){return ae&&ie.exception(i,"Failed to serialize response body"),Ns(a,n,void 0)}}async function pk(e){const t=gk(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{return[await xk(t)]}catch(n){return n instanceof Error&&n.message.indexOf("Timeout")>-1?(ae&&ie.warn("Parsing text body from response timed out"),[void 0,"BODY_PARSE_TIMEOUT"]):(ae&&ie.exception(n,"Failed to get text body from response"),[void 0,"BODY_PARSE_ERROR"])}}function hh(e,t){const n={};return t.forEach(r=>{e.get(r)&&(n[r]=e.get(r))}),n}function fk(e,t){return e.length===1&&typeof e[0]!="string"?nd(e[0],t):e.length===2?nd(e[1],t):{}}function nd(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?hh(n,t):Array.isArray(n)?{}:mo(n,t):{}}function gk(e){try{return e.clone()}catch(t){ae&&ie.exception(t,"Failed to clone response body")}}function xk(e){return new Promise((t,n)=>{const r=_r(()=>n(new Error("Timeout while trying to read response body")),500);bk(e).then(a=>t(a),a=>n(a)).finally(()=>clearTimeout(r))})}async function bk(e){return await e.text()}async function yk(e,t,n){try{const r=jk(e,t,n),a=mh("resource.xhr",r);dh(n.replay,a)}catch(r){ae&&ie.exception(r,"Failed to capture xhr breadcrumb")}}function vk(e,t){const{xhr:n,input:r}=t;if(!n)return;const a=qa(r),i=n.getResponseHeader("content-length")?uh(n.getResponseHeader("content-length")):Sk(n.response,n.responseType);a!==void 0&&(e.data.request_body_size=a),i!==void 0&&(e.data.response_body_size=i)}function jk(e,t,n){const r=Date.now(),{startTimestamp:a=r,endTimestamp:i=r,input:o,xhr:l}=t,{url:c,method:d,status_code:m=0,request_body_size:u,response_body_size:h}=e.data;if(!c)return null;if(!l||!Ta(c,n.networkDetailAllowUrls)||Ta(c,n.networkDetailDenyUrls)){const j=pr(u),_=pr(h);return{startTimestamp:a,endTimestamp:i,url:c,method:d,statusCode:m,request:j,response:_}}const p=l[Bs],f=p?mo(p.request_headers,n.networkRequestHeaders):{},b=mo(km(l),n.networkResponseHeaders),[w,g]=n.networkCaptureBodies?Sm(o,ie):[void 0],[N,E]=n.networkCaptureBodies?wk(l):[void 0],A=Ns(f,u,w),y=Ns(b,h,N);return{startTimestamp:a,endTimestamp:i,url:c,method:d,statusCode:m,request:g?Ea(A,g):A,response:E?Ea(y,E):y}}function wk(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return Nk(e.response,e.responseType)}catch(n){t.push(n)}return ae&&ie.warn("Failed to get xhr response body",...t),[void 0]}function Nk(e,t){try{if(typeof e=="string")return[e];if(e instanceof Document)return[e.body.outerHTML];if(t==="json"&&e&&typeof e=="object")return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return ae&&ie.exception(n,"Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return ae&&ie.log("Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function Sk(e,t){try{const n=t==="json"&&e&&typeof e=="object"?JSON.stringify(e):e;return qa(n)}catch{return}}function _k(e){const t=be();try{const{networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o}=e.getOptions(),l={replay:e,networkDetailAllowUrls:n,networkDetailDenyUrls:r,networkCaptureBodies:a,networkRequestHeaders:i,networkResponseHeaders:o};t&&t.on("beforeAddBreadcrumb",(c,d)=>kk(l,c,d))}catch{}}function kk(e,t,n){if(t.data)try{Ek(t)&&Ck(n)&&(vk(t,n),yk(t,n,e)),Tk(t)&&Ik(n)&&(lk(t,n),ck(t,n,e))}catch(r){ae&&ie.exception(r,"Error when enriching network breadcrumb")}}function Ek(e){return e.category==="xhr"}function Tk(e){return e.category==="fetch"}function Ck(e){return e?.xhr}function Ik(e){return e?.response}function Ak(e){const t=be();vm(c_(e)),Ba(nk(e)),V_(e),_k(e);const n=tk(e);hy(n),t&&(t.on("beforeSendEvent",G_(e)),t.on("afterSendEvent",H_(e)),t.on("createDsc",r=>{const a=e.getSessionId();a&&e.isEnabled()&&e.recordingMode==="session"&&e.checkAndHandleExpiredSession()&&(r.replay_id=a)}),t.on("spanStart",r=>{e.lastActiveSpan=r}),t.on("spanEnd",r=>{e.lastActiveSpan=r}),t.on("beforeSendFeedback",async(r,a)=>{const i=e.getSessionId();a?.includeReplay&&e.isEnabled()&&i&&r.contexts?.feedback&&(r.contexts.feedback.source==="api"&&await e.sendBufferedReplayOrFlush(),r.contexts.feedback.replay_id=i)}),t.on("openFeedbackWidget",async()=>{await e.sendBufferedReplayOrFlush()}))}async function Rk(e){try{return Promise.all(Wa(e,[Pk(Re.performance.memory)]))}catch{return[]}}function Pk(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}=e,a=Date.now()/1e3;return{type:"memory",name:"memory",start:a,end:a,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:r}}}}function Dk(e,t,n){return ev(e,t,{...n,setTimeoutImpl:_r})}const qr=je.navigator;function Mk(){return/iPhone|iPad|iPod/i.test(qr?.userAgent??"")||/Macintosh/i.test(qr?.userAgent??"")&&qr?.maxTouchPoints&&qr?.maxTouchPoints>1?{sampling:{mousemove:!1}}:{}}function Ok(e){let t=!1;return(n,r)=>{if(!e.checkAndHandleExpiredSession()){ae&&ie.warn("Received replay event after session expired.");return}const a=r||!t;t=!0,e.clickDetector&&n_(e.clickDetector,n),e.addUpdate(()=>{if(e.recordingMode==="buffer"&&a&&e.setInitialState(),!lc(e,n,a))return!0;if(!a)return!1;const i=e.session;if(Fk(e,a),e.recordingMode==="buffer"&&i&&e.eventBuffer){const o=e.eventBuffer.getEarliestTimestamp();o&&(ae&&ie.log(`Updating session start time to earliest event in buffer to ${new Date(o)}`),i.started=o,e.getOptions().stickySession&&cc(i))}return i?.previousSessionId||e.recordingMode==="session"&&e.flush(),!0})}}function Lk(e){const t=e.getOptions();return{type:xe.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:e.eventBuffer?e.eventBuffer.type==="worker":!1,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}function Fk(e,t){!t||!e.session||e.session.segmentId!==0||lc(e,Lk(e),!1)}function $k(e){if(!e)return null;try{return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}catch{return null}}function Bk(e,t,n,r){return Ds(_u(e,Ro(e),r,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:typeof t=="string"?new TextEncoder().encode(t).length:t.length},t]])}function zk({recordingData:e,headers:t}){let n;const r=`${JSON.stringify(t)}
`;if(typeof e=="string")n=`${r}${e}`;else{const i=new TextEncoder().encode(r);n=new Uint8Array(i.length+e.length),n.set(i),n.set(e,i.length)}return n}async function Uk({client:e,scope:t,replayId:n,event:r}){const a=typeof e._integrations=="object"&&e._integrations!==null&&!Array.isArray(e._integrations)?Object.keys(e._integrations):void 0,i={event_id:n,integrations:a};e.emit("preprocessEvent",r,i);const o=await Au(e.getOptions(),r,i,t,e,es());if(!o)return null;e.emit("postprocessEvent",o,i),o.platform=o.platform||"javascript";const l=e.getSdkMetadata(),{name:c,version:d,settings:m}=l?.sdk||{};return o.sdk={...o.sdk,name:c||"sentry.javascript.unknown",version:d||"0.0.0",settings:m},o}async function Hk({recordingData:e,replayId:t,segmentId:n,eventContext:r,timestamp:a,session:i}){const o=zk({recordingData:e,headers:{segment_id:n}}),{urls:l,errorIds:c,traceIds:d,initialTimestamp:m}=r,u=be(),h=Te(),p=u?.getTransport(),f=u?.getDsn();if(!u||!p||!f||!i.sampled)return Promise.resolve({});const b={type:vN,replay_start_timestamp:m/1e3,timestamp:a/1e3,error_ids:c,trace_ids:d,urls:l,replay_id:t,segment_id:n,replay_type:i.sampled},w=await Uk({scope:h,client:u,replayId:t,event:b});if(!w)return u.recordDroppedEvent("event_processor","replay"),ae&&ie.log("An event processor returned `null`, will not send event."),Promise.resolve({});delete w.sdkProcessingMetadata;const g=Bk(w,o,f,u.getOptions().tunnel);let N;try{N=await p.send(g)}catch(A){const y=new Error(Jo);try{y.cause=A}catch{}throw y}if(typeof N.statusCode=="number"&&(N.statusCode<200||N.statusCode>=300))throw new ph(N.statusCode);const E=Ku({},N);if(Vu(E,"replay"))throw new uc(E);return N}class ph extends Error{constructor(t){super(`Transport returned status code ${t}`)}}class uc extends Error{constructor(t){super("Rate limit hit"),this.rateLimits=t}}async function fh(e,t={count:0,interval:kN}){const{recordingData:n,onError:r}=e;if(n.length)try{return await Hk(e),!0}catch(a){if(a instanceof ph||a instanceof uc)throw a;if(Du("Replays",{_retryCount:t.count}),r&&r(a),t.count>=EN){const i=new Error(`${Jo} - max retries exceeded`);try{i.cause=a}catch{}throw i}return t.interval*=++t.count,new Promise((i,o)=>{_r(async()=>{try{await fh(e,t),i(!0)}catch(l){o(l)}},t.interval)})}}const gh="__THROTTLED",Wk="__SKIPPED";function qk(e,t,n){const r=new Map,a=l=>{const c=l-n;r.forEach((d,m)=>{m<c&&r.delete(m)})},i=()=>[...r.values()].reduce((l,c)=>l+c,0);let o=!1;return(...l)=>{const c=Math.floor(Date.now()/1e3);if(a(c),i()>=t){const m=o;return o=!0,m?Wk:gh}o=!1;const d=r.get(c)||0;return r.set(c,d+1),e(...l)}}class Gk{constructor({options:t,recordingOptions:n}){this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:jN,sessionIdleExpire:wN},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._requiresManualStart=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=n,this._options=t,this._debouncedFlush=Dk(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=qk((o,l)=>B_(this,o,l),300,5);const{slowClickTimeout:r,slowClickIgnoreSelectors:a}=this.getOptions(),i=r?{threshold:Math.min(TN,r),timeout:r,scrollTimeout:CN,ignoreSelector:a?a.join(","):""}:void 0;if(i&&(this.clickDetector=new ZS(this,i)),ae){const o=t._experiments;ie.setConfig({captureExceptions:!!o.captureExceptions,traceInternals:!!o.traceInternals})}this._handleVisibilityChange=()=>{Re.document.visibilityState==="visible"?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()},this._handleWindowBlur=()=>{const o=Kt({category:"ui.blur"});this._doChangeToBackgroundTasks(o)},this._handleWindowFocus=()=>{const o=Kt({category:"ui.focus"});this._doChangeToForegroundTasks(o)},this._handleKeyboardEvent=o=>{m_(this,o)}}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}handleException(t){ae&&ie.exception(t),this._options.onError&&this._options.onError(t)}initializeSampling(t){const{errorSampleRate:n,sessionSampleRate:r}=this._options,a=n<=0&&r<=0;if(this._requiresManualStart=a,!a){if(this._initializeSessionForSampling(t),!this.session){ae&&ie.exception(new Error("Unable to initialize and create session"));return}this.session.sampled!==!1&&(this.recordingMode=this.session.sampled==="buffer"&&this.session.segmentId===0?"buffer":"session",ae&&ie.infoTick(`Starting replay in ${this.recordingMode} mode`),this._initializeRecording())}}start(){if(this._isEnabled&&this.recordingMode==="session"){ae&&ie.log("Recording is already in progress");return}if(this._isEnabled&&this.recordingMode==="buffer"){ae&&ie.log("Buffering is in progress, call `flush()` to save the replay");return}ae&&ie.infoTick("Starting replay in session mode"),this._updateUserActivity();const t=ji({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=t,this.recordingMode="session",this._initializeRecording()}startBuffering(){if(this._isEnabled){ae&&ie.log("Buffering is in progress, call `flush()` to save the replay");return}ae&&ie.infoTick("Starting replay in buffer mode");const t=ji({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=t,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const t=this._canvas;this._stopRecording=os({...this._recordingOptions,...this.recordingMode==="buffer"?{checkoutEveryNms:_N}:this._options._experiments.continuousCheckout&&{checkoutEveryNms:Math.max(36e4,this._options._experiments.continuousCheckout)},emit:Ok(this),...Mk(),onMutation:this._onMutationHandler.bind(this),...t?{recordCanvas:t.recordCanvas,getCanvasManager:t.getCanvasManager,sampling:t.sampling,dataURLOptions:t.dataURLOptions}:{}})}catch(t){this.handleException(t)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(t){return this.handleException(t),!1}}async stop({forceFlush:t=!1,reason:n}={}){if(this._isEnabled){this._isEnabled=!1,this.recordingMode="buffer";try{ae&&ie.log(`Stopping Replay${n?` triggered by ${n}`:""}`),lh(),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),t&&await this._flush({force:!0}),this.eventBuffer?.destroy(),this.eventBuffer=null,M_(this)}catch(r){this.handleException(r)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),ae&&ie.log("Pausing replay"))}resume(){!this._isPaused||!this._checkSession()||(this._isPaused=!1,this.startRecording(),ae&&ie.log("Resuming replay"))}async sendBufferedReplayOrFlush({continueRecording:t=!0}={}){if(this.recordingMode==="session")return this.flushImmediate();const n=Date.now();ae&&ie.log("Converting buffer to session"),await this.flushImmediate();const r=this.stopRecording();!t||!r||this.recordingMode!=="session"&&(this.recordingMode="session",this.session&&(this._updateUserActivity(n),this._updateSessionActivity(n),this._maybeSaveSession()),this.startRecording())}addUpdate(t){const n=t();this.recordingMode==="buffer"||!this._isEnabled||n!==!0&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return this.recordingMode==="buffer"?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(t){if(!(t&&this.session?.sampled===!1))return this.session?.id}checkAndHandleExpiredSession(){if(this._lastActivity&&lo(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&this.session.sampled==="session"){this.pause();return}return!!this._checkSession()}setInitialState(){const t=`${Re.location.pathname}${Re.location.hash}${Re.location.search}`,n=`${Re.location.origin}${t}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=n,this._context.initialTimestamp=Date.now(),this._context.urls.push(n)}throttledAddEvent(t,n){const r=this._throttledAddEvent(t,n);if(r===gh){const a=Kt({category:"replay.throttled"});this.addUpdate(()=>!lc(this,{type:GS,timestamp:a.timestamp||0,data:{tag:"breadcrumb",payload:a,metric:!0}}))}return r}getCurrentRoute(){const t=this.lastActiveSpan||nt(),n=t&&Ze(t),a=(n&&we(n).data||{})[Ft];if(!(!n||!a||!["route","custom"].includes(a)))return we(n).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=R_({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_initializeSessionForSampling(t){const n=this._options.errorSampleRate>0,r=ji({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,previousSessionId:t},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:n});this.session=r}_checkSession(){if(!this.session)return!1;const t=this.session;return ah(t,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})?(this._refreshSession(t),!1):!0}async _refreshSession(t){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(t.id))}_addListeners(){try{Re.document.addEventListener("visibilitychange",this._handleVisibilityChange),Re.addEventListener("blur",this._handleWindowBlur),Re.addEventListener("focus",this._handleWindowFocus),Re.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Ak(this),this._hasInitializedCoreListeners=!0)}catch(t){this.handleException(t)}this._performanceCleanupCallback=__(this)}_removeListeners(){try{Re.document.removeEventListener("visibilitychange",this._handleVisibilityChange),Re.removeEventListener("blur",this._handleWindowBlur),Re.removeEventListener("focus",this._handleWindowFocus),Re.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(t){this.handleException(t)}}_doChangeToBackgroundTasks(t){!this.session||rh(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(t&&this._createCustomBreadcrumb(t),this.conditionalFlush())}_doChangeToForegroundTasks(t){if(!this.session)return;if(!this.checkAndHandleExpiredSession()){ae&&ie.log("Document has become active, but session has expired");return}t&&this._createCustomBreadcrumb(t)}_updateUserActivity(t=Date.now()){this._lastActivity=t}_updateSessionActivity(t=Date.now()){this.session&&(this.session.lastActivity=t,this._maybeSaveSession())}_createCustomBreadcrumb(t){this.addUpdate(()=>{this.throttledAddEvent({type:xe.Custom,timestamp:t.timestamp||0,data:{tag:"breadcrumb",payload:t}})})}_addPerformanceEntries(){let t=g_(this.performanceEntries).concat(this.replayPerformanceEntries);if(this.performanceEntries=[],this.replayPerformanceEntries=[],this._requiresManualStart){const n=this._context.initialTimestamp/1e3;t=t.filter(r=>r.start>=n)}return Promise.all(Wa(this,t))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:t,eventBuffer:n}=this;if(!t||!n||this._requiresManualStart||t.segmentId)return;const r=n.getEarliestTimestamp();r&&r<this._context.initialTimestamp&&(this._context.initialTimestamp=r)}_popEventContext(){const t={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),t}async _runFlush(){const t=this.getSessionId();if(!this.session||!this.eventBuffer||!t){ae&&ie.error("No session or eventBuffer found to flush.");return}if(await this._addPerformanceEntries(),!!this.eventBuffer?.hasEvents&&(await Rk(this),!!this.eventBuffer&&t===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const n=Date.now();if(n-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const r=this._popEventContext(),a=this.session.segmentId++;this._maybeSaveSession();const i=await this.eventBuffer.finish();await fh({replayId:t,recordingData:i,segmentId:a,eventContext:r,session:this.session,timestamp:n,onError:o=>this.handleException(o)})}catch(n){this.handleException(n),this.stop({reason:"sendReplay"});const r=be();if(r){const a=n instanceof uc?"ratelimit_backoff":"send_error";r.recordDroppedEvent(a,"replay")}}}async _flush({force:t=!1}={}){if(!this._isEnabled&&!t)return;if(!this.checkAndHandleExpiredSession()){ae&&ie.error("Attempting to finish replay event after session expired.");return}if(!this.session)return;const n=this.session.started,a=Date.now()-n;this._debouncedFlush.cancel();const i=a<this._options.minReplayDuration,o=a>this._options.maxReplayDuration+5e3;if(i||o){ae&&ie.log(`Session duration (${Math.floor(a/1e3)}s) is too ${i?"short":"long"}, not sending replay.`),i&&this._debouncedFlush();return}const l=this.eventBuffer;l&&this.session.segmentId===0&&!l.hasCheckout&&ae&&ie.log("Flushing initial segment without checkout.");const c=!!this._flushLock;this._flushLock||(this._flushLock=this._runFlush());try{await this._flushLock}catch(d){this.handleException(d)}finally{this._flushLock=void 0,c&&this._debouncedFlush()}}_maybeSaveSession(){this.session&&this._options.stickySession&&cc(this.session)}_onMutationHandler(t){const{ignoreMutations:n}=this._options._experiments;if(n?.length&&t.some(l=>{const c=$k(l.target),d=n.join(",");return c?.matches(d)}))return!1;const r=t.length,a=this._options.mutationLimit,i=this._options.mutationBreadcrumbLimit,o=a&&r>a;if(r>i||o){const l=Kt({category:"replay.mutations",data:{count:r,limit:o}});this._createCustomBreadcrumb(l)}return o?(this.stop({reason:"mutationLimit",forceFlush:this.recordingMode==="session"}),!1):!0}}function Vn(e,t){return[...e,...t].join(",")}function Yk({mask:e,unmask:t,block:n,unblock:r,ignore:a}){const i=["base","iframe[srcdoc]:not([src])"],o=Vn(e,[".sentry-mask","[data-sentry-mask]"]),l=Vn(t,[]);return{maskTextSelector:o,unmaskTextSelector:l,blockSelector:Vn(n,[".sentry-block","[data-sentry-block]",...i]),unblockSelector:Vn(r,[]),ignoreSelector:Vn(a,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'])}}function Vk({el:e,key:t,maskAttributes:n,maskAllText:r,privacyOptions:a,value:i}){return!r||a.unmaskTextSelector&&e.matches(a.unmaskTextSelector)?i:n.includes(t)||t==="value"&&e.tagName==="INPUT"&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i}const rd='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Kk=["content-length","content-type","accept"];let ad=!1;const Jk=(e=>new Xk(e));class Xk{constructor({flushMinDelay:t=NN,flushMaxDelay:n=SN,minReplayDuration:r=IN,maxReplayDuration:a=Ll,stickySession:i=!0,useCompression:o=!0,workerUrl:l,_experiments:c={},maskAllText:d=!0,maskAllInputs:m=!0,blockAllMedia:u=!0,mutationBreadcrumbLimit:h=750,mutationLimit:p=1e4,slowClickTimeout:f=7e3,slowClickIgnoreSelectors:b=[],networkDetailAllowUrls:w=[],networkDetailDenyUrls:g=[],networkCaptureBodies:N=!0,networkRequestHeaders:E=[],networkResponseHeaders:A=[],mask:y=[],maskAttributes:j=["title","placeholder","aria-label"],unmask:_=[],block:T=[],unblock:k=[],ignore:S=[],maskFn:D,beforeAddRecordingEvent:F,beforeErrorSampling:q,onError:te}={}){this.name="Replay";const I=Yk({mask:y,unmask:_,block:T,unblock:k,ignore:S});if(this._recordingOptions={maskAllInputs:m,maskAllText:d,maskInputOptions:{password:!0},maskTextFn:D,maskInputFn:D,maskAttributeFn:(P,R,z)=>Vk({maskAttributes:j,maskAllText:d,privacyOptions:I,key:P,value:R,el:z}),...I,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:P=>{try{P.__rrweb__=!0}catch{}},recordCrossOriginIframes:!!c.recordCrossOriginIframes},this._initialOptions={flushMinDelay:t,flushMaxDelay:n,minReplayDuration:Math.min(r,AN),maxReplayDuration:Math.min(a,Ll),stickySession:i,useCompression:o,workerUrl:l,blockAllMedia:u,maskAllInputs:m,maskAllText:d,mutationBreadcrumbLimit:h,mutationLimit:p,slowClickTimeout:f,slowClickIgnoreSelectors:b,networkDetailAllowUrls:w,networkDetailDenyUrls:g,networkCaptureBodies:N,networkRequestHeaders:id(E),networkResponseHeaders:id(A),beforeAddRecordingEvent:F,beforeErrorSampling:q,onError:te,_experiments:c},this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${rd}`:rd),this._isInitialized&&Cl())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return ad}set _isInitialized(t){ad=t}afterAllSetup(t){!Cl()||this._replay||(this._setup(t),this._initialize(t))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:this._replay.recordingMode==="session"}):Promise.resolve()}flush(t){return this._replay?this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(t):(this._replay.start(),Promise.resolve()):Promise.resolve()}getReplayId(t){if(this._replay?.isEnabled())return this._replay.getSessionId(t)}getRecordingMode(){if(this._replay?.isEnabled())return this._replay.recordingMode}_initialize(t){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(t),this._replay.initializeSampling())}_setup(t){const n=Qk(this._initialOptions,t);this._replay=new Gk({options:n,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(t){try{const n=t.getIntegrationByName("ReplayCanvas");if(!n)return;this._replay._canvas=n.getOptions()}catch{}}}function Qk(e,t){const n=t.getOptions(),r={sessionSampleRate:0,errorSampleRate:0,...e},a=Qs(n.replaysSessionSampleRate),i=Qs(n.replaysOnErrorSampleRate);return a==null&&i==null&&on(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),a!=null&&(r.sessionSampleRate=a),i!=null&&(r.errorSampleRate=i),r}function id(e){return[...Kk,...e.map(t=>t.toLowerCase())]}function Zk(e){return e.split(",").some(t=>t.trim().startsWith("sentry-"))}function xh(e){try{return new URL(e,Ne.location.origin).href}catch{return}}function e1(e){return e.entryType==="resource"&&"initiatorType"in e&&typeof e.nextHopProtocol=="string"&&(e.initiatorType==="fetch"||e.initiatorType==="xmlhttprequest")}function bh(e){try{return new Headers(e)}catch{return}}const od=new WeakMap,wi=new Map,yh={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function t1(e,t){const{traceFetch:n,traceXHR:r,trackFetchStreamPerformance:a,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:l,onRequestSpanStart:c,onRequestSpanEnd:d}={...yh,...t},m=typeof i=="function"?i:f=>!0,u=f=>s1(f,l),h={},p=e.getOptions().propagateTraceparent;n&&(e.addEventProcessor(f=>(f.type==="transaction"&&f.spans&&f.spans.forEach(b=>{if(b.op==="http.client"){const w=wi.get(b.span_id);w&&(b.timestamp=w/1e3,wi.delete(b.span_id))}}),f)),a&&Mv(f=>{if(f.response){const b=od.get(f.response);b&&f.endTimestamp&&wi.set(b,f.endTimestamp)}}),sm(f=>{const b=_v(f,m,u,h,{propagateTraceparent:p,onRequestSpanEnd:d});if(f.response&&f.fetchData.__span&&od.set(f.response,f.fetchData.__span),b){const w=xh(f.fetchData.url),g=w?Vs(w).host:void 0;b.setAttributes({"http.url":w,"server.address":g}),o&&cd(b),c?.(b,{headers:f.headers})}})),r&&wm(f=>{const b=n1(f,m,u,h,p,d);b&&(o&&cd(b),c?.(b,{headers:bh(f.xhr.__sentry_xhr_v3__?.request_headers)}))})}function cd(e){const{url:t}=we(e).data;if(!t||typeof t!="string")return;const n=en("resource",({entries:r})=>{r.forEach(a=>{e1(a)&&a.name.endsWith(t)&&(e.setAttributes(ym(a)),setTimeout(n))})})}function s1(e,t){const n=zn();if(n){let r,a;try{r=new URL(e,n),a=new URL(n).origin}catch{return!1}const i=r.origin===a;return t?as(r.toString(),t)||i&&as(r.pathname,t):i}else{const r=!!e.match(/^\/(?!\/)/);return t?as(e,t):r}}function n1(e,t,n,r,a,i){const o=e.xhr,l=o?.[Bs];if(!o||o.__sentry_own_request__||!l)return;const{url:c,method:d}=l,m=Bt()&&t(c);if(e.endTimestamp&&m){const g=o.__sentry_xhr_span_id__;if(!g)return;const N=r[g];N&&l.status_code!==void 0&&(lu(N,l.status_code),N.end(),i?.(N,{headers:bh(km(o)),error:e.error}),delete r[g]);return}const u=xh(c),h=Vs(u||c),p=Yy(c),f=!!nt(),b=m&&f?qn({name:`${d} ${p}`,attributes:{url:c,type:"xhr","http.method":d,"http.url":u,"server.address":h?.host,[ze]:"auto.http.browser",[us]:"http.client",...h?.search&&{"http.query":h?.search},...h?.hash&&{"http.fragment":h?.hash}}}):new Es;o.__sentry_xhr_span_id__=b.spanContext().spanId,r[o.__sentry_xhr_span_id__]=b,n(c)&&r1(o,Bt()&&f?b:void 0,a);const w=be();return w&&w.emit("beforeOutgoingRequestSpan",b,e),b}function r1(e,t,n){const{"sentry-trace":r,baggage:a,traceparent:i}=Xu({span:t,propagateTraceparent:n});r&&a1(e,r,a,i)}function a1(e,t,n,r){const a=e.__sentry_xhr_v3__?.request_headers;if(!(a?.["sentry-trace"]||!e.setRequestHeader))try{if(e.setRequestHeader("sentry-trace",t),r&&!a?.traceparent&&e.setRequestHeader("traceparent",r),n){const i=a?.baggage;(!i||!Zk(i))&&e.setRequestHeader("baggage",n)}}catch{}}function i1(){Ne.document?Ne.document.addEventListener("visibilitychange",()=>{const e=nt();if(!e)return;const t=Ze(e);if(Ne.document.hidden&&t){const n="cancelled",{op:r,status:a}=we(t);It&&H.log(`[Tracing] Transaction: ${n} -> since tab moved to the background, op: ${r}`),a||t.setStatus({code:Fe,message:n}),t.setAttribute("sentry.cancellation_reason","document.hidden"),t.end()}}):It&&H.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const o1=3600,vh="sentry_previous_trace",c1="sentry.previous_trace";function l1(e,{linkPreviousTrace:t,consistentTraceSampling:n}){const r=t==="session-storage";let a=r?m1():void 0;e.on("spanStart",o=>{if(Ze(o)!==o)return;const l=Te().getPropagationContext();a=d1(a,o,l),r&&u1(a)});let i=!0;n&&e.on("beforeSampling",o=>{if(!a)return;const l=Te(),c=l.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}l.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(a.sampleRate),sampled:String(ho(a.spanContext))},sampleRand:a.sampleRand}),o.parentSampled=ho(a.spanContext),o.parentSampleRate=a.sampleRate,o.spanAttributes={...o.spanAttributes,[ou]:a.sampleRate}})}function d1(e,t,n){const r=we(t);function a(){try{return Number(n.dsc?.sample_rate)??Number(r.data?.[Eo])}catch{return 0}}const i={spanContext:t.spanContext(),startTimestamp:r.start_timestamp,sampleRate:a(),sampleRand:n.sampleRand};if(!e)return i;const o=e.spanContext;return o.traceId===r.trace_id?e:(Date.now()/1e3-e.startTimestamp<=o1&&(It&&H.log(`Adding previous_trace ${o} link to span ${{op:r.op,...t.spanContext()}}`),t.addLink({context:o,attributes:{[$0]:"previous_trace"}}),t.setAttribute(c1,`${o.traceId}-${o.spanId}-${ho(o)?1:0}`)),i)}function u1(e){try{Ne.sessionStorage.setItem(vh,JSON.stringify(e))}catch(t){It&&H.warn("Could not store previous trace in sessionStorage",t)}}function m1(){try{const e=Ne.sessionStorage?.getItem(vh);return JSON.parse(e)}catch{return}}function ho(e){return e.traceFlags===1}const h1="BrowserTracing",p1={...Qr,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,enableReportPageLoaded:!1,_experiments:{},...yh},f1=((e={})=>{const t={name:void 0,source:void 0},n=Ne.document,{enableInp:r,enableElementTiming:a,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:l,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:d},beforeStartSpan:m,idleTimeout:u,finalTimeout:h,childSpanTimeout:p,markBackgroundSpan:f,traceFetch:b,traceXHR:w,trackFetchStreamPerformance:g,shouldCreateSpanForRequest:N,enableHTTPTimings:E,ignoreResourceSpans:A,ignorePerformanceApiSpans:y,instrumentPageLoad:j,instrumentNavigation:_,detectRedirects:T,linkPreviousTrace:k,consistentTraceSampling:S,enableReportPageLoaded:D,onRequestSpanStart:F,onRequestSpanEnd:q}={...p1,...e};let te,I,P;function R(z,U,V=!0){const ne=U.op==="pageload",re=U.name,K=m?m(U):U,x=K.attributes||{};if(re!==K.name&&(x[Ft]="custom",K.attributes=x),!V){const le=cn();qn({...K,startTime:le}).end(le);return}t.name=K.name,t.source=x[Ft];const M=Iu(K,{idleTimeout:u,finalTimeout:h,childSpanTimeout:p,disableAutoFinish:ne,beforeSpanEnd:le=>{te?.(),qj(le,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!d,ignoreResourceSpans:A,ignorePerformanceApiSpans:y}),dd(z,void 0);const Q=Te(),Se=Q.getPropagationContext();Q.setPropagationContext({...Se,traceId:M.spanContext().traceId,sampled:Ps(M),dsc:ms(le)}),ne&&(P=void 0)},trimIdleSpanEndTimestamp:!D});ne&&D&&(P=M),dd(z,M);function X(){n&&["interactive","complete"].includes(n.readyState)&&z.emit("idleSpanEnableAutoFinish",M)}ne&&!D&&n&&(n.addEventListener("readystatechange",()=>{X()}),X())}return{name:h1,setup(z){if(pb(),te=Fj({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:d||!1,client:z}),r&&gw(),a&&nw(),o&&je.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?Bj():i&&$j(),l&&zj(),T&&n){const V=()=>{I=Ye()};addEventListener("click",V,{capture:!0}),addEventListener("keydown",V,{capture:!0,passive:!0})}function U(){const V=fr(z);V&&!we(V).timestamp&&(It&&H.log(`[Tracing] Finishing current active span with op: ${we(V).op}`),V.setAttribute(cr,"cancelled"),V.end())}z.on("startNavigationSpan",(V,ne)=>{if(be()!==z)return;if(ne?.isRedirect){It&&H.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),R(z,{op:"navigation.redirect",...V},!1);return}I=void 0,U(),es().setPropagationContext({traceId:ds(),sampleRand:Math.random(),propagationSpanId:Bt()?void 0:is()});const re=Te();re.setPropagationContext({traceId:ds(),sampleRand:Math.random(),propagationSpanId:Bt()?void 0:is()}),re.setSDKProcessingMetadata({normalizedRequest:void 0}),R(z,{op:"navigation",...V,parentSpan:null,forceTransaction:!0})}),z.on("startPageLoadSpan",(V,ne={})=>{if(be()!==z)return;U();const re=ne.sentryTrace||ld("sentry-trace"),K=ne.baggage||ld("baggage"),x=ab(re,K),M=Te();M.setPropagationContext(x),Bt()||(M.getPropagationContext().propagationSpanId=is()),M.setSDKProcessingMetadata({normalizedRequest:Fo()}),R(z,{op:"pageload",...V})}),z.on("endPageloadSpan",()=>{D&&P&&(P.setAttribute(cr,"reportPageLoaded"),P.end())})},afterAllSetup(z){let U=zn();if(k!=="off"&&l1(z,{linkPreviousTrace:k,consistentTraceSampling:S}),Ne.location){if(j){const V=lt();g1(z,{name:Ne.location.pathname,startTime:V?V/1e3:void 0,attributes:{[Ft]:"url",[ze]:"auto.pageload.browser"}})}_&&Ba(({to:V,from:ne})=>{if(ne===void 0&&U?.indexOf(V)!==-1){U=void 0;return}U=void 0;const re=Lo(V),K=fr(z),x=K&&T&&y1(K,I);x1(z,{name:re?.pathname||Ne.location.pathname,attributes:{[Ft]:"url",[ze]:"auto.navigation.browser"}},{url:V,isRedirect:x})})}f&&i1(),l&&b1(z,u,h,p,t),r&&yw(),t1(z,{traceFetch:b,traceXHR:w,trackFetchStreamPerformance:g,tracePropagationTargets:z.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:N,enableHTTPTimings:E,onRequestSpanStart:F,onRequestSpanEnd:q})}}});function g1(e,t,n){e.emit("startPageLoadSpan",t,n),Te().setTransactionName(t.name);const r=fr(e);return r&&e.emit("afterStartPageLoadSpan",r),r}function x1(e,t,n){const{url:r,isRedirect:a}=n||{};e.emit("beforeStartNavigationSpan",t,{isRedirect:a}),e.emit("startNavigationSpan",t,{isRedirect:a});const i=Te();return i.setTransactionName(t.name),r&&!a&&i.setSDKProcessingMetadata({normalizedRequest:{...Fo(),url:r}}),fr(e)}function ld(e){return Ne.document?.querySelector(`meta[name=${e}]`)?.getAttribute("content")||void 0}function b1(e,t,n,r,a){const i=Ne.document;let o;const l=()=>{const c="ui.action.click",d=fr(e);if(d){const m=we(d).op;if(["navigation","pageload"].includes(m)){It&&H.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(cr,"interactionInterrupted"),o.end(),o=void 0),!a.name){It&&H.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=Iu({name:a.name,op:c,attributes:{[Ft]:a.source||"url"}},{idleTimeout:t,finalTimeout:n,childSpanTimeout:r})};i&&addEventListener("click",l,{capture:!0})}const jh="_sentry_idleSpan";function fr(e){return e[jh]}function dd(e,t){pt(e,jh,t)}const ud=1.5;function y1(e,t){const n=we(e),r=cn(),a=n.start_timestamp;return!(r-a>ud||t&&r-t<=ud)}function v1(e){const t={...e};return Ju(t,"react"),Du("react",{version:v.version}),yN(t)}v1({dsn:void 0,environment:"production",integrations:[f1(),Jk({maskAllText:!1,blockAllMedia:!1})],tracesSampleRate:.1,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1,profilesSampleRate:.1,captureUnhandledRejections:!0,captureUncaughtException:!0,beforeSend(e){return e}});hf.createRoot(document.getElementById("root")).render(s.jsxs(s.Fragment,{children:[s.jsx(n0,{}),s.jsx(Nf,{})]}));
